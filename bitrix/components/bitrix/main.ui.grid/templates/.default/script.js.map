{"version":3,"file":"script.js","sources":["src/js/action-panel.js","src/js/baseclass.js","src/js/cell-action-state.js","src/js/cell-actions.js","src/js/cols-sortable.js","src/js/counters.js","src/js/data.js","src/js/dropdown.js","src/js/dropdown-manager.js","src/js/element.js","src/js/fader.js","src/js/grid.js","src/js/gridupdater.js","src/js/image-field.js","src/js/inline-editor.js","src/js/label.js","src/js/loader.js","src/js/manager.js","src/js/message.js","src/js/observer.js","src/js/pagesize.js","src/js/pagination.js","src/js/pin-header.js","src/js/pin-panel.js","src/js/realtime.js","src/js/resize.js","src/js/row.js","src/js/rows.js","src/js/rows-sortable.js","src/js/settings.js","src/js/settings-window/checkboxlist.js","src/js/settings-window/column.js","src/js/settings-window/manager.js","src/js/settings-window/popup.js","src/js/useroptions.js","src/js/utils.js"],"sourcesContent":["(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.ActionPanel\n\t *\n\t * @param {BX.Main.grid} parent\n\t * @param {object} actions List of available actions Bitrix\\Main\\Grid\\Panel\\Actions::getList()\n\t * @param {string} actions.CREATE\n\t * @param {string} actions.SEND\n\t * @param {string} actions.ACTIVATE\n\t * @param {string} actions.SHOW\n\t * @param {string} actions.HIDE\n\t * @param {string} actions.REMOVE\n\t * @param {string} actions.CALLBACK\n\t * @param {string} actions.INLINE_EDIT\n\t * @param {string} actions.HIDE_ALL_EXPECT\n\t * @param {string} actions.SHOW_ALL\n\t * @param {string} actions.RESET_CONTROLS\n\t *\n\t * @param {object} types List of available control types\n\t * of the actions panel Bitrix\\Main\\Grid\\Panel\\Types::getList()\n\t * @param {string} types.DROPDOWN\n\t * @param {string} types.CHECKBOX\n\t * @param {string} types.TEXT\n\t * @param {string} types.BUTTON\n\t * @param {string} types.LINK\n\t * @param {string} types.CUSTOM\n\t * @param {string} types.HIDDEN\n\t *\n\t * @constructor\n\t */\n\tBX.Grid.ActionPanel = function(parent, actions, types)\n\t{\n\t\tthis.parent = null;\n\t\tthis.rel = {};\n\t\tthis.actions = null;\n\t\tthis.types = null;\n\t\tthis.lastActivated = [];\n\t\tthis.init(parent, actions, types);\n\t\tthis.button = [];\n\t\tthis.elements = [];\n\t\tthis.buttonOnChange = [];\n\t\tthis.buttonData = {};\n\t};\n\n\tBX.Grid.ActionPanel.prototype = {\n\t\tinit(parent, actions, types)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tthis.actions = eval(actions);\n\t\t\tthis.types = eval(types);\n\n\t\t\tBX.addCustomEvent(window, 'Dropdown::change', BX.proxy(this._dropdownEventHandle, this));\n\n\t\t\tBX.addCustomEvent(window, 'Dropdown::load', BX.proxy(this._dropdownEventHandle, this));\n\n\t\t\tconst panel = this.getPanel();\n\t\t\tBX.bind(panel, 'change', BX.delegate(this._checkboxChange, this));\n\t\t\tBX.bind(panel, 'click', BX.delegate(this._clickOnButton, this));\n\n\t\t\tBX.addCustomEvent(window, 'Grid::updated', BX.proxy(this._gridUpdatedEventHandle, this));\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tBX.removeCustomEvent(window, 'Dropdown::change', BX.proxy(this._dropdownEventHandle, this));\n\t\t\tBX.removeCustomEvent(window, 'Dropdown::load', BX.proxy(this._dropdownEventHandle, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::updated', BX.proxy(this._gridUpdatedEventHandle, this));\n\t\t},\n\n\t\t_gridUpdatedEventHandle()\n\t\t{\n\t\t\tconst cancelButton = BX('grid_cancel_button');\n\t\t\tcancelButton && BX.fireEvent(BX.firstChild(cancelButton), 'click');\n\t\t},\n\n\t\t_dropdownEventHandle(id, event, item, dataItem)\n\t\t{\n\t\t\tthis.isPanelControl(BX(id)) && this._dropdownChange(id, event, item, dataItem);\n\t\t},\n\n\t\tresetForAllCheckbox()\n\t\t{\n\t\t\tconst checkbox = this.getForAllCheckbox();\n\n\t\t\tif (BX.type.isDomNode(checkbox))\n\t\t\t{\n\t\t\t\tcheckbox.checked = null;\n\t\t\t}\n\t\t},\n\n\t\tgetForAllCheckbox()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getPanel(), this.parent.settings.get('classForAllCheckbox'), true);\n\t\t},\n\n\t\tgetPanel()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.parent.getContainer(), this.parent.settings.get('classActionPanel'), true);\n\t\t},\n\n\t\tgetApplyButton()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getPanel(), this.parent.settings.get('classPanelApplyButton'), true);\n\t\t},\n\n\t\tisPanelControl(node)\n\t\t{\n\t\t\treturn BX.hasClass(node, this.parent.settings.get('classPanelControl'));\n\t\t},\n\n\t\tgetTextInputs()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getBySelector(this.getPanel(), 'input[type=\"text\"]');\n\t\t},\n\n\t\tgetHiddenInputs()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getBySelector(this.getPanel(), 'input[type=\"hidden\"]');\n\t\t},\n\n\t\tgetSelects()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getBySelector(this.getPanel(), 'select');\n\t\t},\n\n\t\tgetDropdowns()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getPanel(), this.parent.settings.get('classDropdown'));\n\t\t},\n\n\t\tgetCheckboxes()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getPanel(), this.parent.settings.get('classPanelCheckbox'));\n\t\t},\n\n\t\tgetButtons()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getPanel(), this.parent.settings.get('classPanelButton'));\n\t\t},\n\n\t\tisDropdown(node)\n\t\t{\n\t\t\treturn BX.hasClass(node, this.parent.settings.get('classDropdown'));\n\t\t},\n\n\t\tisCheckbox(node)\n\t\t{\n\t\t\treturn BX.hasClass(node, this.parent.settings.get('classPanelCheckbox'));\n\t\t},\n\n\t\tisTextInput(node)\n\t\t{\n\t\t\treturn node.type === 'text';\n\t\t},\n\n\t\tisHiddenInput(node)\n\t\t{\n\t\t\treturn node.type === 'hidden';\n\t\t},\n\n\t\tisSelect(node)\n\t\t{\n\t\t\treturn node.tagName === 'SELECT';\n\t\t},\n\n\t\tcreateDropdown(data, relative)\n\t\t{\n\t\t\tconst emptyText = data.EMPTY_TEXT || '';\n\t\t\tconst isMultiple = data.MULTIPLE === 'Y';\n\t\t\tconst container = this.createContainer(data.ID, relative, {});\n\t\t\tconst dropdown = BX.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'main-dropdown main-grid-panel-control',\n\t\t\t\t\tid: `${data.ID}_control`,\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\tname: data.NAME,\n\t\t\t\t\t'data-name': data.NAME,\n\t\t\t\t\t'data-empty-text': emptyText,\n\t\t\t\t\t'data-multiple': isMultiple ? 'Y' : 'N',\n\t\t\t\t\t'data-items': JSON.stringify(data.ITEMS),\n\t\t\t\t\t'data-value': isMultiple ? '' : data.ITEMS[0].VALUE,\n\t\t\t\t\t'data-popup-position': 'fixed',\n\t\t\t\t},\n\t\t\t\tchildren: [BX.create('span', {\n\t\t\t\t\tprops: { className: 'main-dropdown-inner' },\n\t\t\t\t\thtml: isMultiple ? emptyText : data.ITEMS[0].NAME,\n\t\t\t\t})],\n\t\t\t});\n\n\t\t\tcontainer.appendChild(dropdown);\n\n\t\t\treturn container;\n\t\t},\n\n\t\tcreateCheckbox(data, relative)\n\t\t{\n\t\t\tconst checkbox = this.createContainer(data.ID, relative, {});\n\n\t\t\tconst inner = BX.create('span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'main-grid-checkbox-container',\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst titleSpan = BX.create('span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'main-grid-control-panel-content-title',\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst input = BX.create('input', {\n\t\t\t\tprops: {\n\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\tclassName: `${this.parent.settings.get('classPanelCheckbox')} main-grid-checkbox`,\n\t\t\t\t\tid: `${data.ID}_control`,\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\tvalue: data.VALUE || '',\n\t\t\t\t\ttitle: data.TITLE || '',\n\t\t\t\t\tname: data.NAME || '',\n\t\t\t\t\t'data-onchange': JSON.stringify(data.ONCHANGE),\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tinput.checked = data.CHECKED || null;\n\n\t\t\tcheckbox.appendChild(inner);\n\t\t\tcheckbox.appendChild(titleSpan);\n\n\t\t\tinner.appendChild(input);\n\n\t\t\tinner.appendChild(BX.create('label', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'main-grid-checkbox',\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\tfor: `${data.ID}_control`,\n\t\t\t\t\ttitle: data.TITLE,\n\t\t\t\t},\n\t\t\t}));\n\n\t\t\ttitleSpan.appendChild(BX.create('label', {\n\t\t\t\tattrs: {\n\t\t\t\t\tfor: `${data.ID}_control`,\n\t\t\t\t\ttitle: data.TITLE,\n\t\t\t\t},\n\t\t\t\thtml: data.LABEL,\n\t\t\t}));\n\n\t\t\treturn checkbox;\n\t\t},\n\n\t\t/**\n\t\t * @param {object} data\n\t\t * @param {object} data.ID\n\t\t * @param {object} data.TITLE\n\t\t * @param {object} data.PLACEHOLDER\n\t\t * @param {object} data.ONCHANGE\n\t\t * @param {string} relative\n\t\t * @returns {*}\n\t\t */\n\t\tcreateText(data, relative)\n\t\t{\n\t\t\tconst container = this.createContainer(data.ID, relative, {});\n\t\t\tconst title = BX.type.isNotEmptyString(data.TITLE) ? data.TITLE : '';\n\t\t\tif (title !== '')\n\t\t\t{\n\t\t\t\tcontainer.appendChild(\n\t\t\t\t\tBX.create(\n\t\t\t\t\t\t'label',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattrs: { title, for: `${data.ID}_control` },\n\t\t\t\t\t\t\ttext: title,\n\t\t\t\t\t\t},\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t\tcontainer.appendChild(\n\t\t\t\tBX.create(\n\t\t\t\t\t'input',\n\t\t\t\t\t{\n\t\t\t\t\t\tprops:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclassName: 'main-grid-control-panel-input-text main-grid-panel-control',\n\t\t\t\t\t\t\t\tid: `${data.ID}_control`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: data.NAME,\n\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\tplaceholder: data.PLACEHOLDER || '',\n\t\t\t\t\t\t\t\tvalue: data.VALUE || '',\n\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t'data-onchange': JSON.stringify(data.ONCHANGE || []),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn container;\n\t\t},\n\n\t\tcreateHidden(data, relative)\n\t\t{\n\t\t\tconst container = this.createContainer(\n\t\t\t\tdata.ID,\n\t\t\t\trelative,\n\t\t\t\t{ CLASS: 'main-grid-panel-hidden-control-container' },\n\t\t\t);\n\t\t\tcontainer.appendChild(\n\t\t\t\tBX.create(\n\t\t\t\t\t'input',\n\t\t\t\t\t{\n\t\t\t\t\t\tprops:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: `${data.ID}_control`,\n\t\t\t\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\tattrs:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: data.NAME,\n\t\t\t\t\t\t\t\tvalue: data.VALUE || '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\n\t\t\treturn container;\n\t\t},\n\n\t\tcreateButton(data, relative)\n\t\t{\n\t\t\tthis.buttonOnChange = (data.ONCHANGE || []);\n\t\t\tthis.buttonData = data;\n\n\t\t\tthis.button = this.createButtonNode(data);\n\n\t\t\tBX.removeCustomEvent(window, 'Grid::unselectRow', BX.proxy(this.prepareButton, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::selectRow', BX.proxy(this.prepareButton, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::allRowsSelected', BX.proxy(this.prepareButton, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::allRowsUnselected', BX.proxy(this.prepareButton, this));\n\n\t\t\tif (\n\t\t\t\tthis.buttonData.SETTINGS\n\t\t\t\t&& data.ID === this.buttonData.SETTINGS.buttonId\n\t\t\t)\n\t\t\t{\n\t\t\t\tBX.addCustomEvent(window, 'Grid::unselectRow', BX.proxy(this.prepareButton, this));\n\t\t\t\tBX.addCustomEvent(window, 'Grid::selectRow', BX.proxy(this.prepareButton, this));\n\t\t\t\tBX.addCustomEvent(window, 'Grid::allRowsSelected', BX.proxy(this.prepareButton, this));\n\t\t\t\tBX.addCustomEvent(window, 'Grid::allRowsUnselected', BX.proxy(this.prepareButton, this));\n\t\t\t}\n\n\t\t\tthis.prepareButton();\n\n\t\t\tconst container = this.createContainer(data.ID, relative, {});\n\t\t\tcontainer.appendChild(this.button);\n\n\t\t\treturn container;\n\t\t},\n\n\t\tcreateButtonNode(data)\n\t\t{\n\t\t\treturn BX.create('button', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `ui-btn${data.CLASS ? ` ${data.CLASS}` : ''}`,\n\t\t\t\t\tid: `${data.ID}_control`,\n\t\t\t\t\ttitle: BX.type.isNotEmptyString(data.TITLE) ? data.TITLE : '',\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\tname: data.NAME || '',\n\t\t\t\t},\n\t\t\t\thtml: data.TEXT,\n\t\t\t});\n\t\t},\n\n\t\tprepareButton()\n\t\t{\n\t\t\tif (this.isSetButtonDisabled())\n\t\t\t{\n\t\t\t\tBX.Dom.attr(this.button, 'data-onchange', []);\n\t\t\t\tBX.Dom.addClass(this.button, 'ui-btn-disabled');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.Dom.attr(this.button, 'data-onchange', this.buttonOnChange);\n\t\t\t\tBX.Dom.removeClass(this.button, 'ui-btn-disabled');\n\t\t\t}\n\t\t},\n\n\t\tisSetButtonDisabled()\n\t\t{\n\t\t\treturn Boolean(this.buttonData.SETTINGS\n\t\t\t\t&& this.buttonData.SETTINGS.minSelectedRows\n\t\t\t\t&& (this.getSelectedIds().length < this.buttonData.SETTINGS.minSelectedRows));\n\t\t},\n\n\t\t/**\n\t\t * @param {object} data\n\t\t * @param {object} data.ID\n\t\t * @param {object} data.TITLE\n\t\t * @param {object} data.PLACEHOLDER\n\t\t * @param {object} data.ONCHANGE\n\t\t * @param {object} data.CLASS\n\t\t * @param {object} data.HREF\n\t\t * @param {string} relative\n\t\t * @returns {*}\n\t\t */\n\t\tcreateLink(data, relative)\n\t\t{\n\t\t\tconst container = this.createContainer(data.ID, relative, {});\n\t\t\tconst link = BX.create('a', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `main-grid-link${data.CLASS ? ` ${data.CLASS}` : ''}`,\n\t\t\t\t\tid: `${data.ID}_control`,\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\thref: data.HREF || '',\n\t\t\t\t\t'data-onchange': JSON.stringify(data.ONCHANGE || []),\n\t\t\t\t},\n\t\t\t\thtml: data.TEXT,\n\t\t\t});\n\n\t\t\tcontainer.appendChild(link);\n\n\t\t\treturn container;\n\t\t},\n\n\t\tcreateCustom(data, relative)\n\t\t{\n\t\t\tconst container = this.createContainer(\n\t\t\t\tdata.ID,\n\t\t\t\trelative,\n\t\t\t\t{ CLASS: 'main-grid-panel-hidden-control-container' },\n\t\t\t);\n\n\t\t\tconst custom = BX.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: `main-grid-panel-custom${data.CLASS ? ` ${data.CLASS}` : ''}`,\n\t\t\t\t},\n\t\t\t\thtml: data.VALUE,\n\t\t\t});\n\n\t\t\tcontainer.appendChild(custom);\n\n\t\t\treturn container;\n\t\t},\n\n\t\tcreateContainer(id, relative, options)\n\t\t{\n\t\t\tid = id.replace('_control', '');\n\t\t\trelative = relative.replace('_control', '');\n\t\t\toptions = options || {};\n\n\t\t\treturn BX.create('span', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: this.parent.settings.get('classPanelControlContainer') + (options.CLASS ? ` ${options.CLASS}` : ''),\n\t\t\t\t\tid,\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-relative': relative,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\n\t\tremoveItemsRelativeCurrent(node)\n\t\t{\n\t\t\tlet element = node;\n\t\t\tconst relative = [node.id];\n\t\t\tconst result = [];\n\t\t\tlet dataRelative;\n\n\t\t\twhile (element)\n\t\t\t{\n\t\t\t\tdataRelative = BX.data(element, 'relative');\n\n\t\t\t\tif (relative.includes(dataRelative))\n\t\t\t\t{\n\t\t\t\t\trelative.push(element.id);\n\t\t\t\t\tresult.push(element);\n\t\t\t\t}\n\n\t\t\t\telement = element.nextElementSibling;\n\t\t\t}\n\n\t\t\tresult.forEach((current) => {\n\t\t\t\tBX.remove(current);\n\t\t\t});\n\t\t},\n\n\t\tvalidateData(data)\n\t\t{\n\t\t\treturn (\n\t\t\t\t('ONCHANGE' in data)\n\t\t\t\t&& BX.type.isArray(data.ONCHANGE)\n\t\t\t);\n\t\t},\n\n\t\tactivateControl(id)\n\t\t{\n\t\t\tconst element = BX(id);\n\n\t\t\tif (BX.type.isDomNode(element))\n\t\t\t{\n\t\t\t\tBX.removeClass(element, this.parent.settings.get('classDisable'));\n\t\t\t\telement.disabled = null;\n\t\t\t}\n\t\t},\n\n\t\tdeactivateControl(id)\n\t\t{\n\t\t\tconst element = BX(id);\n\n\t\t\tif (BX.type.isDomNode(element))\n\t\t\t{\n\t\t\t\tBX.addClass(element, this.parent.settings.get('classDisable'));\n\t\t\t\telement.disabled = true;\n\t\t\t}\n\t\t},\n\n\t\tshowControl(id)\n\t\t{\n\t\t\tconst control = BX(id);\n\t\t\tcontrol && BX.show(control);\n\t\t},\n\n\t\thideControl(id)\n\t\t{\n\t\t\tconst control = BX(id);\n\t\t\tcontrol && BX.hide(control);\n\t\t},\n\n\t\tvalidateActionObject(action)\n\t\t{\n\t\t\treturn (\n\t\t\t\tBX.type.isPlainObject(action) && ('ACTION' in action) && BX.type.isNotEmptyString(action.ACTION) && (\n\t\t\t\t\taction.ACTION === this.actions.RESET_CONTROLS\n\t\t\t\t\t|| ('DATA' in action) && BX.type.isArray(action.DATA)\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\n\t\tvalidateControlObject(controlObject)\n\t\t{\n\t\t\treturn (\n\t\t\t\tBX.type.isPlainObject(controlObject)\n\t\t\t\t&& ('TYPE' in controlObject)\n\t\t\t\t&& ('ID' in controlObject)\n\t\t\t);\n\t\t},\n\n\t\tcreateDate(data, relative)\n\t\t{\n\t\t\tconst container = this.createContainer(data.ID, relative, {});\n\t\t\tconst date = BX.decl({\n\t\t\t\tblock: 'main-ui-date',\n\t\t\t\tmix: ['main-grid-panel-date'],\n\t\t\t\tcalendarButton: true,\n\t\t\t\tvalueDelete: true,\n\t\t\t\tplaceholder: 'PLACEHOLDER' in data ? data.PLACEHOLDER : '',\n\t\t\t\tname: 'NAME' in data ? `${data.NAME}_from` : '',\n\t\t\t\ttabindex: 'TABINDEX' in data ? data.TABINDEX : '',\n\t\t\t\tvalue: 'VALUE' in data ? data.VALUE : '',\n\t\t\t\tenableTime: 'TIME' in data ? (data.TIME ? 'true' : 'false') : 'false',\n\t\t\t});\n\n\t\t\tcontainer.appendChild(date);\n\n\t\t\treturn container;\n\t\t},\n\n\t\tcreateControl(controlObject, relativeId)\n\t\t{\n\t\t\tlet newElement = null;\n\t\t\tswitch (controlObject.TYPE)\n\t\t\t{\n\t\t\t\tcase this.types.DROPDOWN:\n\t\t\t\t\tnewElement = this.createDropdown(controlObject, relativeId);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.types.CHECKBOX:\n\t\t\t\t\tnewElement = this.createCheckbox(controlObject, relativeId);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.types.TEXT:\n\t\t\t\t\tnewElement = this.createText(controlObject, relativeId);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.types.HIDDEN:\n\t\t\t\t\tnewElement = this.createHidden(controlObject, relativeId);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.types.BUTTON:\n\t\t\t\t\tnewElement = this.createButton(controlObject, relativeId);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.types.LINK:\n\t\t\t\t\tnewElement = this.createLink(controlObject, relativeId);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.types.CUSTOM:\n\t\t\t\t\tnewElement = this.createCustom(controlObject, relativeId);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase this.types.DATE:\n\t\t\t\t\tnewElement = this.createDate(controlObject, relativeId);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn newElement;\n\t\t},\n\n\t\tonChangeHandler(container, actions, isPseudo)\n\t\t{\n\t\t\tlet newElement; let\n\t\t\t\tcallback;\n\t\t\tconst self = this;\n\n\t\t\tif (BX.type.isDomNode(container) && BX.type.isArray(actions))\n\t\t\t{\n\t\t\t\tactions.forEach(function(action) {\n\t\t\t\t\tif (self.validateActionObject(action))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (action.ACTION === self.actions.CREATE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.removeItemsRelativeCurrent(container);\n\t\t\t\t\t\t\tconst preparedData = BX.Runtime.clone(action.DATA).reverse();\n\n\t\t\t\t\t\t\tpreparedData.forEach((controlObject) => {\n\t\t\t\t\t\t\t\tif (self.validateControlObject(controlObject))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnewElement = self.createControl(controlObject, container.id || BX.data(container, 'relative'));\n\n\t\t\t\t\t\t\t\t\tif (BX.type.isDomNode(newElement))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.insertAfter(newElement, container);\n\n\t\t\t\t\t\t\t\t\t\tif (('ONCHANGE' in controlObject)\n\t\t\t\t\t\t\t\t\t\t\t&& controlObject.TYPE === self.types.CHECKBOX\n\t\t\t\t\t\t\t\t\t\t\t&& ('CHECKED' in controlObject)\n\t\t\t\t\t\t\t\t\t\t\t&& controlObject.CHECKED)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tself.onChangeHandler(newElement, controlObject.ONCHANGE);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (controlObject.TYPE === self.types.DROPDOWN\n\t\t\t\t\t\t\t\t\t\t\t&& BX.type.isArray(controlObject.ITEMS)\n\t\t\t\t\t\t\t\t\t\t\t&& controlObject.ITEMS.length > 0\n\t\t\t\t\t\t\t\t\t\t\t&& ('ONCHANGE' in controlObject.ITEMS[0])\n\t\t\t\t\t\t\t\t\t\t\t&& BX.type.isArray(controlObject.ITEMS[0].ONCHANGE))\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tself.onChangeHandler(newElement, controlObject.ITEMS[0].ONCHANGE);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action.ACTION === self.actions.ACTIVATE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.removeItemsRelativeCurrent(container);\n\n\t\t\t\t\t\t\tif (BX.type.isArray(action.DATA))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taction.DATA.forEach((currentId) => {\n\t\t\t\t\t\t\t\t\tself.lastActivated.push(currentId.ID);\n\t\t\t\t\t\t\t\t\tself.activateControl(currentId.ID);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action.ACTION === self.actions.SHOW && BX.type.isArray(action.DATA))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taction.DATA.forEach((showCurrent) => {\n\t\t\t\t\t\t\t\tself.showControl(showCurrent.ID);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action.ACTION === self.actions.HIDE && BX.type.isArray(action.DATA))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taction.DATA.forEach((hideCurrent) => {\n\t\t\t\t\t\t\t\tself.hideControl(hideCurrent.ID);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action.ACTION === self.actions.HIDE_ALL_EXPECT && BX.type.isArray(action.DATA))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t(self.getControls() || []).forEach((current) => {\n\t\t\t\t\t\t\t\tif (!action.DATA.some((el) => { return el.ID === current.id;\n\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tself.hideControl(current.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action.ACTION === self.actions.SHOW_ALL)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t(self.getControls() || []).forEach((current) => {\n\t\t\t\t\t\t\t\tself.showControl(current.id);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action.ACTION === self.actions.REMOVE && BX.type.isArray(action.DATA))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taction.DATA.forEach((removeCurrent) => {\n\t\t\t\t\t\t\t\tBX.remove(BX(removeCurrent.ID));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action.ACTION === self.actions.CALLBACK)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.confirmDialog(action, BX.delegate(() => {\n\t\t\t\t\t\t\t\tif (BX.type.isArray(action.DATA))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\taction.DATA.forEach(\n\t\t\t\t\t\t\t\t\t\t(currentCallback) => {\n\t\t\t\t\t\t\t\t\t\t\tif (currentCallback.JS.includes('Grid.'))\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tcallback = currentCallback.JS.replace('Grid', 'self.parent');\n\t\t\t\t\t\t\t\t\t\t\t\tcallback = callback.replace('()', '');\n\t\t\t\t\t\t\t\t\t\t\t\tcallback += '.apply(self.parent, [container])';\n\t\t\t\t\t\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\teval(callback); // jshint ignore:line\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(err);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse if (BX.type.isNotEmptyString(currentCallback.JS))\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\teval(currentCallback.JS);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcatch (err)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(err);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (action.ACTION === self.actions.RESET_CONTROLS)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.removeItemsRelativeCurrent(container);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!isPseudo)\n\t\t\t\t{\n\t\t\t\t\tthis.removeItemsRelativeCurrent(container);\n\t\t\t\t}\n\n\t\t\t\tself.lastActivated.forEach((current) => {\n\t\t\t\t\tself.deactivateControl(current);\n\t\t\t\t});\n\n\t\t\t\tself.lastActivated = [];\n\t\t\t}\n\t\t},\n\n\t\tconfirmDialog(action, then, cancel)\n\t\t{\n\t\t\tthis.parent.confirmDialog(action, then, cancel);\n\t\t},\n\n\t\t/**\n\t\t * Dropdown value change handler\n\t\t * @param {string} id Dropdown id\n\t\t * @param {object} event\n\t\t * @param item\n\t\t * @param {object} dataItem\n\t\t * @param {object} dataItem.ONCHANGE\n\t\t * @param {boolean} dataItem.PSEUDO\n\t\t * @private\n\t\t */\n\t\t_dropdownChange(id, event, item, dataItem)\n\t\t{\n\t\t\tconst dropdown = BX(id);\n\t\t\tconst container = dropdown.parentNode;\n\t\t\tconst onChange = dataItem && ('ONCHANGE' in dataItem) ? dataItem.ONCHANGE : null;\n\t\t\tconst isPseudo = dataItem && ('PSEUDO' in dataItem && dataItem.PSEUDO !== false);\n\n\t\t\tthis.onChangeHandler(container, onChange, isPseudo);\n\t\t},\n\n\t\t_checkboxChange(event)\n\t\t{\n\t\t\tlet onChange;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tonChange = eval(BX.data(event.target, 'onchange'));\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tonChange = null;\n\t\t\t}\n\n\t\t\tthis.onChangeHandler(\n\t\t\t\tBX.findParent(event.target, {\n\t\t\t\t\tclassName: this.parent.settings.get('classPanelContainer'),\n\t\t\t\t}, true, false),\n\t\t\t\tevent.target.checked || event.target.id.includes('actallrows_') ? onChange : null,\n\t\t\t);\n\t\t},\n\n\t\t_clickOnButton(event)\n\t\t{\n\t\t\tlet onChange;\n\n\t\t\tif (this.isButton(event.target))\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tonChange = eval(BX.data(event.target, 'onchange'));\n\t\t\t\t}\n\t\t\t\tcatch\n\t\t\t\t{\n\t\t\t\t\tonChange = null;\n\t\t\t\t}\n\n\t\t\t\tthis.onChangeHandler(\n\t\t\t\t\tBX.findParent(event.target, {\n\t\t\t\t\t\tclassName: this.parent.settings.get('classPanelContainer'),\n\t\t\t\t\t}, true, false),\n\t\t\t\t\tonChange,\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\tisButton(node)\n\t\t{\n\t\t\treturn BX.hasClass(node, this.parent.settings.get('classPanelButton'));\n\t\t},\n\n\t\tgetSelectedIds()\n\t\t{\n\t\t\tconst rows = this.parent.getRows().getSelected().filter((row) => { return row.isShown();\n\t\t\t});\n\n\t\t\treturn rows.map((current) => {\n\t\t\t\treturn current.getId();\n\t\t\t});\n\t\t},\n\n\t\tgetControls()\n\t\t{\n\t\t\treturn BX.findChild(this.getPanel(), {\n\t\t\t\tclassName: this.parent.settings.get('classPanelControlContainer'),\n\t\t\t}, true, true);\n\t\t},\n\n\t\tgetValues()\n\t\t{\n\t\t\tconst data = {};\n\t\t\tconst self = this;\n\t\t\tconst controls = [].concat(\n\t\t\t\tthis.getDropdowns(),\n\t\t\t\tthis.getTextInputs(),\n\t\t\t\tthis.getHiddenInputs(),\n\t\t\t\tthis.getSelects(),\n\t\t\t\tthis.getCheckboxes(),\n\t\t\t\tthis.getButtons(),\n\t\t\t);\n\n\t\t\t(controls || []).forEach((current) => {\n\t\t\t\tif (BX.type.isDomNode(current))\n\t\t\t\t{\n\t\t\t\t\tif (self.isDropdown(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet dropdownValue = BX.data(current, 'value');\n\t\t\t\t\t\tconst multiple = BX.data(current, 'multiple') === 'Y';\n\t\t\t\t\t\tdropdownValue = (dropdownValue !== null && dropdownValue !== undefined) ? dropdownValue : '';\n\t\t\t\t\t\tdata[BX.data(current, 'name')] = multiple ? dropdownValue.split(',') : dropdownValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.isSelect(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tdata[current.getAttribute('name')] = current.options[current.selectedIndex].value;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.isCheckbox(current) && current.checked)\n\t\t\t\t\t{\n\t\t\t\t\t\tdata[current.getAttribute('name')] = current.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.isTextInput(current) || self.isHiddenInput(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tdata[current.getAttribute('name')] = current.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.isButton(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst name = BX.data(current, 'name');\n\t\t\t\t\t\tlet value = BX.data(current, 'value');\n\t\t\t\t\t\tvalue = (value !== null && value !== undefined) ? value : '';\n\n\t\t\t\t\t\tif (name)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata[name] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn data;\n\t\t},\n\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * Base class\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.BaseClass = function(parent)\n\t{\n\t\tthis.parent = parent;\n\t};\n\n\tBX.Grid.BaseClass.prototype = {\n\t\tgetParent()\n\t\t{\n\t\t\treturn this.parent;\n\t\t},\n\t};\n})();\n","import { Reflection } from 'main.core';\n\n/**\n * @memberOf BX.Grid\n */\nexport class CellActionState\n{\n\tstatic SHOW_BY_HOVER = 'main-grid-cell-content-action-by-hover';\n\tstatic ACTIVE = 'main-grid-cell-content-action-active';\n}\n\nconst namespace = Reflection.namespace('BX.Grid');\nnamespace.CellActionState = CellActionState;\n","import { Reflection } from 'main.core';\n\n/**\n * @memberOf BX.Grid\n */\nexport class CellActions\n{\n\tstatic PIN = 'main-grid-cell-content-action-pin';\n\tstatic MUTE = 'main-grid-cell-content-action-mute';\n}\n\nconst namespace = Reflection.namespace('BX.Grid');\nnamespace.CellActions = CellActions;\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.ColsSortable\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.ColsSortable = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.dragItem = null;\n\t\tthis.targetItem = null;\n\t\tthis.rowsList = null;\n\t\tthis.colsList = null;\n\t\tthis.dragRect = null;\n\t\tthis.offset = null;\n\t\tthis.startDragOffset = null;\n\t\tthis.dragColumn = null;\n\t\tthis.targetColumn = null;\n\t\tthis.isDrag = null;\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.ColsSortable.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tthis.colsList = this.getColsList();\n\t\t\tthis.rowsList = this.getRowsList();\n\n\t\t\tif (!this.inited)\n\t\t\t{\n\t\t\t\tthis.inited = true;\n\t\t\t\tBX.addCustomEvent('Grid::updated', BX.proxy(this.reinit, this));\n\t\t\t\tBX.addCustomEvent('Grid::headerUpdated', BX.proxy(this.reinit, this));\n\t\t\t}\n\n\t\t\tthis.registerObjects();\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tBX.removeCustomEvent('Grid::updated', BX.proxy(this.reinit, this));\n\t\t\tthis.unregisterObjects();\n\t\t},\n\n\t\treinit()\n\t\t{\n\t\t\tthis.unregisterObjects();\n\t\t\tthis.reset();\n\t\t\tthis.init(this.parent);\n\t\t},\n\n\t\treset()\n\t\t{\n\t\t\tthis.dragItem = null;\n\t\t\tthis.targetItem = null;\n\t\t\tthis.rowsList = null;\n\t\t\tthis.colsList = null;\n\t\t\tthis.dragRect = null;\n\t\t\tthis.offset = null;\n\t\t\tthis.startDragOffset = null;\n\t\t\tthis.dragColumn = null;\n\t\t\tthis.targetColumn = null;\n\t\t\tthis.isDrag = null;\n\t\t\tthis.fixedTableColsList = null;\n\t\t},\n\n\t\tisActive()\n\t\t{\n\t\t\treturn this.isDrag;\n\t\t},\n\n\t\tregisterObjects()\n\t\t{\n\t\t\tthis.unregisterObjects();\n\t\t\tthis.getColsList().forEach(this.register, this);\n\t\t\tthis.getFixedHeaderColsList().forEach(this.register, this);\n\t\t},\n\n\t\tunregisterObjects()\n\t\t{\n\t\t\tthis.getColsList().forEach(this.unregister, this);\n\t\t\tthis.getFixedHeaderColsList().forEach(this.unregister, this);\n\t\t},\n\n\t\tunregister(column)\n\t\t{\n\t\t\tjsDD.unregisterObject(column);\n\t\t},\n\n\t\tregister(column)\n\t\t{\n\t\t\tcolumn.onbxdragstart = BX.proxy(this._onDragStart, this);\n\t\t\tcolumn.onbxdrag = BX.proxy(this._onDrag, this);\n\t\t\tcolumn.onbxdragstop = BX.proxy(this._onDragEnd, this);\n\t\t\tjsDD.registerObject(column);\n\t\t},\n\n\t\tgetColsList()\n\t\t{\n\t\t\tif (!this.colsList)\n\t\t\t{\n\t\t\t\tthis.colsList = BX.Grid.Utils.getByTag(this.parent.getRows().getHeadFirstChild().getNode(), 'th');\n\t\t\t\tthis.colsList = this.colsList.filter(function(current) {\n\t\t\t\t\treturn !this.isStatic(current);\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\treturn this.colsList;\n\t\t},\n\n\t\tgetFixedHeaderColsList()\n\t\t{\n\t\t\tif (!this.fixedTableColsList && this.parent.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\tthis.fixedTableColsList = BX.Grid.Utils.getByTag(this.parent.getPinHeader().getFixedTable(), 'th');\n\t\t\t\tthis.fixedTableColsList = this.fixedTableColsList.filter(function(current) {\n\t\t\t\t\treturn !this.isStatic(current);\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\treturn this.fixedTableColsList || [];\n\t\t},\n\n\t\tgetRowsList()\n\t\t{\n\t\t\tlet rowsList = this.parent.getRows().getSourceRows();\n\n\t\t\tif (this.parent.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\trowsList = rowsList.concat(BX.Grid.Utils.getByTag(this.parent.getPinHeader().getFixedTable(), 'tr'));\n\t\t\t}\n\n\t\t\treturn rowsList;\n\t\t},\n\n\t\tisStatic(item)\n\t\t{\n\t\t\treturn (\n\t\t\t\tBX.hasClass(item, this.parent.settings.get('classCellStatic'))\n\t\t\t\t&& !BX.hasClass(item, 'main-grid-fixed-column')\n\t\t\t);\n\t\t},\n\n\t\tgetDragOffset()\n\t\t{\n\t\t\tconst offset = this.parent.getScrollContainer().scrollLeft - this.startScrollOffset;\n\n\t\t\treturn ((jsDD.x - this.startDragOffset - this.dragRect.left) + offset);\n\t\t},\n\n\t\tgetColumn(cell)\n\t\t{\n\t\t\tlet column = [];\n\n\t\t\tif (cell instanceof HTMLTableCellElement)\n\t\t\t{\n\t\t\t\tcolumn = this.rowsList.map((row) => {\n\t\t\t\t\treturn row.cells[cell.cellIndex];\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn column;\n\t\t},\n\n\t\t_onDragStart()\n\t\t{\n\t\t\tif (this.parent.getParam('ALLOW_PIN_HEADER') && this.parent.getPinHeader().isPinned())\n\t\t\t{\n\t\t\t\tthis.colsList = this.getFixedHeaderColsList();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.colsList = this.getColsList();\n\t\t\t}\n\n\t\t\tthis.startScrollOffset = this.parent.getScrollContainer().scrollLeft;\n\t\t\tthis.isDrag = true;\n\t\t\tthis.dragItem = jsDD.current_node;\n\t\t\tthis.dragRect = this.dragItem.getBoundingClientRect();\n\t\t\tthis.offset = Math.ceil(this.dragRect.width);\n\t\t\tthis.startDragOffset = jsDD.start_x - this.dragRect.left;\n\t\t\tthis.dragColumn = this.getColumn(this.dragItem);\n\t\t\tthis.dragIndex = BX.Grid.Utils.getIndex(this.colsList, this.dragItem);\n\t\t\tthis.parent.preventSortableClick = true;\n\t\t},\n\n\t\tisDragToRight(node, index)\n\t\t{\n\t\t\tconst nodeClientRect = node.getBoundingClientRect();\n\t\t\tconst nodeCenter = Math.ceil(nodeClientRect.left + (nodeClientRect.width / 2) + BX.scrollLeft(window));\n\t\t\tconst dragIndex = this.dragIndex;\n\t\t\tconst x = jsDD.x;\n\n\t\t\treturn index > dragIndex && x > nodeCenter;\n\t\t},\n\n\t\tisDragToLeft(node, index)\n\t\t{\n\t\t\tconst nodeClientRect = node.getBoundingClientRect();\n\t\t\tconst nodeCenter = Math.ceil(nodeClientRect.left + (nodeClientRect.width / 2) + BX.scrollLeft(window));\n\t\t\tconst dragIndex = this.dragIndex;\n\t\t\tconst x = jsDD.x;\n\n\t\t\treturn index < dragIndex && x < nodeCenter;\n\t\t},\n\n\t\tisDragToBack(node, index)\n\t\t{\n\t\t\tconst nodeClientRect = node.getBoundingClientRect();\n\t\t\tconst nodeCenter = Math.ceil(nodeClientRect.left + (nodeClientRect.width / 2) + BX.scrollLeft(window));\n\t\t\tconst dragIndex = this.dragIndex;\n\t\t\tconst x = jsDD.x;\n\n\t\t\treturn (index > dragIndex && x < nodeCenter) || (index < dragIndex && x > nodeCenter);\n\t\t},\n\n\t\tisMovedToRight(node)\n\t\t{\n\t\t\treturn node.style.transform === `translate3d(${-this.offset}px, 0px, 0px)`;\n\t\t},\n\n\t\tisMovedToLeft(node)\n\t\t{\n\t\t\treturn node.style.transform === `translate3d(${this.offset}px, 0px, 0px)`;\n\t\t},\n\n\t\tisMoved(node)\n\t\t{\n\t\t\treturn (node.style.transform !== 'translate3d(0px, 0px, 0px)' && node.style.transform !== '');\n\t\t},\n\n\t\t/**\n\t\t * Moves grid column by offset\n\t\t * @param {array} column - Array cells of column\n\t\t * @param {int} offset - Pixels offset\n\t\t * @param {int} [transition = 300] - Transition duration in milliseconds\n\t\t */\n\t\tmoveColumn(column, offset, transition)\n\t\t{\n\t\t\ttransition = BX.type.isNumber(transition) ? transition : 300;\n\t\t\tBX.Grid.Utils.styleForEach(column, {\n\t\t\t\ttransition: `${transition}ms`,\n\t\t\t\ttransform: `translate3d(${offset}px, 0px, 0px)`,\n\t\t\t});\n\t\t},\n\n\t\t_onDrag()\n\t\t{\n\t\t\tthis.dragOffset = this.getDragOffset();\n\t\t\tthis.targetItem = this.targetItem || this.dragItem;\n\t\t\tthis.targetColumn = this.targetColumn || this.dragColumn;\n\n\t\t\tconst leftOffset = -this.offset;\n\t\t\tconst rightOffset = this.offset;\n\t\t\tconst defaultOffset = 0;\n\t\t\tconst dragTransitionDuration = 0;\n\n\t\t\tthis.moveColumn(this.dragColumn, this.dragOffset, dragTransitionDuration);\n\n\t\t\t[].forEach.call(this.colsList, function(current, index) {\n\t\t\t\tif (current && !current.classList.contains('main-grid-cell-static'))\n\t\t\t\t{\n\t\t\t\t\tif (this.isDragToRight(current, index) && !this.isMovedToRight(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.targetColumn = this.getColumn(current);\n\t\t\t\t\t\tthis.moveColumn(this.targetColumn, leftOffset);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.isDragToLeft(current, index) && !this.isMovedToLeft(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.targetColumn = this.getColumn(current);\n\t\t\t\t\t\tthis.moveColumn(this.targetColumn, rightOffset);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.isDragToBack(current, index) && this.isMoved(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.targetColumn = this.getColumn(current);\n\t\t\t\t\t\tthis.moveColumn(this.targetColumn, defaultOffset);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\n\t\t_onDragEnd()\n\t\t{\n\t\t\t[].forEach.call(this.dragColumn, function(current, index) {\n\t\t\t\tBX.Grid.Utils.collectionSort(current, this.targetColumn[index]);\n\t\t\t}, this);\n\n\t\t\tthis.rowsList.forEach((current) => {\n\t\t\t\tBX.Grid.Utils.styleForEach(current.cells, {\n\t\t\t\t\ttransition: '',\n\t\t\t\t\ttransform: '',\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.reinit();\n\n\t\t\tconst columns = this.colsList.map((current) => {\n\t\t\t\treturn BX.data(current, 'name');\n\t\t\t});\n\n\t\t\tthis.parent.getUserOptions().setColumns(columns);\n\t\t\tBX.onCustomEvent(this.parent.getContainer(), 'Grid::columnMoved', [this.parent]);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.parent.preventSortableClick = false;\n\t\t\t}, 10);\n\t\t},\n\t};\n})();\n","import 'ui.cnt';\nimport { Reflection } from 'main.core';\n\n/**\n * @memberOf BX.Grid\n */\nexport class Counters\n{\n\tstatic Type = {\n\t\tLEFT: 'left',\n\t\tLEFT_ALIGNED: 'left-aligned',\n\t\tRIGHT: 'right',\n\t};\n\n\tstatic Color = {\n\t\tDANGER: 'ui-counter-danger',\n\t\tSUCCESS: 'ui-counter-success',\n\t\tPRIMARY: 'ui-counter-primary',\n\t\tGRAY: 'ui-counter-gray',\n\t\tLIGHT: 'ui-counter-light',\n\t\tDARK: 'ui-counter-dark',\n\t};\n\n\tstatic Size = {\n\t\tLARGE: 'ui-counter-lg',\n\t\tMEDIUM: 'ui-counter-md',\n\t};\n}\n\nconst namespace = Reflection.namespace('BX.Grid');\nnamespace.Counters = Counters;\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\tconst originalUpdatePageData = window.parent.BX.ajax.UpdatePageData;\n\n\tfunction disableBxAjaxUpdatePageData()\n\t{\n\t\twindow.parent.BX.ajax.UpdatePageData = function() {};\n\t}\n\n\tfunction enableBxAjaxUpdatePageData()\n\t{\n\t\twindow.parent.BX.ajax.UpdatePageData = originalUpdatePageData;\n\t}\n\n\t/**\n\t * Works with requests and server response\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.Data = function(parent)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.reset();\n\t};\n\n\t/**\n\t * Reset to default values\n\t * @private\n\t */\n\tBX.Grid.Data.prototype.reset = function()\n\t{\n\t\tthis.response = null;\n\t\tthis.xhr = null;\n\t\tthis.headRows = null;\n\t\tthis.bodyRows = null;\n\t\tthis.footRows = null;\n\t\tthis.moreButton = null;\n\t\tthis.pagination = null;\n\t\tthis.counterDisplayed = null;\n\t\tthis.counterSelected = null;\n\t\tthis.counterTotal = null;\n\t\tthis.limit = null;\n\t\tthis.actionPanel = null;\n\t\tthis.rowsByParentId = {};\n\t\tthis.rowById = {};\n\t\tthis.isValidResponse = null;\n\t};\n\n\t/**\n\t * Gets filter\n\t * @return {BX.Main.Filter}\n\t */\n\tBX.Grid.Data.prototype.getParent = function()\n\t{\n\t\treturn this.parent;\n\t};\n\n\t/**\n\t * Validates server response\n\t * @return {boolean}\n\t */\n\tBX.Grid.Data.prototype.validateResponse = function()\n\t{\n\t\tif (!BX.type.isBoolean(this.isValidResponse))\n\t\t{\n\t\t\tthis.isValidResponse = Boolean(this.getResponse()) && Boolean(BX.Grid.Utils.getByClass(this.getResponse(), this.getParent().settings.get('classContainer'), true));\n\t\t}\n\n\t\treturn this.isValidResponse;\n\t};\n\n\t/**\n\t * Send request\n\t * @param {string} [url]\n\t * @param {string} [method]\n\t * @param {object} [data]\n\t * @param {string} [action]\n\t * @param {function} [then]\n\t * @param {function} [error]\n\t */\n\tBX.Grid.Data.prototype.request = function(url, method, data, action, then, error)\n\t{\n\t\tif (!BX.type.isString(url))\n\t\t{\n\t\t\turl = '';\n\t\t}\n\n\t\tif (!BX.type.isNotEmptyString(method))\n\t\t{\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tif (!BX.type.isPlainObject(data))\n\t\t{\n\t\t\tdata = {};\n\t\t}\n\n\t\tconst eventArgs =\t\t\t{\n\t\t\tgridId: this.parent.getId(),\n\t\t\turl,\n\t\t\tmethod,\n\t\t\tdata,\n\t\t};\n\n\t\tthis.parent.disableCheckAllCheckboxes();\n\t\tBX.onCustomEvent(\n\t\t\twindow,\n\t\t\t'Grid::beforeRequest',\n\t\t\t[this, eventArgs],\n\t\t);\n\n\t\tif (eventArgs.hasOwnProperty('cancelRequest') && eventArgs.cancelRequest === true)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\turl = eventArgs.url;\n\n\t\tif (!BX.type.isNotEmptyString(url))\n\t\t{\n\t\t\turl = this.parent.baseUrl;\n\t\t}\n\n\t\turl = BX.Grid.Utils.addUrlParams(url, { sessid: BX.bitrix_sessid(), internal: 'true', grid_id: this.parent.getId() });\n\n\t\tif ('apply_filter' in data && data.apply_filter === 'Y')\n\t\t{\n\t\t\turl = BX.Grid.Utils.addUrlParams(url, { apply_filter: 'Y' });\n\t\t}\n\t\telse\n\t\t{\n\t\t\turl = BX.util.remove_url_param(url, 'apply_filter');\n\t\t}\n\n\t\tif ('clear_nav' in data && data.clear_nav === 'Y')\n\t\t{\n\t\t\turl = BX.Grid.Utils.addUrlParams(url, { clear_nav: 'Y' });\n\t\t}\n\t\telse\n\t\t{\n\t\t\turl = BX.util.remove_url_param(url, 'clear_nav');\n\t\t}\n\n\t\turl = BX.Grid.Utils.addUrlParams(url, { grid_action: action || 'showpage' });\n\n\t\tmethod = eventArgs.method;\n\t\tdata = eventArgs.data;\n\n\t\tthis.reset();\n\n\t\tconst self = this;\n\n\t\tsetTimeout(() => {\n\t\t\tconst formData = BX.Http.Data.convertObjectToFormData(data);\n\n\t\t\tdisableBxAjaxUpdatePageData();\n\n\t\t\tvar xhr = BX.ajax({\n\t\t\t\turl: BX.Grid.Utils.ajaxUrl(url, self.getParent().getAjaxId()),\n\t\t\t\tdata: formData,\n\t\t\t\tmethod,\n\t\t\t\tdataType: 'html',\n\t\t\t\theaders: [\n\t\t\t\t\t{ name: 'X-Ajax-Grid-UID', value: self.getParent().getAjaxId() },\n\t\t\t\t\t{ name: 'X-Ajax-Grid-Req', value: JSON.stringify({ action: action || 'showpage' }) },\n\t\t\t\t],\n\t\t\t\tprocessData: true,\n\t\t\t\tscriptsRunFirst: false,\n\t\t\t\tstart: false,\n\t\t\t\tpreparePost: false,\n\t\t\t\tonsuccess(response) {\n\t\t\t\t\tself.response = BX.create('div', { html: response });\n\t\t\t\t\tself.response = self.response.querySelector(`#${self.parent.getContainerId()}`);\n\t\t\t\t\tself.xhr = xhr;\n\n\t\t\t\t\tif (self.parent.getParam('HANDLE_RESPONSE_ERRORS'))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet res;\n\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tres = JSON.parse(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tres = { messages: [] };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (res.messages.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.parent.arParams.MESSAGES = res.messages;\n\t\t\t\t\t\t\tself.parent.messages.show();\n\n\t\t\t\t\t\t\tself.parent.tableUnfade();\n\n\t\t\t\t\t\t\tif (BX.type.isFunction(error))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.delegate(error, self)(xhr);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (BX.type.isFunction(then))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.parent.enableCheckAllCheckboxes();\n\t\t\t\t\t\tBX.delegate(then, self)(response, xhr);\n\t\t\t\t\t}\n\n\t\t\t\t\tenableBxAjaxUpdatePageData();\n\t\t\t\t},\n\t\t\t\tonerror(err) {\n\t\t\t\t\tself.error = error;\n\t\t\t\t\tself.xhr = xhr;\n\n\t\t\t\t\tif (BX.type.isFunction(error))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.parent.enableCheckAllCheckboxes();\n\t\t\t\t\t\tBX.delegate(error, self)(xhr, err);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\txhr.send(formData);\n\t\t}, 0);\n\t};\n\n\t/**\n\t * Gets server response\n\t * @return {?Element}\n\t */\n\tBX.Grid.Data.prototype.getResponse = function()\n\t{\n\t\treturn this.response;\n\t};\n\n\t/**\n\t * Returns a grid container\n\t * @return {?Element}\n\t */\n\tBX.Grid.Data.prototype.getContainer = function()\n\t{\n\t\tconst className = this.getParent().settings.get('classContainer');\n\t\tif (BX.Dom.hasClass(this.getResponse(), className))\n\t\t{\n\t\t\treturn this.getResponse();\n\t\t}\n\n\t\treturn BX.Grid.Utils.getByClass(this.getResponse(), className, true);\n\t};\n\n\t/**\n\t * Gets head rows of grid from server response\n\t * @return {?HTMLTableRowElement[]}\n\t */\n\tBX.Grid.Data.prototype.getHeadRows = function()\n\t{\n\t\tif (!this.headRows)\n\t\t{\n\t\t\tthis.headRows = BX.Grid.Utils.getByClass(this.getResponse(), this.getParent().settings.get('classHeadRow'));\n\t\t}\n\n\t\treturn this.headRows;\n\t};\n\n\t/**\n\t * Gets body rows of grid form server request\n\t * @return {?HTMLTableRowElement[]}\n\t */\n\tBX.Grid.Data.prototype.getBodyRows = function()\n\t{\n\t\tif (!this.bodyRows)\n\t\t{\n\t\t\tthis.bodyRows = BX.Grid.Utils.getByClass(this.getResponse(), this.getParent().settings.get('classBodyRow'));\n\t\t}\n\n\t\treturn this.bodyRows;\n\t};\n\n\t/**\n\t * Gets rows by parent id\n\t * @param {string|number} id\n\t * @return {?HTMLTableRowElement[]}\n\t */\n\tBX.Grid.Data.prototype.getRowsByParentId = function(id)\n\t{\n\t\tif (!(id in this.rowsByParentId))\n\t\t{\n\t\t\tthis.rowsByParentId[id] = BX.Grid.Utils.getBySelector(\n\t\t\t\tthis.getResponse(),\n\t\t\t\t`.${this.getParent().settings.get('classBodyRow')}[data-parent-id=\"${id}\"]`,\n\t\t\t);\n\t\t}\n\n\t\treturn this.rowsByParentId[id];\n\t};\n\n\t/**\n\t * Gets row by row id\n\t * @param {string|number} id\n\t * @return {?HTMLTableRowElement}\n\t */\n\tBX.Grid.Data.prototype.getRowById = function(id)\n\t{\n\t\tif (!(id in this.rowById))\n\t\t{\n\t\t\tthis.rowById[id] = BX.Grid.Utils.getBySelector(\n\t\t\t\tthis.getResponse(),\n\t\t\t\t`.${this.getParent().settings.get('classBodyRow')}[data-id=\"${id}\"]`,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\n\t\treturn this.rowById[id];\n\t};\n\n\t/**\n\t * Gets tfoot rows of grid from request\n\t * @return {?HTMLTableRowElement[]}\n\t */\n\tBX.Grid.Data.prototype.getFootRows = function()\n\t{\n\t\tif (!this.footRows)\n\t\t{\n\t\t\tthis.footRows = BX.Grid.Utils.getByClass(this.getResponse(), this.getParent().settings.get('classFootRow'));\n\t\t}\n\n\t\treturn this.footRows;\n\t};\n\n\t/**\n\t * Gets more button from request\n\t * @return {?HTMLElement}\n\t */\n\tBX.Grid.Data.prototype.getMoreButton = function()\n\t{\n\t\tif (!this.moreButton)\n\t\t{\n\t\t\tthis.moreButton = BX.Grid.Utils.getByClass(\n\t\t\t\tthis.getResponse(),\n\t\t\t\tthis.getParent().settings.get('classMoreButton'),\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\n\t\treturn this.moreButton;\n\t};\n\n\t/**\n\t * Gets pagination of grid from request\n\t * @return {?HTMLElement}\n\t */\n\tBX.Grid.Data.prototype.getPagination = function()\n\t{\n\t\tif (!this.pagination)\n\t\t{\n\t\t\tthis.pagination = BX.Grid.Utils.getByClass(\n\t\t\t\tthis.getResponse(),\n\t\t\t\tthis.getParent().settings.get('classPagination'),\n\t\t\t\ttrue,\n\t\t\t);\n\n\t\t\tif (BX.type.isDomNode(this.pagination))\n\t\t\t{\n\t\t\t\tthis.pagination = BX.firstChild(this.pagination);\n\t\t\t}\n\t\t}\n\n\t\treturn this.pagination;\n\t};\n\n\t/**\n\t * Gets counter of displayed rows\n\t * @return {?HTMLElement}\n\t */\n\tBX.Grid.Data.prototype.getCounterDisplayed = function()\n\t{\n\t\tif (!this.counterDisplayed)\n\t\t{\n\t\t\tthis.counterDisplayed = BX.Grid.Utils.getByClass(\n\t\t\t\tthis.getResponse(),\n\t\t\t\tthis.getParent().settings.get('classCounterDisplayed'),\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\n\t\treturn this.counterDisplayed;\n\t};\n\n\t/**\n\t * Gets counter of selected rows\n\t * @return {?HTMLElement}\n\t */\n\tBX.Grid.Data.prototype.getCounterSelected = function()\n\t{\n\t\tif (!this.counterSelected)\n\t\t{\n\t\t\tthis.counterSelected = BX.Grid.Utils.getByClass(\n\t\t\t\tthis.getResponse(),\n\t\t\t\tthis.getParent().settings.get('classCounterSelected'),\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\n\t\treturn this.counterSelected;\n\t};\n\n\t/**\n\t * Gets counter of total rows count\n\t * @return {?HTMLElement}\n\t */\n\tBX.Grid.Data.prototype.getCounterTotal = function()\n\t{\n\t\tif (!BX.type.isDomNode(this.counterTotal))\n\t\t{\n\t\t\tconst selector = `.${this.getParent().settings.get('classCounterTotal')} .${this.getParent().settings.get('classPanelCellContent')}`;\n\t\t\tthis.counterTotal = BX.Grid.Utils.getBySelector(this.getResponse(), selector, true);\n\t\t}\n\n\t\treturn this.counterTotal;\n\t};\n\n\t/**\n\t * Gets dropdown of pagesize\n\t * @return {?HTMLElement}\n\t */\n\tBX.Grid.Data.prototype.getLimit = function()\n\t{\n\t\tif (!this.limit)\n\t\t{\n\t\t\tthis.limit = BX.Grid.Utils.getByClass(this.getResponse(), this.getParent().settings.get('classPageSize'), true);\n\t\t}\n\n\t\treturn this.limit;\n\t};\n\n\t/**\n\t * Gets dropdown of pagesize\n\t * @alias BX.Grid.Data.prototype.getLimit\n\t * @return {?HTMLElement}\n\t */\n\tBX.Grid.Data.prototype.getPageSize = function()\n\t{\n\t\treturn this.getLimit();\n\t};\n\n\t/**\n\t * Gets action panel of grid\n\t * @return {?HTMLElement}\n\t */\n\tBX.Grid.Data.prototype.getActionPanel = function()\n\t{\n\t\tif (!this.actionPanel)\n\t\t{\n\t\t\tthis.actionPanel = BX.Grid.Utils.getByClass(\n\t\t\t\tthis.getResponse(),\n\t\t\t\tthis.getParent().settings.get('classActionPanel'),\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\n\t\treturn this.actionPanel;\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main');\n\n\t/**\n\t * BX.Main.dropdown\n\t * @param dropdown\n\t */\n\tBX.Main.dropdown = function(dropdown)\n\t{\n\t\tthis.id = null;\n\t\tthis.dropdown = null;\n\t\tthis.items = null;\n\t\tthis.value = null;\n\t\tthis.menuId = null;\n\t\tthis.menu = null;\n\t\tthis.menuItems = null;\n\t\tthis.multiple = null;\n\t\tthis.emptyText = null;\n\t\tthis.dataItems = 'items';\n\t\tthis.dataValue = 'value';\n\t\tthis.dataPseudo = 'pseudo';\n\t\tthis.dropdownItemClass = 'main-dropdown-item';\n\t\tthis.activeClass = 'main-dropdown-active';\n\t\tthis.selectedClass = 'main-dropdown-item-selected';\n\t\tthis.notSelectedClass = 'main-dropdown-item-not-selected';\n\t\tthis.lockedClass = 'main-dropdown-item-locked';\n\t\tthis.menuItemClass = 'menu-popup-item';\n\t\tthis.init(dropdown);\n\t};\n\n\tBX.Main.dropdown.prototype = {\n\t\tinit(dropdown)\n\t\t{\n\t\t\tthis.id = dropdown.id;\n\t\t\tthis.dropdown = dropdown;\n\t\t\tthis.items = this.getItems();\n\t\t\tthis.value = this.getValue();\n\t\t\tthis.menuId = this.getMenuId();\n\t\t\tthis.multiple = this.getMultiple();\n\t\t\tthis.emptyText = this.getEmptyText();\n\t\t\tthis.menu = this.createMenu();\n\t\t\tthis.menu.popupWindow.show();\n\t\t\tthis.adjustPosition();\n\n\t\t\tBX.bind(this.dropdown, 'click', BX.delegate(this.showMenu, this));\n\t\t},\n\n\t\tgetMenuId()\n\t\t{\n\t\t\treturn `${this.id}_menu`;\n\t\t},\n\n\t\tgetItems()\n\t\t{\n\t\t\tlet result;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tconst str = this.dropdown.dataset[this.dataItems];\n\t\t\t\tresult = JSON.parse(str);\n\t\t\t\tresult = result.map((item) => {\n\t\t\t\t\titem.VALUE = String(item.VALUE);\n\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tresult = [];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\t// single\n\t\tgetValue()\n\t\t{\n\t\t\treturn this.dropdown.dataset[this.dataValue];\n\t\t},\n\n\t\tgetValueItem()\n\t\t{\n\t\t\tconst value = this.getValue();\n\n\t\t\treturn this.items.find((item) => item.VALUE === value);\n\t\t},\n\n\t\t// multiple\n\t\tgetValueAsArray()\n\t\t{\n\t\t\tlet value = this.getValue();\n\t\t\tif (value === undefined)\n\t\t\t{\n\t\t\t\tvalue = '';\n\t\t\t}\n\n\t\t\treturn value.toString().split(',').filter((i) => i !== '');\n\t\t},\n\n\t\tgetValueItems()\n\t\t{\n\t\t\tconst values = this.getValueAsArray();\n\n\t\t\treturn this.items.filter((item) => values.includes(item.VALUE));\n\t\t},\n\n\t\ttoggleValue(value)\n\t\t{\n\t\t\tif (this.multiple)\n\t\t\t{\n\t\t\t\tif (value || value === 0 || value === '0')\n\t\t\t\t{\n\t\t\t\t\tconst values = this.getValueAsArray();\n\t\t\t\t\tconst index = values.indexOf(value);\n\n\t\t\t\t\tif (index < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalues.push(value);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dropdown.dataset[this.dataValue] = values.join(',');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.dropdown.dataset[this.dataValue] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dropdown.dataset[this.dataValue] = value;\n\t\t\t}\n\t\t},\n\n\t\tgetValueText()\n\t\t{\n\t\t\tif (this.multiple)\n\t\t\t{\n\t\t\t\treturn this.getValueItems().map((item) => item.NAME).filter((i) => Boolean(i)).join(', ') || this.emptyText;\n\t\t\t}\n\n\t\t\tconst item = this.getValueItem();\n\n\t\t\treturn item ? item.NAME : this.emptyText;\n\t\t},\n\n\t\tgetMultiple()\n\t\t{\n\t\t\treturn this.dropdown.dataset.multiple === 'Y';\n\t\t},\n\n\t\tgetEmptyText()\n\t\t{\n\t\t\treturn this.dropdown.dataset.emptyText || null;\n\t\t},\n\n\t\tprepareMenuItems()\n\t\t{\n\t\t\tconst self = this;\n\t\t\tlet attrs; let\n\t\t\t\tsubItem;\n\t\t\tconst currentValue = this.multiple ? this.getValueAsArray() : this.getValue();\n\n\t\t\tfunction prepareItems(items)\n\t\t\t{\n\t\t\t\tconst isHtmlEntity = self.dropdown.dataset.htmlEntity === 'true';\n\n\t\t\t\treturn items.map((item) => {\n\t\t\t\t\tattrs = {};\n\t\t\t\t\tattrs[`data-${self.dataValue}`] = item.VALUE;\n\t\t\t\t\tattrs[`data-${self.dataPseudo}`] = 'PSEUDO' in item && item.PSEUDO ? 'true' : 'false';\n\n\t\t\t\t\tsubItem = BX.create('div', {\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: self.dropdownItemClass,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tattrs,\n\t\t\t\t\t\t\t\thtml: isHtmlEntity ? item.NAME : null,\n\t\t\t\t\t\t\t\ttext: isHtmlEntity ? null : item.NAME,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\n\t\t\t\t\tconst selected =\t\t\t\t\t\tself.multiple\n\t\t\t\t\t\t? currentValue.includes(item.VALUE)\n\t\t\t\t\t\t: currentValue === item.VALUE\n\t\t\t\t\t;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\thtml: subItem.innerHTML,\n\t\t\t\t\t\tclassName: selected ? self.selectedClass : self.notSelectedClass,\n\t\t\t\t\t\tdelimiter: item.DELIMITER,\n\t\t\t\t\t\titems: 'ITEMS' in item ? prepareItems(item.ITEMS) : null,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst items = prepareItems(this.items);\n\t\t\tBX.onCustomEvent(window, 'Dropdown::onPrepareItems', [this.id, this.menuId, items]);\n\n\t\t\treturn items;\n\t\t},\n\n\t\tcreateMenu()\n\t\t{\n\t\t\tconst self = this;\n\n\t\t\treturn BX.PopupMenu.create(\n\t\t\t\tthis.getMenuId(),\n\t\t\t\tthis.dropdown,\n\t\t\t\tthis.prepareMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: -8,\n\t\t\t\t\toffsetLeft: Number(this.dropdown.dataset.menuOffsetLeft || 40),\n\t\t\t\t\tmaxHeight: Number(this.dropdown.dataset.menuMaxHeight || 170),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupClose: BX.delegate(this._onCloseMenu, this),\n\t\t\t\t\t\tonPopupShow() {\n\t\t\t\t\t\t\tself._onShowMenu();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\n\t\tshowMenu()\n\t\t{\n\t\t\tthis.menu = BX.PopupMenu.getMenuById(this.menuId);\n\n\t\t\tif (!this.menu)\n\t\t\t{\n\t\t\t\tthis.menu = this.createMenu();\n\t\t\t\tthis.menu.popupWindow.show();\n\t\t\t}\n\n\t\t\tthis.adjustPosition();\n\t\t},\n\n\t\tadjustPosition()\n\t\t{\n\t\t\tif (this.dropdown.dataset.popupPosition === 'fixed')\n\t\t\t{\n\t\t\t\tconst container = this.menu.popupWindow.popupContainer;\n\n\t\t\t\tcontainer.style.setProperty('top', 'auto');\n\t\t\t\tcontainer.style.setProperty('bottom', '45px');\n\t\t\t\tcontainer.style.setProperty('left', '0px');\n\n\t\t\t\tthis.dropdown.appendChild(container);\n\t\t\t}\n\t\t},\n\n\t\tgetSubItem(node)\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(node, this.dropdownItemClass, true);\n\t\t},\n\n\t\trefresh(item)\n\t\t{\n\t\t\tconst subItem = this.getSubItem(item);\n\t\t\tlet value = BX.data(subItem, this.dataValue);\n\t\t\tif (BX.Type.isUndefined(value))\n\t\t\t{\n\t\t\t\tvalue = '';\n\t\t\t}\n\n\t\t\tthis.toggleValue(value);\n\t\t\tif (this.dropdown.dataset.htmlEntity === 'true')\n\t\t\t{\n\t\t\t\tBX.firstChild(this.dropdown).innerHTML = this.getValueText();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.firstChild(this.dropdown).innerText = this.getValueText();\n\t\t\t}\n\t\t},\n\n\t\tselectItem(node)\n\t\t{\n\t\t\tconst self = this;\n\n\t\t\t(this.menu.menuItems || []).forEach((current) => {\n\t\t\t\t// multiple\n\t\t\t\tif (self.multiple)\n\t\t\t\t{\n\t\t\t\t\tif (node === current.layout.item)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (BX.hasClass(node, self.selectedClass))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.addClass(current.layout.item, self.notSelectedClass);\n\t\t\t\t\t\t\tBX.removeClass(current.layout.item, self.selectedClass);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.removeClass(current.layout.item, self.notSelectedClass);\n\t\t\t\t\t\t\tBX.addClass(current.layout.item, self.selectedClass);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// single\n\t\t\t\tBX.removeClass(current.layout.item, self.selectedClass);\n\n\t\t\t\tif (node === current.layout.item)\n\t\t\t\t{\n\t\t\t\t\tBX.removeClass(current.layout.item, self.notSelectedClass);\n\t\t\t\t\tBX.addClass(current.layout.item, self.selectedClass);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.addClass(current.layout.item, self.notSelectedClass);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlockedItem(node) {\n\t\t\tBX.addClass(node, this.lockedClass);\n\t\t},\n\n\t\tgetDataItemIndexByValue(items, value)\n\t\t{\n\t\t\tlet result;\n\n\t\t\tif (BX.type.isArray(items))\n\t\t\t{\n\t\t\t\titems.map((current, index) => {\n\t\t\t\t\tif (current.VALUE === value)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = index;\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\tgetDataItemByValue(value)\n\t\t{\n\t\t\tconst result = this.items.filter((current) => {\n\t\t\t\treturn current.VALUE === value;\n\t\t\t});\n\n\t\t\treturn result.length > 0 ? result[0] : null;\n\t\t},\n\n\t\t_onShowMenu()\n\t\t{\n\t\t\tconst self = this;\n\n\t\t\tBX.addClass(this.dropdown, this.activeClass);\n\t\t\t(this.menu.menuItems || []).forEach((current) => {\n\t\t\t\tBX.bind(current.layout.item, 'click', BX.delegate(self._onItemClick, self));\n\t\t\t});\n\t\t},\n\n\t\t_onCloseMenu()\n\t\t{\n\t\t\tBX.removeClass(this.dropdown, this.activeClass);\n\t\t\tBX.PopupMenu.destroy(this.menuId);\n\t\t},\n\n\t\t_onItemClick(event)\n\t\t{\n\t\t\tconst item = this.getMenuItem(event.target);\n\t\t\tlet value; let\n\t\t\t\tdataItem;\n\t\t\tconst subItem = this.getSubItem(item);\n\t\t\tconst isPseudo = BX.data(subItem, 'pseudo');\n\n\t\t\tif (isPseudo === 'true')\n\t\t\t{\n\t\t\t\tvalue = BX.data(subItem, 'value');\n\t\t\t\tdataItem = this.getDataItemByValue(value);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.refresh(item);\n\t\t\t\tthis.selectItem(item);\n\n\t\t\t\tif (!this.multiple)\n\t\t\t\t{\n\t\t\t\t\tthis.menu.popupWindow.close();\n\t\t\t\t}\n\n\t\t\t\tvalue = this.getValue();\n\t\t\t\tdataItem = this.getDataItemByValue(value);\n\t\t\t}\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tBX.onCustomEvent(window, 'Dropdown::change', [this.dropdown.id, event, item, dataItem, value]);\n\t\t},\n\n\t\tgetMenuItem(node)\n\t\t{\n\t\t\tlet item = node;\n\n\t\t\tif (!BX.hasClass(item, this.menuItemClass))\n\t\t\t{\n\t\t\t\titem = BX.findParent(item, { class: this.menuItemClass });\n\t\t\t}\n\n\t\t\treturn item;\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main');\n\n\tBX.Main.dropdownManager = {\n\t\tdropdownClass: 'main-dropdown',\n\t\tdata: {},\n\t\tinit()\n\t\t{\n\t\t\tconst self = this;\n\t\t\tlet result;\n\t\t\tlet onLoadItems;\n\t\t\tlet items;\n\n\t\t\tBX.bind(document, 'click', BX.delegate(function(event) {\n\t\t\t\tif (BX.hasClass(event.target, this.dropdownClass))\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\tresult = this.getById(event.target.id);\n\n\t\t\t\t\tif (result && result.dropdown === event.target)\n\t\t\t\t\t{\n\t\t\t\t\t\tself.push(event.target.id, this.getById(event.target.id));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tself.push(event.target.id, new BX.Main.dropdown(event.target));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\tonLoadItems = BX.Grid.Utils.getByClass(document.body, this.dropdownClass);\n\n\t\t\tif (BX.type.isArray(onLoadItems))\n\t\t\t{\n\t\t\t\tonLoadItems.forEach((current) => {\n\t\t\t\t\tresult = self.getById(current.id);\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\titems = eval(BX.data(current, 'items'));\n\t\t\t\t\t}\n\t\t\t\t\tcatch\n\t\t\t\t\t{}\n\n\t\t\t\t\tBX.onCustomEvent(window, 'Dropdown::load', [current.id, {}, null, BX.type.isArray(items) && items.length > 0 ? items[0] : [], BX.data(current, 'value')]);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tpush(id, instance)\n\t\t{\n\t\t\tthis.data[id] = instance;\n\t\t},\n\n\t\tgetById(id)\n\t\t{\n\t\t\treturn (id in this.data) ? this.data[id] : null;\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * @param {HtmlElement} node\n\t * @param {BX.Main.grid} [parent]\n\t * @constructor\n\t */\n\tBX.Grid.Element = function(node, parent)\n\t{\n\t\tthis.node = null;\n\t\tthis.href = null;\n\t\tthis.parent = null;\n\t\tthis.init(node, parent);\n\t};\n\n\tBX.Grid.Element.prototype = {\n\t\tinit(node, parent)\n\t\t{\n\t\t\tthis.node = node;\n\t\t\tthis.parent = parent;\n\t\t\tthis.resetOnclickAttr();\n\t\t},\n\n\t\tgetParent()\n\t\t{\n\t\t\treturn this.parent;\n\t\t},\n\n\t\tload()\n\t\t{\n\t\t\tBX.addClass(this.getNode(), this.getParent().settings.get('classLoad'));\n\t\t},\n\n\t\tunload()\n\t\t{\n\t\t\tBX.removeClass(this.getNode(), this.getParent().settings.get('classLoad'));\n\t\t},\n\n\t\tisLoad()\n\t\t{\n\t\t\treturn BX.hasClass(this.getNode(), this.getParent().settings.get('classLoad'));\n\t\t},\n\n\t\tresetOnclickAttr()\n\t\t{\n\t\t\tif (BX.type.isDomNode(this.getNode()))\n\t\t\t{\n\t\t\t\tthis.getNode().onclick = null;\n\t\t\t}\n\t\t},\n\n\t\tgetObserver()\n\t\t{\n\t\t\treturn BX.Grid.observer;\n\t\t},\n\n\t\tgetNode()\n\t\t{\n\t\t\treturn this.node;\n\t\t},\n\n\t\tgetLink()\n\t\t{\n\t\t\tlet result;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tresult = this.getNode().href;\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tresult = null;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.Fader\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.Fader = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.table = null;\n\t\tthis.container = null;\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.Fader.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tthis.table = this.parent.getTable();\n\t\t\tthis.container = this.table.parentNode;\n\t\t\tthis.scrollStartEventName = this.parent.isTouch() ? 'touchstart' : 'mouseenter';\n\t\t\tthis.scrollEndEventName = this.parent.isTouch() ? 'touchend' : 'mouseleave';\n\n\t\t\tif (this.parent.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\tthis.fixedTable = this.parent.getPinHeader().getFixedTable();\n\t\t\t}\n\n\t\t\tthis.debounceScrollHandler = BX.debounce(this._onWindowScroll, 400, this);\n\n\t\t\tBX.bind(window, 'resize', BX.proxy(this.toggle, this));\n\t\t\tdocument.addEventListener('scroll', this.debounceScrollHandler, BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t\tthis.container.addEventListener('scroll', BX.proxy(this.toggle, this), BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t\tBX.addCustomEvent(window, 'Grid::updated', BX.proxy(this.toggle, this));\n\t\t\tBX.addCustomEvent(window, 'Grid::resize', BX.proxy(this.toggle, this));\n\t\t\tBX.addCustomEvent(window, 'Grid::headerUpdated', BX.proxy(this._onHeaderUpdated, this));\n\t\t\tBX.addCustomEvent(window, 'Grid::columnResize', BX.proxy(this.toggle, this));\n\t\t\tBX.bind(this.getEarLeft(), this.scrollStartEventName, BX.proxy(this._onMouseoverLeft, this));\n\t\t\tBX.bind(this.getEarRight(), this.scrollStartEventName, BX.proxy(this._onMouseoverRight, this));\n\t\t\tBX.bind(this.getEarLeft(), this.scrollEndEventName, BX.proxy(this.stopScroll, this));\n\t\t\tBX.bind(this.getEarRight(), this.scrollEndEventName, BX.proxy(this.stopScroll, this));\n\n\t\t\tthis.toggle();\n\t\t\tthis.adjustEarOffset(true);\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tBX.unbind(window, 'resize', BX.proxy(this.toggle, this));\n\t\t\tdocument.removeEventListener('scroll', this.debounceScrollHandler, BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t\tthis.container.removeEventListener('scroll', BX.proxy(this.toggle, this), BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t\tBX.removeCustomEvent(window, 'Grid::updated', BX.proxy(this.toggle, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::headerUpdated', BX.proxy(this._onHeaderUpdated, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::columnResize', BX.proxy(this.toggle, this));\n\t\t\tBX.unbind(this.getEarLeft(), this.scrollStartEventName, BX.proxy(this._onMouseoverLeft, this));\n\t\t\tBX.unbind(this.getEarRight(), this.scrollStartEventName, BX.proxy(this._onMouseoverRight, this));\n\t\t\tBX.unbind(this.getEarLeft(), this.scrollEndEventName, BX.proxy(this.stopScroll, this));\n\t\t\tBX.unbind(this.getEarRight(), this.scrollEndEventName, BX.proxy(this.stopScroll, this));\n\t\t\tthis.hideLeftEar();\n\t\t\tthis.hideRightEar();\n\t\t\tthis.stopScroll();\n\t\t},\n\n\t\t_onHeaderUpdated()\n\t\t{\n\t\t\tif (this.parent.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\tthis.fixedTable = this.parent.getPinHeader().getFixedTable();\n\t\t\t}\n\t\t},\n\n\t\t_onMouseoverLeft(event)\n\t\t{\n\t\t\tthis.parent.isTouch() && event.preventDefault();\n\t\t\tthis.startScrollByDirection('left');\n\t\t},\n\n\t\t_onMouseoverRight(event)\n\t\t{\n\t\t\tthis.parent.isTouch() && event.preventDefault();\n\t\t\tthis.startScrollByDirection('right');\n\t\t},\n\n\t\tstopScroll()\n\t\t{\n\t\t\tclearTimeout(this.scrollTimer);\n\t\t\tclearInterval(this.scrollInterval);\n\t\t},\n\n\t\tstartScrollByDirection(direction)\n\t\t{\n\t\t\tconst container = this.container;\n\t\t\tlet offset = container.scrollLeft;\n\t\t\tconst self = this;\n\t\t\tconst stepLength = 8;\n\t\t\tconst stepTime = ((1000 / 60) / 2);\n\n\t\t\tthis.scrollTimer = setTimeout(() => {\n\t\t\t\tself.scrollInterval = setInterval(() => {\n\t\t\t\t\tcontainer.scrollLeft = direction == 'right' ? (offset += stepLength) : (offset -= stepLength);\n\t\t\t\t}, stepTime);\n\t\t\t}, 100);\n\t\t},\n\n\t\tgetEarLeft()\n\t\t{\n\t\t\tif (!this.earLeft)\n\t\t\t{\n\t\t\t\tthis.earLeft = BX.Grid.Utils.getByClass(this.parent.getContainer(), this.parent.settings.get('classEarLeft'), true);\n\t\t\t}\n\n\t\t\treturn this.earLeft;\n\t\t},\n\n\t\tgetEarRight()\n\t\t{\n\t\t\tif (!this.earRight)\n\t\t\t{\n\t\t\t\tthis.earRight = BX.Grid.Utils.getByClass(this.parent.getContainer(), this.parent.settings.get('classEarRight'), true);\n\t\t\t}\n\n\t\t\treturn this.earRight;\n\t\t},\n\n\t\tgetShadowLeft()\n\t\t{\n\t\t\treturn this.parent.getContainer().querySelector('.main-grid-fade-shadow-left');\n\t\t},\n\n\t\tgetShadowRight()\n\t\t{\n\t\t\treturn this.parent.getContainer().querySelector('.main-grid-fade-shadow-right');\n\t\t},\n\n\t\tadjustEarOffset(prepare)\n\t\t{\n\t\t\tif (prepare)\n\t\t\t{\n\t\t\t\tthis.windowHeight = BX.height(window);\n\t\t\t\tthis.tbodyPos = BX.pos(this.table.tBodies[0]);\n\t\t\t\tthis.headerPos = BX.pos(this.table.tHead);\n\t\t\t}\n\n\t\t\tlet scrollY = window.scrollY;\n\n\t\t\tif (this.parent.isIE())\n\t\t\t{\n\t\t\t\tscrollY = document.documentElement.scrollTop;\n\t\t\t}\n\n\t\t\tlet bottomPos = (scrollY + this.windowHeight) - this.tbodyPos.top;\n\t\t\tlet posTop = scrollY - this.tbodyPos.top;\n\n\t\t\tif (bottomPos > (this.tbodyPos.bottom - this.tbodyPos.top))\n\t\t\t{\n\t\t\t\tbottomPos = this.tbodyPos.bottom - this.tbodyPos.top;\n\t\t\t}\n\n\t\t\tif (posTop < this.headerPos.height)\n\t\t\t{\n\t\t\t\tposTop = this.headerPos.height;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbottomPos -= posTop;\n\t\t\t\tbottomPos += this.headerPos.height;\n\t\t\t}\n\n\t\t\tBX.Grid.Utils.requestAnimationFrame(BX.proxy(function() {\n\t\t\t\tif (posTop !== this.lastPosTop)\n\t\t\t\t{\n\t\t\t\t\tconst translate = `translate3d(0px, ${posTop}px, 0)`;\n\t\t\t\t\tthis.getEarLeft().style.transform = translate;\n\t\t\t\t\tthis.getEarRight().style.transform = translate;\n\t\t\t\t}\n\n\t\t\t\tif (bottomPos !== this.lastBottomPos)\n\t\t\t\t{\n\t\t\t\t\tthis.getEarLeft().style.height = `${bottomPos}px`;\n\t\t\t\t\tthis.getEarRight().style.height = `${bottomPos}px`;\n\t\t\t\t}\n\n\t\t\t\tthis.lastPosTop = posTop;\n\t\t\t\tthis.lastBottomPos = bottomPos;\n\t\t\t}, this));\n\t\t},\n\n\t\t_onWindowScroll()\n\t\t{\n\t\t\tthis.adjustEarOffset();\n\t\t},\n\n\t\thasScroll()\n\t\t{\n\t\t\treturn this.table.offsetWidth > this.container.clientWidth;\n\t\t},\n\n\t\thasScrollLeft()\n\t\t{\n\t\t\treturn this.container.scrollLeft > 0;\n\t\t},\n\n\t\thasScrollRight()\n\t\t{\n\t\t\treturn this.table.offsetWidth > Math.abs(this.container.scrollLeft + this.container.clientWidth);\n\t\t},\n\n\t\tshowLeftEar()\n\t\t{\n\t\t\tBX.addClass(this.container.parentNode, this.parent.settings.get('classFadeContainerLeft'));\n\t\t\tBX.addClass(this.getEarLeft(), this.parent.settings.get('classShow'));\n\t\t},\n\n\t\thideLeftEar()\n\t\t{\n\t\t\tBX.removeClass(this.container.parentNode, this.parent.settings.get('classFadeContainerLeft'));\n\t\t\tBX.removeClass(this.getEarLeft(), this.parent.settings.get('classShow'));\n\t\t},\n\n\t\tshowRightEar()\n\t\t{\n\t\t\tBX.addClass(this.container.parentNode, this.parent.settings.get('classFadeContainerRight'));\n\t\t\tBX.addClass(this.getEarRight(), this.parent.settings.get('classShow'));\n\t\t},\n\n\t\thideRightEar()\n\t\t{\n\t\t\tBX.removeClass(this.container.parentNode, this.parent.settings.get('classFadeContainerRight'));\n\t\t\tBX.removeClass(this.getEarRight(), this.parent.settings.get('classShow'));\n\t\t},\n\n\t\tadjustFixedTablePosition()\n\t\t{\n\t\t\tconst left = this.container.scrollLeft;\n\n\t\t\tBX.Grid.Utils.requestAnimationFrame(BX.delegate(function() {\n\t\t\t\tthis.fixedTable.style.marginLeft = `${-left}px`;\n\t\t\t}, this));\n\t\t},\n\n\t\ttoggle()\n\t\t{\n\t\t\tthis.adjustEarOffset(true);\n\t\t\tthis.fixedTable && this.adjustFixedTablePosition();\n\n\t\t\tif (this.hasScroll())\n\t\t\t{\n\t\t\t\tthis.hasScrollLeft() ? this.showLeftEar() : this.hideLeftEar();\n\t\t\t\tthis.hasScrollRight() ? this.showRightEar() : this.hideRightEar();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hideLeftEar();\n\t\t\t\tthis.hideRightEar();\n\t\t\t}\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main');\n\n\t/**\n\t * @event Grid::ready\n\t * @event Grid::columnMoved\n\t * @event Grid::rowMoved\n\t * @event Grid::pageSizeChanged\n\t * @event Grid::optionsUpdated\n\t * @event Grid::dataSorted\n\t * @event Grid::thereSelectedRows\n\t * @event Grid::allRowsSelected\n\t * @event Grid::allRowsUnselected\n\t * @event Grid::noSelectedRows\n\t * @event Grid::updated\n\t * @event Grid::headerPinned\n\t * @event Grid::headerUnpinned\n\t * @event Grid::beforeRequest\n\t * @param {string} containerId\n\t * @param {object} arParams\n\t * @param {boolean} arParams.ALLOW_COLUMNS_SORT\n\t * @param {boolean} arParams.ALLOW_ROWS_SORT\n\t * @param {boolean} arParams.ALLOW_COLUMNS_RESIZE\n\t * @param {boolean} arParams.SHOW_ROW_CHECKBOXES\n\t * @param {boolean} arParams.ALLOW_HORIZONTAL_SCROLL\n\t * @param {boolean} arParams.ALLOW_PIN_HEADER\n\t * @param {boolean} arParams.SHOW_ACTION_PANEL\n\t * @param {boolean} arParams.PRESERVE_HISTORY\n\t * @param {boolean} arParams.ALLOW_CONTEXT_MENU\n\t * @param {object} arParams.DEFAULT_COLUMNS\n\t * @param {boolean} arParams.ENABLE_COLLAPSIBLE_ROWS\n\t * @param {object} arParams.EDITABLE_DATA\n\t * @param {string} arParams.SETTINGS_TITLE\n\t * @param {string} arParams.APPLY_SETTINGS\n\t * @param {string} arParams.CANCEL_SETTINGS\n\t * @param {string} arParams.CONFIRM_APPLY\n\t * @param {string} arParams.CONFIRM_CANCEL\n\t * @param {string} arParams.CONFIRM_MESSAGE\n\t * @param {string} arParams.CONFIRM_FOR_ALL_MESSAGE\n\t * @param {string} arParams.CONFIRM_RESET_MESSAGE\n\t * @param {object} arParams.COLUMNS_ALL_WITH_SECTIONS\n\t * @param {boolean} arParams.ENABLE_FIELDS_SEARCH\n\t * @param {object} arParams.CHECKBOX_LIST_OPTIONS\n\t * @param {array} arParams.HEADERS_SECTIONS\n\t * @param {string} arParams.RESET_DEFAULT\n\t * @param {object} userOptions\n\t * @param {object} userOptionsActions\n\t * @param {object} userOptionsHandlerUrl\n\t * @param {object} panelActions\n\t * @param {object} panelTypes\n\t * @param {object} editorTypes\n\t * @param {object} messageTypes\n\t * @constructor\n\t */\n\tBX.Main.grid = function(\n\t\tcontainerId,\n\t\tarParams,\n\t\tuserOptions,\n\t\tuserOptionsActions,\n\t\tuserOptionsHandlerUrl,\n\t\tpanelActions,\n\t\tpanelTypes,\n\t\teditorTypes,\n\t\tmessageTypes,\n\t)\n\t{\n\t\tBX.Event.EventEmitter.makeObservable(this, 'BX.Main.Grid');\n\t\tthis.settings = null;\n\t\tthis.containerId = '';\n\t\tthis.container = null;\n\t\tthis.wrapper = null;\n\t\tthis.fadeContainer = null;\n\t\tthis.scrollContainer = null;\n\t\tthis.pagination = null;\n\t\tthis.moreButton = null;\n\t\tthis.table = null;\n\t\tthis.rows = null;\n\t\tthis.history = false;\n\t\tthis.userOptions = null;\n\t\tthis.checkAll = null;\n\t\tthis.sortable = null;\n\t\tthis.updater = null;\n\t\tthis.data = null;\n\t\tthis.fader = null;\n\t\tthis.editor = null;\n\t\tthis.isEditMode = null;\n\t\tthis.pinHeader = null;\n\t\tthis.pinPanel = null;\n\t\tthis.arParams = null;\n\t\tthis.resize = null;\n\t\tthis.editableRows = [];\n\n\t\tthis.init(\n\t\t\tcontainerId,\n\t\t\tarParams,\n\t\t\tuserOptions,\n\t\t\tuserOptionsActions,\n\t\t\tuserOptionsHandlerUrl,\n\t\t\tpanelActions,\n\t\t\tpanelTypes,\n\t\t\teditorTypes,\n\t\t\tmessageTypes,\n\t\t);\n\t};\n\n\tBX.Main.grid.prototype = {\n\t\tinit(containerId, arParams, userOptions, userOptionsActions, userOptionsHandlerUrl, panelActions, panelTypes, editorTypes, messageTypes)\n\t\t{\n\t\t\tthis.baseUrl = window.location.pathname + window.location.search;\n\t\t\tthis.container = BX(containerId);\n\n\t\t\tif (!BX.type.isNotEmptyString(containerId))\n\t\t\t{\n\t\t\t\tthrow 'BX.Main.grid.init: parameter containerId is empty';\n\t\t\t}\n\n\t\t\tif (BX.type.isPlainObject(arParams))\n\t\t\t{\n\t\t\t\tthis.arParams = arParams;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthrow new TypeError('BX.Main.grid.init: arParams isn\\'t object');\n\t\t\t}\n\n\t\t\tthis.settings = new BX.Grid.Settings();\n\t\t\tthis.containerId = containerId;\n\t\t\tthis.userOptions = new BX.Grid.UserOptions(this, userOptions, userOptionsActions, userOptionsHandlerUrl);\n\t\t\tthis.gridSettings = new BX.Grid.SettingsWindow.Manager(this);\n\t\t\tthis.messages = new BX.Grid.Message(this, messageTypes);\n\t\t\tthis.cache = new BX.Cache.MemoryCache();\n\n\t\t\tif (this.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\tthis.pinHeader = new BX.Grid.PinHeader(this);\n\t\t\t\tBX.addCustomEvent(window, 'Grid::headerUpdated', BX.proxy(this.bindOnCheckAll, this));\n\t\t\t}\n\n\t\t\tthis.bindOnCheckAll();\n\n\t\t\tif (this.getParam('ALLOW_HORIZONTAL_SCROLL'))\n\t\t\t{\n\t\t\t\tthis.fader = new BX.Grid.Fader(this);\n\t\t\t}\n\n\t\t\tthis.pageSize = new BX.Grid.Pagesize(this);\n\t\t\tthis.editor = new BX.Grid.InlineEditor(this, editorTypes);\n\n\t\t\tif (this.getParam('SHOW_ACTION_PANEL'))\n\t\t\t{\n\t\t\t\tthis.actionPanel = new BX.Grid.ActionPanel(this, panelActions, panelTypes);\n\t\t\t\tthis.pinPanel = new BX.Grid.PinPanel(this);\n\t\t\t}\n\n\t\t\tthis.isEditMode = false;\n\n\t\t\tif (!BX.type.isDomNode(this.getContainer()))\n\t\t\t{\n\t\t\t\tthrow `BX.Main.grid.init: Failed to find container with id ${this.getContainerId()}`;\n\t\t\t}\n\n\t\t\tif (!BX.type.isDomNode(this.getTable()))\n\t\t\t{\n\t\t\t\tthrow 'BX.Main.grid.init: Failed to find table';\n\t\t\t}\n\n\t\t\tthis.bindOnRowEvents();\n\n\t\t\tif (this.getParam('ALLOW_COLUMNS_RESIZE'))\n\t\t\t{\n\t\t\t\tthis.resize = new BX.Grid.Resize(this);\n\t\t\t}\n\n\t\t\tthis.bindOnMoreButtonEvents();\n\t\t\tthis.bindOnClickPaginationLinks();\n\t\t\tthis.bindOnClickHeader();\n\n\t\t\tif (this.getParam('ALLOW_ROWS_SORT'))\n\t\t\t{\n\t\t\t\tthis.initRowsDragAndDrop();\n\t\t\t}\n\n\t\t\tif (this.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t{\n\t\t\t\tthis.initColsDragAndDrop();\n\t\t\t}\n\n\t\t\tthis.getRows().initSelected();\n\t\t\tthis.adjustEmptyTable(this.getRows().getSourceBodyChild());\n\t\t\tBX.onCustomEvent(this.getContainer(), 'Grid::ready', [this]);\n\t\t\tBX.addCustomEvent(window, 'Grid::unselectRow', BX.proxy(this._onUnselectRows, this));\n\t\t\tBX.addCustomEvent(window, 'Grid::unselectRows', BX.proxy(this._onUnselectRows, this));\n\t\t\tBX.addCustomEvent(window, 'Grid::allRowsUnselected', BX.proxy(this._onUnselectRows, this));\n\t\t\tBX.addCustomEvent(window, 'Grid::updated', BX.proxy(this._onGridUpdated, this));\n\t\t\twindow.frames[this.getFrameId()].onresize = BX.throttle(this._onFrameResize, 20, this);\n\n\t\t\tif (this.getParam('ALLOW_STICKED_COLUMNS'))\n\t\t\t{\n\t\t\t\tthis.initStickedColumns();\n\t\t\t}\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tBX.removeCustomEvent(window, 'Grid::unselectRow', BX.proxy(this._onUnselectRows, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::unselectRows', BX.proxy(this._onUnselectRows, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::allRowsUnselected', BX.proxy(this._onUnselectRows, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::headerPinned', BX.proxy(this.bindOnCheckAll, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::updated', BX.proxy(this._onGridUpdated, this));\n\t\t\tthis.getPinHeader() && this.getPinHeader().destroy();\n\t\t\tthis.getFader() && this.getFader().destroy();\n\t\t\tthis.getResize() && this.getResize().destroy();\n\t\t\tthis.getColsSortable() && this.getColsSortable().destroy();\n\t\t\tthis.getRowsSortable() && this.getRowsSortable().destroy();\n\t\t\tthis.getSettingsWindow() && this.getSettingsWindow().destroy();\n\t\t\tthis.getActionsPanel() && this.getActionsPanel().destroy();\n\t\t\tthis.getPinPanel() && this.getPinPanel().destroy();\n\t\t\tthis.getPageSize() && this.getPageSize().destroy();\n\t\t},\n\n\t\t_onFrameResize()\n\t\t{\n\t\t\tBX.onCustomEvent(window, 'Grid::resize', [this]);\n\t\t},\n\n\t\t_onGridUpdated()\n\t\t{\n\t\t\tthis.initStickedColumns();\n\t\t\tthis.adjustFadePosition(this.getFadeOffset());\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t * @return {string}\n\t\t */\n\t\tgetFrameId()\n\t\t{\n\t\t\treturn `main-grid-tmp-frame-${this.getContainerId()}`;\n\t\t},\n\n\t\tenableActionsPanel()\n\t\t{\n\t\t\tif (this.getParam('SHOW_ACTION_PANEL'))\n\t\t\t{\n\t\t\t\tconst panel = this.getActionsPanel().getPanel();\n\n\t\t\t\tif (BX.type.isDomNode(panel))\n\t\t\t\t{\n\t\t\t\t\tBX.removeClass(panel, this.settings.get('classDisable'));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdisableActionsPanel()\n\t\t{\n\t\t\tif (this.getParam('SHOW_ACTION_PANEL'))\n\t\t\t{\n\t\t\t\tconst panel = this.getActionsPanel().getPanel();\n\n\t\t\t\tif (BX.type.isDomNode(panel))\n\t\t\t\t{\n\t\t\t\t\tBX.addClass(panel, this.settings.get('classDisable'));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetSettingsWindow()\n\t\t{\n\t\t\treturn this.gridSettings;\n\t\t},\n\n\t\t_onUnselectRows()\n\t\t{\n\t\t\tconst panel = this.getActionsPanel();\n\t\t\tlet checkbox;\n\n\t\t\tif (panel instanceof BX.Grid.ActionPanel)\n\t\t\t{\n\t\t\t\tcheckbox = panel.getForAllCheckbox();\n\n\t\t\t\tif (BX.type.isDomNode(checkbox))\n\t\t\t\t{\n\t\t\t\t\tcheckbox.checked = null;\n\t\t\t\t\tthis.disableForAllCounter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.adjustCheckAllCheckboxes();\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tisIE()\n\t\t{\n\t\t\tif (!BX.type.isBoolean(this.ie))\n\t\t\t{\n\t\t\t\tthis.ie = BX.hasClass(document.documentElement, 'bx-ie');\n\t\t\t}\n\n\t\t\treturn this.ie;\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tisTouch()\n\t\t{\n\t\t\tif (!BX.type.isBoolean(this.touch))\n\t\t\t{\n\t\t\t\tthis.touch = BX.hasClass(document.documentElement, 'bx-touch');\n\t\t\t}\n\n\t\t\treturn this.touch;\n\t\t},\n\n\t\t/**\n\t\t * @param {string} paramName\n\t\t * @param {*} [defaultValue]\n\t\t * @return {*}\n\t\t */\n\t\tgetParam(paramName, defaultValue)\n\t\t{\n\t\t\tif (defaultValue === undefined)\n\t\t\t{\n\t\t\t\tdefaultValue = null;\n\t\t\t}\n\n\t\t\treturn (this.arParams.hasOwnProperty(paramName) ? this.arParams[paramName] : defaultValue);\n\t\t},\n\n\t\t/**\n\t\t * @return {HTMLElement[]}\n\t\t */\n\t\tgetCounterTotal()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classCounterTotal'), true);\n\t\t},\n\n\t\tgetActionKey()\n\t\t{\n\t\t\treturn (`action_button_${this.getId()}`);\n\t\t},\n\n\t\t/**\n\t\t * @return {?BX.Grid.PinHeader}\n\t\t */\n\t\tgetPinHeader()\n\t\t{\n\t\t\tif (this.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\tthis.pinHeader = this.pinHeader || new BX.Grid.PinHeader(this);\n\t\t\t}\n\n\t\t\treturn this.pinHeader;\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Resize}\n\t\t */\n\t\tgetResize()\n\t\t{\n\t\t\tif (!(this.resize instanceof BX.Grid.Resize) && this.getParam('ALLOW_COLUMNS_RESIZE'))\n\t\t\t{\n\t\t\t\tthis.resize = new BX.Grid.Resize(this);\n\t\t\t}\n\n\t\t\treturn this.resize;\n\t\t},\n\n\t\tconfirmForAll(container)\n\t\t{\n\t\t\tlet checkbox;\n\t\t\tconst self = this;\n\n\t\t\tif (BX.type.isDomNode(container))\n\t\t\t{\n\t\t\t\tcheckbox = BX.Grid.Utils.getByTag(container, 'input', true);\n\t\t\t}\n\n\t\t\tif (checkbox.checked)\n\t\t\t{\n\t\t\t\tthis.getActionsPanel().confirmDialog(\n\t\t\t\t\t{ CONFIRM: true, CONFIRM_MESSAGE: this.arParams.CONFIRM_FOR_ALL_MESSAGE },\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (BX.type.isDomNode(checkbox))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcheckbox.checked = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself.selectAllCheckAllCheckboxes();\n\t\t\t\t\t\tself.getRows().selectAll();\n\t\t\t\t\t\tself.enableForAllCounter();\n\t\t\t\t\t\tself.updateCounterDisplayed();\n\t\t\t\t\t\tself.updateCounterSelected();\n\t\t\t\t\t\tself.enableActionsPanel();\n\t\t\t\t\t\tself.adjustCheckAllCheckboxes();\n\t\t\t\t\t\tself.lastRowAction = null;\n\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::allRowsSelected', []);\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (BX.type.isDomNode(checkbox))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcheckbox.checked = null;\n\t\t\t\t\t\t\tself.disableForAllCounter();\n\t\t\t\t\t\t\tself.updateCounterDisplayed();\n\t\t\t\t\t\t\tself.updateCounterSelected();\n\t\t\t\t\t\t\tself.adjustCheckAllCheckboxes();\n\t\t\t\t\t\t\tself.lastRowAction = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.unselectAllCheckAllCheckboxes();\n\t\t\t\tthis.adjustCheckAllCheckboxes();\n\t\t\t\tthis.getRows().unselectAll();\n\t\t\t\tthis.disableForAllCounter();\n\t\t\t\tthis.updateCounterDisplayed();\n\t\t\t\tthis.updateCounterSelected();\n\t\t\t\tthis.disableActionsPanel();\n\t\t\t\tBX.onCustomEvent(window, 'Grid::allRowsUnselected', []);\n\t\t\t}\n\t\t},\n\n\t\tdisableCheckAllCheckboxes()\n\t\t{\n\t\t\tthis.getCheckAllCheckboxes().forEach((checkbox) => {\n\t\t\t\tcheckbox.getNode().disabled = true;\n\t\t\t});\n\t\t},\n\n\t\tenableCheckAllCheckboxes()\n\t\t{\n\t\t\tthis.getCheckAllCheckboxes().forEach((checkbox) => {\n\t\t\t\tcheckbox.getNode().disabled = false;\n\t\t\t});\n\t\t},\n\n\t\tindeterminateCheckAllCheckboxes()\n\t\t{\n\t\t\tthis.getCheckAllCheckboxes().forEach((checkbox) => {\n\t\t\t\tcheckbox.getNode().indeterminate = true;\n\t\t\t});\n\t\t},\n\n\t\tdeterminateCheckAllCheckboxes()\n\t\t{\n\t\t\tthis.getCheckAllCheckboxes().forEach((checkbox) => {\n\t\t\t\tcheckbox.getNode().indeterminate = false;\n\t\t\t});\n\t\t},\n\n\t\teditSelected()\n\t\t{\n\t\t\tthis.disableCheckAllCheckboxes();\n\t\t\tthis.getRows().editSelected();\n\n\t\t\tif (this.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\tthis.getPinHeader()._onGridUpdate();\n\t\t\t}\n\n\t\t\tBX.onCustomEvent(window, 'Grid::resize', [this]);\n\t\t},\n\n\t\teditSelectedSave()\n\t\t{\n\t\t\tconst data = { FIELDS: this.getRows().getEditSelectedValues(true) };\n\n\t\t\tif (this.getParam('ALLOW_VALIDATE'))\n\t\t\t{\n\t\t\t\tthis.tableFade();\n\t\t\t\tdata[this.getActionKey()] = 'validate';\n\t\t\t\tthis.getData().request('', 'POST', data, 'validate', (res) => {\n\t\t\t\t\tres = JSON.parse(res);\n\n\t\t\t\t\tif (res.messages.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.arParams.MESSAGES = res.messages;\n\t\t\t\t\t\tthis.messages.show();\n\n\t\t\t\t\t\tconst editButton = this.getActionsPanel().getButtons()\n\t\t\t\t\t\t\t.find((button) => {\n\t\t\t\t\t\t\t\treturn button.id === 'grid_edit_button_control';\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.tableUnfade();\n\t\t\t\t\t\tBX.fireEvent(editButton, 'click');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdata[this.getActionKey()] = 'edit';\n\t\t\t\t\t\tthis.reloadTable('POST', data);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.getParam('HANDLE_RESPONSE_ERRORS'))\n\t\t\t{\n\t\t\t\tdata[this.getActionKey()] = 'edit';\n\n\t\t\t\tconst self = this;\n\t\t\t\tthis.tableFade();\n\n\t\t\t\tthis.getData().request(\n\t\t\t\t\t'',\n\t\t\t\t\t'POST',\n\t\t\t\t\tdata,\n\t\t\t\t\t'',\n\t\t\t\t\tfunction(res) {\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tres = JSON.parse(res);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tres = { messages: [] };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (res.messages.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.arParams.MESSAGES = res.messages;\n\t\t\t\t\t\t\tself.messages.show();\n\n\t\t\t\t\t\t\tconst editButton = self.getActionsPanel().getButtons()\n\t\t\t\t\t\t\t\t.find((button) => {\n\t\t\t\t\t\t\t\t\treturn button.id === 'grid_edit_button_control';\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tself.tableUnfade();\n\t\t\t\t\t\t\tBX.fireEvent(editButton, 'click');\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself.getRows().reset();\n\t\t\t\t\t\tconst bodyRows = this.getBodyRows();\n\n\t\t\t\t\t\tself.getUpdater().updateContainer(this.getContainer());\n\t\t\t\t\t\tself.getUpdater().updateHeadRows(this.getHeadRows());\n\t\t\t\t\t\tself.getUpdater().updateBodyRows(bodyRows);\n\t\t\t\t\t\tself.getUpdater().updateFootRows(this.getFootRows());\n\t\t\t\t\t\tself.getUpdater().updatePagination(this.getPagination());\n\t\t\t\t\t\tself.getUpdater().updateMoreButton(this.getMoreButton());\n\t\t\t\t\t\tself.getUpdater().updateCounterTotal(this.getCounterTotal());\n\n\t\t\t\t\t\tself.adjustEmptyTable(bodyRows);\n\n\t\t\t\t\t\tself.bindOnRowEvents();\n\n\t\t\t\t\t\tself.bindOnMoreButtonEvents();\n\t\t\t\t\t\tself.bindOnClickPaginationLinks();\n\t\t\t\t\t\tself.bindOnClickHeader();\n\t\t\t\t\t\tself.bindOnCheckAll();\n\t\t\t\t\t\tself.updateCounterDisplayed();\n\t\t\t\t\t\tself.updateCounterSelected();\n\t\t\t\t\t\tself.disableActionsPanel();\n\t\t\t\t\t\tself.disableForAllCounter();\n\n\t\t\t\t\t\tif (self.getParam('SHOW_ACTION_PANEL'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.getUpdater().updateGroupActions(this.getActionPanel());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (self.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.colsSortable.reinit();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (self.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.rowsSortable.reinit();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself.tableUnfade();\n\n\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::updated', [self]);\n\t\t\t\t\t},\n\t\t\t\t\t(res) => {\n\t\t\t\t\t\tconst editButton = self.getActionsPanel().getButtons()\n\t\t\t\t\t\t\t.find((button) => {\n\t\t\t\t\t\t\t\treturn button.id === 'grid_edit_button_control';\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tself.tableUnfade();\n\t\t\t\t\t\tBX.fireEvent(editButton, 'click');\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdata[this.getActionKey()] = 'edit';\n\t\t\tthis.reloadTable('POST', data);\n\t\t},\n\n\t\tgetForAllKey()\n\t\t{\n\t\t\treturn `action_all_rows_${this.getId()}`;\n\t\t},\n\n\t\tupdateRow(id, data, url, callback)\n\t\t{\n\t\t\tconst row = this.getRows().getById(id);\n\n\t\t\tif (row instanceof BX.Grid.Row)\n\t\t\t{\n\t\t\t\trow.update(data, url, callback);\n\t\t\t}\n\t\t},\n\n\t\tremoveRow(id, data, url, callback)\n\t\t{\n\t\t\tconst row = this.getRows().getById(id);\n\n\t\t\tif (row instanceof BX.Grid.Row)\n\t\t\t{\n\t\t\t\trow.remove(data, url, callback);\n\t\t\t}\n\t\t},\n\n\t\taddRow(data, url, callback)\n\t\t{\n\t\t\tconst action = this.getUserOptions().getAction('GRID_ADD_ROW');\n\t\t\tconst rowData = { action, data };\n\t\t\tconst self = this;\n\n\t\t\tthis.tableFade();\n\t\t\tthis.getData().request(url, 'POST', rowData, null, function() {\n\t\t\t\tconst bodyRows = this.getBodyRows();\n\t\t\t\tself.getUpdater().updateBodyRows(bodyRows);\n\t\t\t\tself.tableUnfade();\n\t\t\t\tself.getRows().reset();\n\t\t\t\tself.getUpdater().updateFootRows(this.getFootRows());\n\t\t\t\tself.getUpdater().updatePagination(this.getPagination());\n\t\t\t\tself.getUpdater().updateMoreButton(this.getMoreButton());\n\t\t\t\tself.getUpdater().updateCounterTotal(this.getCounterTotal());\n\t\t\t\tself.bindOnRowEvents();\n\t\t\t\tself.adjustEmptyTable(bodyRows);\n\n\t\t\t\tself.bindOnMoreButtonEvents();\n\t\t\t\tself.bindOnClickPaginationLinks();\n\t\t\t\tself.updateCounterDisplayed();\n\t\t\t\tself.updateCounterSelected();\n\n\t\t\t\tif (self.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.colsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tif (self.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.rowsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tBX.onCustomEvent(window, 'Grid::rowAdded', [{ data, grid: self, response: this }]);\n\t\t\t\tBX.onCustomEvent(window, 'Grid::updated', [self]);\n\n\t\t\t\tif (BX.type.isFunction(callback))\n\t\t\t\t{\n\t\t\t\t\tcallback({ data, grid: self, response: this });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\teditSelectedCancel()\n\t\t{\n\t\t\tthis.getRows().editSelectedCancel();\n\t\t\tthis.enableCheckAllCheckboxes();\n\n\t\t\tif (this.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\tthis.getPinHeader()._onGridUpdate();\n\t\t\t}\n\t\t},\n\n\t\tremoveSelected()\n\t\t{\n\t\t\tconst data = { ID: this.getRows().getSelectedIds() };\n\t\t\tconst values = this.getActionsPanel().getValues();\n\t\t\tdata[this.getActionKey()] = 'delete';\n\t\t\tdata[this.getForAllKey()] = this.getForAllKey() in values ? values[this.getForAllKey()] : 'N';\n\t\t\tthis.reloadTable('POST', data);\n\t\t},\n\n\t\tsendSelected()\n\t\t{\n\t\t\tconst values = this.getActionsPanel().getValues();\n\t\t\tconst selectedRows = this.getRows().getSelectedIds();\n\t\t\tconst data = {\n\t\t\t\trows: selectedRows,\n\t\t\t\tcontrols: values,\n\t\t\t};\n\n\t\t\tthis.reloadTable('POST', data);\n\t\t},\n\n\t\tsendRowAction(action, data)\n\t\t{\n\t\t\tif (!BX.type.isPlainObject(data))\n\t\t\t{\n\t\t\t\tdata = {};\n\t\t\t}\n\n\t\t\tdata[this.getActionKey()] = action;\n\n\t\t\tthis.reloadTable('POST', data);\n\t\t},\n\n\t\t/**\n\t\t * @return {?BX.Grid.ActionPanel}\n\t\t */\n\t\tgetActionsPanel()\n\t\t{\n\t\t\treturn this.actionPanel;\n\t\t},\n\n\t\tgetPinPanel()\n\t\t{\n\t\t\treturn this.pinPanel;\n\t\t},\n\n\t\tgetApplyButton()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classPanelButton'), true);\n\t\t},\n\n\t\tgetEditor()\n\t\t{\n\t\t\treturn this.editor;\n\t\t},\n\n\t\treload(url)\n\t\t{\n\t\t\tthis.reloadTable('GET', {}, null, url);\n\t\t},\n\n\t\tgetPanels()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classPanels'), true);\n\t\t},\n\n\t\tgetEmptyBlock()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classEmptyBlock'), true);\n\t\t},\n\n\t\tadjustEmptyTable(rows)\n\t\t{\n\t\t\tfunction adjustEmptyBlockPosition(event)\n\t\t\t{\n\t\t\t\tconst target = event.currentTarget;\n\t\t\t\tBX.style(emptyBlock, 'transform', `translate3d(${BX.scrollLeft(target)}px, 0px, 0`);\n\t\t\t}\n\n\t\t\tconst filteredRows = rows.filter((row) => {\n\t\t\t\treturn (\n\t\t\t\t\tBX.Dom.attr(row, 'data-id') !== 'template_0'\n\t\t\t\t\t&& !BX.Dom.hasClass(row, 'main-grid-hide')\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\t!BX.hasClass(document.documentElement, 'bx-ie')\n\t\t\t\t&& filteredRows.length === 1\n\t\t\t\t&& BX.hasClass(filteredRows[0], this.settings.get('classEmptyRows'))\n\t\t\t)\n\t\t\t{\n\t\t\t\tconst gridRect = BX.pos(this.getContainer());\n\t\t\t\tconst scrollBottom = BX.scrollTop(window) + BX.height(window);\n\t\t\t\tconst diff = gridRect.bottom - scrollBottom;\n\t\t\t\tconst panelsHeight = BX.height(this.getPanels());\n\t\t\t\tvar emptyBlock = this.getEmptyBlock();\n\t\t\t\tconst containerWidth = BX.width(this.getContainer());\n\n\t\t\t\tif (containerWidth)\n\t\t\t\t{\n\t\t\t\t\tBX.width(emptyBlock, containerWidth);\n\t\t\t\t}\n\n\t\t\t\tBX.style(emptyBlock, 'transform', `translate3d(${BX.scrollLeft(this.getScrollContainer())}px, 0px, 0`);\n\n\t\t\t\tBX.unbind(this.getScrollContainer(), 'scroll', adjustEmptyBlockPosition);\n\t\t\t\tBX.bind(this.getScrollContainer(), 'scroll', adjustEmptyBlockPosition);\n\n\t\t\t\tlet parent = this.getContainer();\n\t\t\t\tlet paddingOffset = 0;\n\n\t\t\t\twhile (parent = parent.parentElement)\n\t\t\t\t{\n\t\t\t\t\tconst parentPaddingTop = parseFloat(BX.style(parent, 'padding-top'));\n\t\t\t\t\tconst parentPaddingBottom = parseFloat(BX.style(parent, 'padding-bottom'));\n\n\t\t\t\t\tif (!isNaN(parentPaddingTop))\n\t\t\t\t\t{\n\t\t\t\t\t\tpaddingOffset += parentPaddingTop;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!isNaN(parentPaddingBottom))\n\t\t\t\t\t{\n\t\t\t\t\t\tpaddingOffset += parentPaddingBottom;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (diff > 0)\n\t\t\t\t{\n\t\t\t\t\tBX.style(this.getTable(), 'min-height', `${gridRect.height - diff - panelsHeight - paddingOffset}px`);\n\t\t\t\t}\n\t\t\t\telse if (Math.abs(diff) === scrollBottom)\n\t\t\t\t{\n\t\t\t\t\t// If the grid is hidden\n\t\t\t\t\tBX.style(this.getTable(), 'min-height', '');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.style(this.getTable(), 'min-height', `${gridRect.height + Math.abs(diff) - panelsHeight - paddingOffset}px`);\n\t\t\t\t}\n\n\t\t\t\tBX.Dom.addClass(this.getContainer(), 'main-grid-empty-stub');\n\n\t\t\t\tif (this.getCurrentPage() <= 1)\n\t\t\t\t{\n\t\t\t\t\tthis.hidePanels();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.style(this.getTable(), 'min-height', '');\n\n\t\t\t\t// Chrome hack for 0116845 bug. @todo refactoring\n\t\t\t\tBX.style(this.getTable(), 'height', '1px');\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tBX.style(this.getTable(), 'height', '1px');\n\t\t\t\t});\n\n\t\t\t\tthis.showPanels();\n\t\t\t\tBX.Dom.removeClass(this.getContainer(), 'main-grid-empty-stub');\n\t\t\t}\n\t\t},\n\n\t\treloadTable(method, data, callback, url)\n\t\t{\n\t\t\tlet bodyRows;\n\n\t\t\tif (!BX.type.isNotEmptyString(method))\n\t\t\t{\n\t\t\t\tmethod = 'GET';\n\t\t\t}\n\n\t\t\tif (!BX.type.isPlainObject(data))\n\t\t\t{\n\t\t\t\tdata = {};\n\t\t\t}\n\n\t\t\tconst self = this;\n\t\t\tthis.tableFade();\n\n\t\t\tif (!BX.type.isString(url))\n\t\t\t{\n\t\t\t\turl = '';\n\t\t\t}\n\n\t\t\tthis.getData().request(url, method, data, '', function() {\n\t\t\t\tBX.onCustomEvent(window, 'BX.Main.Grid:onBeforeReload', [self]);\n\t\t\t\tself.getRows().reset();\n\t\t\t\tbodyRows = this.getBodyRows();\n\n\t\t\t\tself.getUpdater().updateContainer(this.getContainer());\n\t\t\t\tself.getUpdater().updateHeadRows(this.getHeadRows());\n\t\t\t\tself.getUpdater().updateBodyRows(bodyRows);\n\t\t\t\tself.getUpdater().updateFootRows(this.getFootRows());\n\t\t\t\tself.getUpdater().updatePagination(this.getPagination());\n\t\t\t\tself.getUpdater().updateMoreButton(this.getMoreButton());\n\t\t\t\tself.getUpdater().updateCounterTotal(this.getCounterTotal());\n\n\t\t\t\tself.adjustEmptyTable(bodyRows);\n\n\t\t\t\tself.bindOnRowEvents();\n\n\t\t\t\tself.bindOnMoreButtonEvents();\n\t\t\t\tself.bindOnClickPaginationLinks();\n\t\t\t\tself.bindOnClickHeader();\n\t\t\t\tself.bindOnCheckAll();\n\t\t\t\tself.updateCounterDisplayed();\n\t\t\t\tself.updateCounterSelected();\n\t\t\t\tself.disableActionsPanel();\n\t\t\t\tself.disableForAllCounter();\n\n\t\t\t\tif (self.getParam('SHOW_ACTION_PANEL'))\n\t\t\t\t{\n\t\t\t\t\tself.getUpdater().updateGroupActions(this.getActionPanel());\n\t\t\t\t}\n\n\t\t\t\tif (self.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.colsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tif (self.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.rowsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tself.tableUnfade();\n\n\t\t\t\tBX.onCustomEvent(window, 'Grid::updated', [self]);\n\n\t\t\t\tif (BX.type.isFunction(callback))\n\t\t\t\t{\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\n\t\t\t\tif (self.getParam('ALLOW_PIN_HEADER'))\n\t\t\t\t{\n\t\t\t\t\tself.getPinHeader()._onGridUpdate();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tgetGroupEditButton()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classGroupEditButton'), true);\n\t\t},\n\n\t\tgetGroupDeleteButton()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classGroupDeleteButton'), true);\n\t\t},\n\n\t\tenableGroupActions()\n\t\t{\n\t\t\tconst editButton = this.getGroupEditButton();\n\t\t\tconst deleteButton = this.getGroupDeleteButton();\n\n\t\t\tif (BX.type.isDomNode(editButton))\n\t\t\t{\n\t\t\t\tBX.removeClass(editButton, this.settings.get('classGroupActionsDisabled'));\n\t\t\t}\n\n\t\t\tif (BX.type.isDomNode(deleteButton))\n\t\t\t{\n\t\t\t\tBX.removeClass(deleteButton, this.settings.get('classGroupActionsDisabled'));\n\t\t\t}\n\t\t},\n\n\t\tdisableGroupActions()\n\t\t{\n\t\t\tconst editButton = this.getGroupEditButton();\n\t\t\tconst deleteButton = this.getGroupDeleteButton();\n\n\t\t\tif (BX.type.isDomNode(editButton))\n\t\t\t{\n\t\t\t\tBX.addClass(editButton, this.settings.get('classGroupActionsDisabled'));\n\t\t\t}\n\n\t\t\tif (BX.type.isDomNode(deleteButton))\n\t\t\t{\n\t\t\t\tBX.addClass(deleteButton, this.settings.get('classGroupActionsDisabled'));\n\t\t\t}\n\t\t},\n\n\t\tcloseActionsMenu()\n\t\t{\n\t\t\tconst rows = this.getRows().getRows();\n\t\t\tfor (let i = 0, l = rows.length; i < l; i++)\n\t\t\t{\n\t\t\t\trows[i].closeActionsMenu();\n\t\t\t}\n\t\t},\n\n\t\tgetPageSize()\n\t\t{\n\t\t\treturn this.pageSize;\n\t\t},\n\n\t\t/**\n\t\t * @return {?BX.Grid.Fader}\n\t\t */\n\t\tgetFader()\n\t\t{\n\t\t\treturn this.fader;\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Data}\n\t\t */\n\t\tgetData()\n\t\t{\n\t\t\tthis.data = this.data || new BX.Grid.Data(this);\n\n\t\t\treturn this.data;\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Updater}\n\t\t */\n\t\tgetUpdater()\n\t\t{\n\t\t\tthis.updater = this.updater || new BX.Grid.Updater(this);\n\n\t\t\treturn this.updater;\n\t\t},\n\n\t\tisSortableHeader(item)\n\t\t{\n\t\t\treturn (\n\t\t\t\tBX.hasClass(item, this.settings.get('classHeaderSortable'))\n\t\t\t);\n\t\t},\n\n\t\tisNoSortableHeader(item)\n\t\t{\n\t\t\treturn (\n\t\t\t\tBX.hasClass(item, this.settings.get('classHeaderNoSortable'))\n\t\t\t);\n\t\t},\n\n\t\tbindOnClickHeader()\n\t\t{\n\t\t\tconst self = this;\n\t\t\tlet cell;\n\n\t\t\tBX.bind(this.getContainer(), 'click', (event) => {\n\t\t\t\tcell = BX.findParent(event.target, { tag: 'th' }, true, false);\n\n\t\t\t\tif (cell && self.isSortableHeader(cell) && !self.preventSortableClick)\n\t\t\t\t{\n\t\t\t\t\tconst onBeforeSortEvent = new BX.Event.BaseEvent({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tgrid: self,\n\t\t\t\t\t\t\tcolumnName: BX.data(cell, 'name'),\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tBX.Event.EventEmitter.emit('BX.Main.grid:onBeforeSort', onBeforeSortEvent);\n\t\t\t\t\tif (onBeforeSortEvent.isDefaultPrevented())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tself.preventSortableClick = false;\n\t\t\t\t\tself._clickOnSortableHeader(cell, event);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tenableEditMode()\n\t\t{\n\t\t\tthis.isEditMode = true;\n\t\t},\n\n\t\tdisableEditMode()\n\t\t{\n\t\t\tthis.isEditMode = false;\n\t\t},\n\n\t\tisEditMode()\n\t\t{\n\t\t\treturn this.isEditMode;\n\t\t},\n\n\t\tgetColumnHeaderCellByName(name)\n\t\t{\n\t\t\treturn BX.Grid.Utils.getBySelector(\n\t\t\t\tthis.getContainer(),\n\t\t\t\t`#${this.getId()} th[data-name=\"${name}\"]`,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t},\n\n\t\tgetColumnByName(name)\n\t\t{\n\t\t\tconst columns = this.getParam('DEFAULT_COLUMNS');\n\n\t\t\treturn Boolean(name) && name in columns ? columns[name] : null;\n\t\t},\n\n\t\tadjustIndex(index)\n\t\t{\n\t\t\tconst fixedCells = this.getAllRows()[0]\n\t\t\t\t.querySelectorAll('.main-grid-fixed-column').length;\n\n\t\t\treturn (index + fixedCells);\n\t\t},\n\n\t\tgetColumnByIndex(index)\n\t\t{\n\t\t\tindex = this.adjustIndex(index);\n\n\t\t\treturn this.getAllRows()\n\t\t\t\t.reduce((accumulator, row) => {\n\t\t\t\t\tif (!row.classList.contains('main-grid-row-custom') && !row.classList.contains('main-grid-row-empty'))\n\t\t\t\t\t{\n\t\t\t\t\t\taccumulator.push(row.children[index]);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}, []);\n\t\t},\n\n\t\tgetAllRows()\n\t\t{\n\t\t\tconst rows = [].slice.call(this.getTable().rows);\n\t\t\tconst fixedTable = this.getContainer().parentElement.querySelector('.main-grid-fixed-bar table');\n\n\t\t\tif (fixedTable)\n\t\t\t{\n\t\t\t\trows.push(fixedTable.rows[0]);\n\t\t\t}\n\n\t\t\treturn rows;\n\t\t},\n\n\t\thasEmptyRow(): boolean\n\t\t{\n\t\t\treturn this.getAllRows().some((row) => BX.hasClass(row, 'main-grid-row-empty'));\n\t\t},\n\n\t\tinitStickedColumns()\n\t\t{\n\t\t\tif (this.hasEmptyRow())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t[].slice.call(this.getAllRows()[0].children).forEach(function(cell, index) {\n\t\t\t\tif (cell.classList.contains('main-grid-sticked-column'))\n\t\t\t\t{\n\t\t\t\t\tthis.stickyColumnByIndex(index);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tif (this.getParam('ALLOW_COLUMNS_RESIZE'))\n\t\t\t{\n\t\t\t\tthis.getResize().destroy();\n\t\t\t\tthis.getResize().init(this);\n\t\t\t}\n\t\t},\n\n\t\tsetStickedColumns(columns)\n\t\t{\n\t\t\tif (BX.type.isArray(columns))\n\t\t\t{\n\t\t\t\tconst options = this.getUserOptions();\n\t\t\t\tconst actions = [\n\t\t\t\t\t{\n\t\t\t\t\t\taction: options.getAction('GRID_SET_STICKED_COLUMNS'),\n\t\t\t\t\t\tstickedColumns: columns,\n\t\t\t\t\t},\n\t\t\t\t];\n\n\t\t\t\toptions.batch(actions, () => {\n\t\t\t\t\tthis.reloadTable();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tgetStickedColumns()\n\t\t{\n\t\t\tconst columns = [].slice.call(this.getHead().querySelectorAll('.main-grid-cell-head'));\n\n\t\t\treturn columns.reduce((acc, column) => {\n\t\t\t\tif (\n\t\t\t\t\tBX.hasClass(column, 'main-grid-fixed-column')\n\t\t\t\t\t&& !BX.hasClass(column, 'main-grid-cell-checkbox')\n\t\t\t\t\t&& !BX.hasClass(column, 'main-grid-cell-action')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tacc.push(column.dataset.name);\n\t\t\t\t}\n\n\t\t\t\treturn acc;\n\t\t\t}, []);\n\t\t},\n\n\t\tstickyColumnByIndex(index)\n\t\t{\n\t\t\tconst column = this.getColumnByIndex(index);\n\t\t\tconst cellWidth = column[0].clientWidth;\n\n\t\t\tconst heights = column.map((cell) => {\n\t\t\t\treturn BX.height(cell);\n\t\t\t});\n\n\t\t\tcolumn.forEach(function(cell, cellIndex) {\n\t\t\t\tcell.style.minWidth = `${cellWidth}px`;\n\t\t\t\tcell.style.width = `${cellWidth}px`;\n\t\t\t\tcell.style.minHeight = `${heights[cellIndex]}px`;\n\n\t\t\t\tconst clone = BX.clone(cell);\n\n\t\t\t\tconst lastStickyCell = this.getLastStickyCellFromRowByIndex(cellIndex);\n\n\t\t\t\tif (lastStickyCell)\n\t\t\t\t{\n\t\t\t\t\tlet lastStickyCellLeft = parseInt(BX.style(lastStickyCell, 'left'));\n\t\t\t\t\tlet lastStickyCellWidth = parseInt(BX.style(lastStickyCell, 'width'));\n\n\t\t\t\t\tlastStickyCellLeft = isNaN(lastStickyCellLeft) ? 0 : lastStickyCellLeft;\n\t\t\t\t\tlastStickyCellWidth = isNaN(lastStickyCellWidth) ? 0 : lastStickyCellWidth;\n\n\t\t\t\t\tcell.style.left = `${lastStickyCellLeft + lastStickyCellWidth}px`;\n\t\t\t\t}\n\n\t\t\t\tcell.classList.add('main-grid-fixed-column');\n\t\t\t\tcell.classList.add('main-grid-cell-static');\n\t\t\t\tclone.classList.add('main-grid-cell-static');\n\n\t\t\t\tif (this.getColsSortable())\n\t\t\t\t{\n\t\t\t\t\tthis.getColsSortable().unregister(cell);\n\t\t\t\t\tthis.getColsSortable().unregister(clone);\n\t\t\t\t}\n\n\t\t\t\tBX.insertAfter(clone, cell);\n\t\t\t}, this);\n\n\t\t\tthis.adjustFadePosition(this.getFadeOffset());\n\t\t},\n\n\t\tadjustFixedColumnsPosition()\n\t\t{\n\t\t\tconst fixedCells = this.getAllRows()[0]\n\t\t\t\t.querySelectorAll('.main-grid-fixed-column').length;\n\n\t\t\tconst columnsPosition = [].slice.call(this.getAllRows()[0].children)\n\t\t\t\t.reduce((accumulator, cell, index, columns) => {\n\t\t\t\t\tlet cellLeft;\n\t\t\t\t\tlet cellWidth;\n\n\t\t\t\t\tif (columns[index - 1] && columns[index - 1].classList.contains('main-grid-fixed-column'))\n\t\t\t\t\t{\n\t\t\t\t\t\tcellLeft = parseInt(BX.style(columns[index - 1], 'left'));\n\t\t\t\t\t\tcellWidth = parseInt(BX.style(columns[index - 1], 'width'));\n\n\t\t\t\t\t\tcellLeft = isNaN(cellLeft) ? 0 : cellLeft;\n\t\t\t\t\t\tcellWidth = isNaN(cellWidth) ? 0 : cellWidth;\n\n\t\t\t\t\t\taccumulator.push({ index: index + 1, left: (cellLeft + cellWidth) });\n\t\t\t\t\t}\n\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}, []);\n\n\t\t\tcolumnsPosition\n\t\t\t\t.forEach(function(item) {\n\t\t\t\t\tconst column = this.getColumnByIndex(item.index - fixedCells);\n\n\t\t\t\t\tcolumn.forEach((cell) => {\n\t\t\t\t\t\tif (item.index !== columnsPosition[columnsPosition.length - 1].index)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcell.style.left = `${item.left}px`;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, this);\n\n\t\t\tthis.getAllRows()\n\t\t\t\t.forEach((row) => {\n\t\t\t\t\tconst height = BX.height(row);\n\t\t\t\t\tconst cells = [].slice.call(row.children);\n\n\t\t\t\t\tcells.forEach((cell) => {\n\t\t\t\t\t\tcell.style.minHeight = `${height}px`;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\n\t\tgetLastStickyCellFromRowByIndex(index)\n\t\t{\n\t\t\treturn [].slice.call(this.getAllRows()[index].children)\n\t\t\t\t.reduceRight((accumulator, cell) => {\n\t\t\t\t\tif (!accumulator && cell.classList.contains('main-grid-fixed-column'))\n\t\t\t\t\t{\n\t\t\t\t\t\taccumulator = cell;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}, null);\n\t\t},\n\n\t\tgetFadeOffset()\n\t\t{\n\t\t\tlet fadeOffset = 0;\n\t\t\tconst lastStickyCell = this.getLastStickyCellFromRowByIndex(0);\n\n\t\t\tif (lastStickyCell)\n\t\t\t{\n\t\t\t\tlet lastStickyCellLeft = parseInt(BX.style(lastStickyCell, 'left'));\n\t\t\t\tlet lastStickyCellWidth = lastStickyCell.offsetWidth;\n\n\t\t\t\tlastStickyCellLeft = isNaN(lastStickyCellLeft) ? 0 : lastStickyCellLeft;\n\t\t\t\tlastStickyCellWidth = isNaN(lastStickyCellWidth) ? 0 : lastStickyCellWidth;\n\n\t\t\t\tfadeOffset = lastStickyCellLeft + lastStickyCellWidth;\n\t\t\t}\n\n\t\t\treturn fadeOffset;\n\t\t},\n\n\t\tadjustFadePosition(offset)\n\t\t{\n\t\t\tconst earLeft = this.getFader().getEarLeft();\n\t\t\tconst shadowLeft = this.getFader().getShadowLeft();\n\n\t\t\tearLeft.style.left = `${offset}px`;\n\t\t\tshadowLeft.style.left = `${offset}px`;\n\t\t},\n\n\t\t/**\n\t\t * @param {string|object} column\n\t\t */\n\t\tsortByColumn(column)\n\t\t{\n\t\t\tlet headerCell = null;\n\t\t\tlet header = null;\n\n\t\t\tif (BX.type.isPlainObject(column))\n\t\t\t{\n\t\t\t\theader = column;\n\t\t\t\theader.sort_url = this.prepareSortUrl(column);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\theaderCell = this.getColumnHeaderCellByName(column);\n\t\t\t\theader = this.getColumnByName(column);\n\t\t\t}\n\n\t\t\tif (header && (Boolean(headerCell) && !BX.hasClass(headerCell, this.settings.get('classLoad')) || !headerCell))\n\t\t\t{\n\t\t\t\tBoolean(headerCell) && BX.addClass(headerCell, this.settings.get('classLoad'));\n\t\t\t\tthis.tableFade();\n\n\t\t\t\tconst self = this;\n\n\t\t\t\tthis.getUserOptions().setSort(header.sort_by, header.sort_order, () => {\n\t\t\t\t\tself.getData().request(header.sort_url, null, null, 'sort', function() {\n\t\t\t\t\t\tself.rows = null;\n\t\t\t\t\t\tself.getUpdater().updateHeadRows(this.getHeadRows());\n\t\t\t\t\t\tself.getUpdater().updateBodyRows(this.getBodyRows());\n\t\t\t\t\t\tself.getUpdater().updatePagination(this.getPagination());\n\t\t\t\t\t\tself.getUpdater().updateMoreButton(this.getMoreButton());\n\n\t\t\t\t\t\tself.bindOnRowEvents();\n\n\t\t\t\t\t\tself.bindOnMoreButtonEvents();\n\t\t\t\t\t\tself.bindOnClickPaginationLinks();\n\t\t\t\t\t\tself.bindOnCheckAll();\n\t\t\t\t\t\tself.updateCounterDisplayed();\n\t\t\t\t\t\tself.updateCounterSelected();\n\t\t\t\t\t\tself.disableActionsPanel();\n\t\t\t\t\t\tself.disableForAllCounter();\n\n\t\t\t\t\t\tif (self.getParam('SHOW_ACTION_PANEL'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.getActionsPanel().resetForAllCheckbox();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (self.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.rowsSortable.reinit();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (self.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.colsSortable.reinit();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tBX.onCustomEvent(window, 'BX.Main.grid:sort', [header, self]);\n\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::updated', [self]);\n\t\t\t\t\t\tself.tableUnfade();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tprepareSortUrl(header)\n\t\t{\n\t\t\tlet url = window.location.toString();\n\n\t\t\tif ('sort_by' in header)\n\t\t\t{\n\t\t\t\turl = BX.util.add_url_param(url, { by: header.sort_by });\n\t\t\t}\n\n\t\t\tif ('sort_order' in header)\n\t\t\t{\n\t\t\t\turl = BX.util.add_url_param(url, { order: header.sort_order });\n\t\t\t}\n\n\t\t\treturn url;\n\t\t},\n\n\t\t_clickOnSortableHeader(header, event)\n\t\t{\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.sortByColumn(BX.data(header, 'name'));\n\t\t},\n\n\t\tgetObserver()\n\t\t{\n\t\t\treturn BX.Grid.observer;\n\t\t},\n\n\t\tinitRowsDragAndDrop()\n\t\t{\n\t\t\tthis.rowsSortable = new BX.Grid.RowsSortable(this);\n\t\t},\n\n\t\tinitColsDragAndDrop()\n\t\t{\n\t\t\tthis.colsSortable = new BX.Grid.ColsSortable(this);\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.RowsSortable}\n\t\t */\n\t\tgetRowsSortable()\n\t\t{\n\t\t\treturn this.rowsSortable;\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.ColsSortable}\n\t\t */\n\t\tgetColsSortable()\n\t\t{\n\t\t\treturn this.colsSortable;\n\t\t},\n\n\t\tgetUserOptionsHandlerUrl()\n\t\t{\n\t\t\treturn this.userOptionsHandlerUrl || '';\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.UserOptions}\n\t\t */\n\t\tgetUserOptions()\n\t\t{\n\t\t\treturn this.userOptions;\n\t\t},\n\n\t\tgetCheckAllCheckboxes()\n\t\t{\n\t\t\tconst checkAllNodes = BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classCheckAllCheckboxes'));\n\n\t\t\treturn checkAllNodes.map((current) => {\n\t\t\t\treturn new BX.Grid.Element(current);\n\t\t\t});\n\t\t},\n\n\t\tselectAllCheckAllCheckboxes()\n\t\t{\n\t\t\tthis.getCheckAllCheckboxes().forEach((current) => {\n\t\t\t\tcurrent.getNode().checked = true;\n\t\t\t});\n\t\t},\n\n\t\tunselectAllCheckAllCheckboxes()\n\t\t{\n\t\t\tthis.getCheckAllCheckboxes().forEach((current) => {\n\t\t\t\tcurrent.getNode().checked = false;\n\t\t\t});\n\t\t},\n\n\t\tadjustCheckAllCheckboxes()\n\t\t{\n\t\t\tconst total = this.getRows().getBodyChild().filter((row) => {\n\t\t\t\treturn row.isShown() && Boolean(row.getCheckbox());\n\t\t\t}).length;\n\n\t\t\tconst selected = this.getRows().getSelected().filter((row) => {\n\t\t\t\treturn row.isShown();\n\t\t\t}).length;\n\n\t\t\tif (total > 0 && selected > 0 && total === selected)\n\t\t\t{\n\t\t\t\tthis.selectAllCheckAllCheckboxes();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.unselectAllCheckAllCheckboxes();\n\t\t\t}\n\n\t\t\tif (selected > 0 && selected < total)\n\t\t\t{\n\t\t\t\tthis.indeterminateCheckAllCheckboxes();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.determinateCheckAllCheckboxes();\n\t\t\t}\n\t\t},\n\n\t\tbindOnCheckAll()\n\t\t{\n\t\t\tconst self = this;\n\n\t\t\tthis.getCheckAllCheckboxes().forEach((current) => {\n\t\t\t\tcurrent.getObserver().add(\n\t\t\t\t\tcurrent.getNode(),\n\t\t\t\t\t'change',\n\t\t\t\t\tself._clickOnCheckAll,\n\t\t\t\t\tself,\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\n\t\t_clickOnCheckAll(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.toggleSelectionAll();\n\t\t\tthis.determinateCheckAllCheckboxes();\n\t\t},\n\n\t\ttoggleSelectionAll()\n\t\t{\n\t\t\tif (!this.getRows().isAllSelected()\n\t\t\t\t&& (this.lastRowAction === 'select' || !this.lastRowAction))\n\t\t\t{\n\t\t\t\tthis.getRows().selectAll();\n\t\t\t\tthis.selectAllCheckAllCheckboxes();\n\t\t\t\tthis.enableActionsPanel();\n\t\t\t\tBX.onCustomEvent(window, 'Grid::allRowsSelected', [this]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getRows().unselectAll();\n\t\t\t\tthis.unselectAllCheckAllCheckboxes();\n\t\t\t\tthis.disableActionsPanel();\n\t\t\t\tBX.onCustomEvent(window, 'Grid::allRowsUnselected', [this]);\n\t\t\t}\n\n\t\t\tdelete this.lastRowAction;\n\n\t\t\tthis.updateCounterSelected();\n\t\t},\n\n\t\tbindOnClickPaginationLinks()\n\t\t{\n\t\t\tconst self = this;\n\n\t\t\tthis.getPagination().getLinks().forEach((current) => {\n\t\t\t\tcurrent.getObserver().add(\n\t\t\t\t\tcurrent.getNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\tself._clickOnPaginationLink,\n\t\t\t\t\tself,\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\n\t\tbindOnMoreButtonEvents()\n\t\t{\n\t\t\tconst self = this;\n\n\t\t\tthis.getMoreButton().getObserver().add(\n\t\t\t\tthis.getMoreButton().getNode(),\n\t\t\t\t'click',\n\t\t\t\tself._clickOnMoreButton,\n\t\t\t\tself,\n\t\t\t);\n\t\t},\n\n\t\tbindOnRowEvents()\n\t\t{\n\t\t\tconst observer = this.getObserver();\n\t\t\tconst showCheckboxes = this.getParam('SHOW_ROW_CHECKBOXES');\n\t\t\tconst enableCollapsibleRows = this.getParam('ENABLE_COLLAPSIBLE_ROWS');\n\n\t\t\tthis.getRows().getBodyChild().forEach(function(current) {\n\t\t\t\tshowCheckboxes && observer.add(current.getNode(), 'click', this._onClickOnRow, this);\n\t\t\t\tcurrent.getDefaultAction() && observer.add(current.getNode(), 'dblclick', this._onRowDblclick, this);\n\t\t\t\tcurrent.getActionsButton() && observer.add(current.getActionsButton(), 'click', this._clickOnRowActionsButton, this);\n\t\t\t\tenableCollapsibleRows && current.getCollapseButton() && observer.add(current.getCollapseButton(), 'click', this._onCollapseButtonClick, this);\n\t\t\t}, this);\n\t\t},\n\n\t\t_onCollapseButtonClick(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tconst row = this.getRows().get(event.currentTarget);\n\t\t\trow.toggleChildRows();\n\n\t\t\tif (row.isCustom())\n\t\t\t{\n\t\t\t\tthis.getUserOptions().setCollapsedGroups(this.getRows().getIdsCollapsedGroups());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getUserOptions().setExpandedRows(this.getRows().getIdsExpandedRows());\n\t\t\t}\n\n\t\t\tBX.fireEvent(document.body, 'click');\n\t\t},\n\n\t\t_clickOnRowActionsButton(event)\n\t\t{\n\t\t\tconst row = this.getRows().get(event.target);\n\t\t\tevent.preventDefault();\n\n\t\t\tif (row.actionsMenuIsShown())\n\t\t\t{\n\t\t\t\trow.closeActionsMenu();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trow.showActionsMenu();\n\t\t\t}\n\t\t},\n\n\t\t_onRowDblclick(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tconst row = this.getRows().get(event.target);\n\t\t\tlet defaultJs = '';\n\n\t\t\tif (!row.isEdit())\n\t\t\t{\n\t\t\t\tclearTimeout(this.clickTimer);\n\t\t\t\tthis.clickPrevent = true;\n\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tdefaultJs = row.getDefaultAction();\n\t\t\t\t\teval(defaultJs);\n\t\t\t\t}\n\t\t\t\tcatch (err)\n\t\t\t\t{\n\t\t\t\t\tconsole.warn(err);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_onClickOnRow(event)\n\t\t{\n\t\t\tconst clickDelay = 50;\n\t\t\tconst selection = window.getSelection();\n\n\t\t\tif (event.target.nodeName === 'LABEL')\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\tif (event.shiftKey || selection.toString().length === 0)\n\t\t\t{\n\t\t\t\tif (event.shiftKey)\n\t\t\t\t{\n\t\t\t\t\tselection.removeAllRanges();\n\t\t\t\t}\n\n\t\t\t\tthis.clickTimer = setTimeout(BX.delegate(function() {\n\t\t\t\t\tif (!this.clickPrevent)\n\t\t\t\t\t{\n\t\t\t\t\t\tclickActions.apply(this, [event]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.clickPrevent = false;\n\t\t\t\t}, this), clickDelay);\n\t\t\t}\n\n\t\t\tfunction clickActions(event)\n\t\t\t{\n\t\t\t\tlet rows; let row; let containsNotSelected; let min; let max; let\n\t\t\t\t\tcontentContainer;\n\t\t\t\tlet isPrevent = true;\n\n\t\t\t\tif (event.target.nodeName !== 'A' && event.target.nodeName !== 'INPUT')\n\t\t\t\t{\n\t\t\t\t\trow = this.getRows().get(event.target);\n\t\t\t\t\tif (row)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontentContainer = row.getContentContainer(event.target);\n\n\t\t\t\t\t\tif (BX.type.isDomNode(contentContainer) && event.target.nodeName !== 'TD' && event.target !== contentContainer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisPrevent = BX.data(contentContainer, 'prevent-default') === 'true';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isPrevent)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (row.getCheckbox())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trows = [];\n\n\t\t\t\t\t\t\t\tthis.currentIndex = 0;\n\n\t\t\t\t\t\t\t\tthis.getRows().getRows().forEach(function(currentRow, index) {\n\t\t\t\t\t\t\t\t\tif (currentRow === row)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.currentIndex = index;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, this);\n\n\t\t\t\t\t\t\t\tthis.lastIndex = this.lastIndex || this.currentIndex;\n\n\t\t\t\t\t\t\t\tif (event.shiftKey)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tmin = Math.min(this.currentIndex, this.lastIndex);\n\t\t\t\t\t\t\t\t\tmax = Math.max(this.currentIndex, this.lastIndex);\n\n\t\t\t\t\t\t\t\t\twhile (min <= max)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trows.push(this.getRows().getRows()[min]);\n\t\t\t\t\t\t\t\t\t\tmin++;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcontainsNotSelected = rows.some((current) => {\n\t\t\t\t\t\t\t\t\t\treturn !current.isSelected();\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tif (containsNotSelected)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trows.forEach((current) => {\n\t\t\t\t\t\t\t\t\t\t\tcurrent.select();\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tthis.lastRowAction = 'select';\n\t\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::selectRows', [rows, this]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trows.forEach((current) => {\n\t\t\t\t\t\t\t\t\t\t\tcurrent.unselect();\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tthis.lastRowAction = 'unselect';\n\t\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::unselectRows', [rows, this]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tif (row.isSelected())\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.lastRowAction = 'unselect';\n\t\t\t\t\t\t\t\t\t\trow.unselect();\n\t\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::unselectRow', [row, this]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.lastRowAction = 'select';\n\t\t\t\t\t\t\t\t\t\trow.select();\n\t\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::selectRow', [row, this]);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.updateCounterSelected();\n\t\t\t\t\t\t\t\tthis.lastIndex = this.currentIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.adjustRows();\n\t\t\t\t\t\t\tthis.adjustCheckAllCheckboxes();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tadjustRows()\n\t\t{\n\t\t\tif (this.getRows().isSelected())\n\t\t\t{\n\t\t\t\tBX.onCustomEvent(window, 'Grid::thereSelectedRows', [this]);\n\t\t\t\tthis.enableActionsPanel();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.onCustomEvent(window, 'Grid::noSelectedRows', []);\n\t\t\t\tthis.disableActionsPanel();\n\t\t\t}\n\t\t},\n\n\t\tgetPagination()\n\t\t{\n\t\t\treturn new BX.Grid.Pagination(this);\n\t\t},\n\n\t\tgetState()\n\t\t{\n\t\t\treturn window.history.state;\n\t\t},\n\n\t\ttableFade()\n\t\t{\n\t\t\tBX.addClass(this.getTable(), this.settings.get('classTableFade'));\n\t\t\tthis.getLoader().show();\n\t\t\tBX.onCustomEvent('Grid::disabled', [this]);\n\t\t},\n\n\t\ttableUnfade()\n\t\t{\n\t\t\tBX.removeClass(this.getTable(), this.settings.get('classTableFade'));\n\t\t\tthis.getLoader().hide();\n\t\t\tBX.onCustomEvent('Grid::enabled', [this]);\n\t\t},\n\n\t\t_clickOnPaginationLink(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\n\t\t\tconst self = this;\n\t\t\tconst link = this.getPagination().getLink(event.target);\n\n\t\t\tif (!link.isLoad())\n\t\t\t{\n\t\t\t\tthis.getUserOptions().resetExpandedRows();\n\n\t\t\t\tlink.load();\n\t\t\t\tthis.tableFade();\n\n\t\t\t\tthis.getData().request(link.getLink(), null, null, 'pagination', function() {\n\t\t\t\t\tself.rows = null;\n\t\t\t\t\tself.getUpdater().updateBodyRows(this.getBodyRows());\n\t\t\t\t\tself.getUpdater().updateHeadRows(this.getHeadRows());\n\t\t\t\t\tself.getUpdater().updateMoreButton(this.getMoreButton());\n\t\t\t\t\tself.getUpdater().updatePagination(this.getPagination());\n\n\t\t\t\t\tself.bindOnRowEvents();\n\t\t\t\t\tself.bindOnMoreButtonEvents();\n\t\t\t\t\tself.bindOnClickPaginationLinks();\n\t\t\t\t\tself.bindOnCheckAll();\n\t\t\t\t\tself.updateCounterDisplayed();\n\t\t\t\t\tself.updateCounterSelected();\n\t\t\t\t\tself.disableActionsPanel();\n\t\t\t\t\tself.disableForAllCounter();\n\n\t\t\t\t\tif (self.getParam('SHOW_ACTION_PANEL'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.getActionsPanel().resetForAllCheckbox();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.rowsSortable.reinit();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.colsSortable.reinit();\n\t\t\t\t\t}\n\n\t\t\t\t\tlink.unload();\n\t\t\t\t\tself.tableUnfade();\n\n\t\t\t\t\tBX.onCustomEvent(window, 'Grid::updated', [self]);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_clickOnMoreButton(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\n\t\t\tconst self = this;\n\t\t\tconst moreButton = this.getMoreButton();\n\n\t\t\tmoreButton.load();\n\n\t\t\tthis.getData().request(moreButton.getLink(), null, null, 'more', function() {\n\t\t\t\tself.getUpdater().appendBodyRows(this.getBodyRows());\n\t\t\t\tself.getUpdater().updateMoreButton(this.getMoreButton());\n\t\t\t\tself.getUpdater().updatePagination(this.getPagination());\n\n\t\t\t\tself.getRows().reset();\n\t\t\t\tself.bindOnRowEvents();\n\n\t\t\t\tself.bindOnMoreButtonEvents();\n\t\t\t\tself.bindOnClickPaginationLinks();\n\t\t\t\tself.bindOnCheckAll();\n\t\t\t\tself.updateCounterDisplayed();\n\t\t\t\tself.updateCounterSelected();\n\n\t\t\t\tif (self.getParam('ALLOW_PIN_HEADER'))\n\t\t\t\t{\n\t\t\t\t\tself.getPinHeader()._onGridUpdate();\n\t\t\t\t}\n\n\t\t\t\tif (self.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.rowsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tif (self.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.colsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tself.unselectAllCheckAllCheckboxes();\n\n\t\t\t\tBX.onCustomEvent(window, 'Grid::updated', [self]);\n\t\t\t});\n\t\t},\n\n\t\tgetAjaxId()\n\t\t{\n\t\t\treturn BX.data(\n\t\t\t\tthis.getContainer(),\n\t\t\t\tthis.settings.get('ajaxIdDataProp'),\n\t\t\t);\n\t\t},\n\n\t\tupdate(data, action)\n\t\t{\n\t\t\tlet newRows; let newHeadRows; let newNavPanel; let thisBody; let thisHead; let\n\t\t\t\tthisNavPanel;\n\n\t\t\tif (!BX.type.isNotEmptyString(data))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthisBody = BX.Grid.Utils.getByTag(this.getTable(), 'tbody', true);\n\t\t\tthisHead = BX.Grid.Utils.getByTag(this.getTable(), 'thead', true);\n\t\t\tthisNavPanel = BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classNavPanel'), true);\n\n\t\t\tdata = BX.create('div', { html: data });\n\t\t\tnewHeadRows = BX.Grid.Utils.getByClass(data, this.settings.get('classHeadRow'));\n\t\t\tnewRows = BX.Grid.Utils.getByClass(data, this.settings.get('classDataRows'));\n\t\t\tnewNavPanel = BX.Grid.Utils.getByClass(data, this.settings.get('classNavPanel'), true);\n\n\t\t\tif (action === this.settings.get('updateActionMore'))\n\t\t\t{\n\t\t\t\tthis.getRows().addRows(newRows);\n\t\t\t\tthis.unselectAllCheckAllCheckboxes();\n\t\t\t}\n\n\t\t\tif (action === this.settings.get('updateActionPagination'))\n\t\t\t{\n\t\t\t\tBX.cleanNode(thisBody);\n\t\t\t\tthis.getRows().addRows(newRows);\n\t\t\t\tthis.unselectAllCheckAllCheckboxes();\n\t\t\t}\n\n\t\t\tif (action === this.settings.get('updateActionSort'))\n\t\t\t{\n\t\t\t\tBX.cleanNode(thisHead);\n\t\t\t\tBX.cleanNode(thisBody);\n\t\t\t\tthisHead.appendChild(newHeadRows[0]);\n\t\t\t\tthis.getRows().addRows(newRows);\n\t\t\t}\n\n\t\t\tthisNavPanel.innerHTML = newNavPanel.innerHTML;\n\n\t\t\tthis.bindOnRowEvents();\n\n\t\t\tthis.bindOnMoreButtonEvents();\n\t\t\tthis.bindOnClickPaginationLinks();\n\t\t\tthis.bindOnClickHeader();\n\t\t\tthis.bindOnCheckAll();\n\t\t\tthis.updateCounterDisplayed();\n\t\t\tthis.updateCounterSelected();\n\t\t\tthis.sortable.reinit();\n\t\t},\n\n\t\tgetCounterDisplayed()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classCounterDisplayed'));\n\t\t},\n\n\t\tgetCounterSelected()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classCounterSelected'));\n\t\t},\n\n\t\tupdateCounterDisplayed()\n\t\t{\n\t\t\tconst counterDisplayed = this.getCounterDisplayed();\n\t\t\tlet rows;\n\n\t\t\tif (BX.type.isArray(counterDisplayed))\n\t\t\t{\n\t\t\t\trows = this.getRows();\n\t\t\t\tcounterDisplayed.forEach((current) => {\n\t\t\t\t\tif (BX.type.isDomNode(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrent.innerText = rows.getCountDisplayed();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tupdateCounterSelected()\n\t\t{\n\t\t\tconst counterSelected = this.getCounterSelected();\n\t\t\tlet rows;\n\n\t\t\tif (BX.type.isArray(counterSelected))\n\t\t\t{\n\t\t\t\trows = this.getRows();\n\t\t\t\tcounterSelected.forEach((current) => {\n\t\t\t\t\tif (BX.type.isDomNode(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrent.innerText = rows.getCountSelected();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tgetContainerId()\n\t\t{\n\t\t\treturn this.containerId;\n\t\t},\n\n\t\tgetId()\n\t\t{\n\t\t\t// ID is equals to container Id\n\t\t\treturn this.containerId;\n\t\t},\n\n\t\tgetContainer()\n\t\t{\n\t\t\treturn BX(this.getContainerId());\n\t\t},\n\n\t\tgetCounter()\n\t\t{\n\t\t\tif (!this.counter)\n\t\t\t{\n\t\t\t\tthis.counter = BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classCounter'));\n\t\t\t}\n\n\t\t\treturn this.counter;\n\t\t},\n\n\t\tenableForAllCounter()\n\t\t{\n\t\t\tconst counter = this.getCounter();\n\n\t\t\tif (BX.type.isArray(counter))\n\t\t\t{\n\t\t\t\tcounter.forEach(function(current) {\n\t\t\t\t\tBX.addClass(current, this.settings.get('classForAllCounterEnabled'));\n\t\t\t\t}, this);\n\t\t\t}\n\t\t},\n\n\t\tdisableForAllCounter()\n\t\t{\n\t\t\tconst counter = this.getCounter();\n\n\t\t\tif (BX.type.isArray(counter))\n\t\t\t{\n\t\t\t\tcounter.forEach(function(current) {\n\t\t\t\t\tBX.removeClass(current, this.settings.get('classForAllCounterEnabled'));\n\t\t\t\t}, this);\n\t\t\t}\n\t\t},\n\n\t\tgetScrollContainer()\n\t\t{\n\t\t\tif (!this.scrollContainer)\n\t\t\t{\n\t\t\t\tthis.scrollContainer = BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classScrollContainer'), true);\n\t\t\t}\n\n\t\t\treturn this.scrollContainer;\n\t\t},\n\n\t\tgetWrapper()\n\t\t{\n\t\t\tif (!this.wrapper)\n\t\t\t{\n\t\t\t\tthis.wrapper = BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classWrapper'), true);\n\t\t\t}\n\n\t\t\treturn this.wrapper;\n\t\t},\n\n\t\tgetFadeContainer()\n\t\t{\n\t\t\tif (!this.fadeContainer)\n\t\t\t{\n\t\t\t\tthis.fadeContainer = BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classFadeContainer'), true);\n\t\t\t}\n\n\t\t\treturn this.fadeContainer;\n\t\t},\n\n\t\tgetTable()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classTable'), true);\n\t\t},\n\n\t\tgetHeaders()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getBySelector(this.getWrapper(), `.main-grid-header[data-relative=\"${this.getContainerId()}\"]`);\n\t\t},\n\n\t\tgetHead()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByTag(this.getContainer(), 'thead', true);\n\t\t},\n\n\t\tgetBody()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByTag(this.getContainer(), 'tbody', true);\n\t\t},\n\n\t\tgetFoot()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByTag(this.getContainer(), 'tfoot', true);\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Rows}\n\t\t */\n\t\tgetRows()\n\t\t{\n\t\t\tif (!(this.rows instanceof BX.Grid.Rows))\n\t\t\t{\n\t\t\t\tthis.rows = new BX.Grid.Rows(this);\n\t\t\t}\n\n\t\t\treturn this.rows;\n\t\t},\n\n\t\tgetMoreButton()\n\t\t{\n\t\t\tconst node = BX.Grid.Utils.getByClass(this.getContainer(), this.settings.get('classMoreButton'), true);\n\n\t\t\treturn new BX.Grid.Element(node, this);\n\t\t},\n\n\t\t/**\n\t\t * Gets loader instance\n\t\t * @return {BX.Grid.Loader}\n\t\t */\n\t\tgetLoader()\n\t\t{\n\t\t\tif (!(this.loader instanceof BX.Grid.Loader))\n\t\t\t{\n\t\t\t\tthis.loader = new BX.Grid.Loader(this);\n\t\t\t}\n\n\t\t\treturn this.loader;\n\t\t},\n\n\t\tblockSorting()\n\t\t{\n\t\t\tconst headerCells = BX.Grid.Utils.getByClass(\n\t\t\t\tthis.getContainer(),\n\t\t\t\tthis.settings.get('classHeadCell'),\n\t\t\t);\n\n\t\t\theaderCells.forEach(function(header) {\n\t\t\t\tif (this.isSortableHeader(header))\n\t\t\t\t{\n\t\t\t\t\tBX.removeClass(header, this.settings.get('classHeaderSortable'));\n\t\t\t\t\tBX.addClass(header, this.settings.get('classHeaderNoSortable'));\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\n\t\tunblockSorting()\n\t\t{\n\t\t\tconst headerCells = BX.Grid.Utils.getByClass(\n\t\t\t\tthis.getContainer(),\n\t\t\t\tthis.settings.get('classHeadCell'),\n\t\t\t);\n\n\t\t\theaderCells.forEach(function(header) {\n\t\t\t\tif (this.isNoSortableHeader(header) && header.dataset.sortBy)\n\t\t\t\t{\n\t\t\t\t\tBX.addClass(header, this.settings.get('classHeaderSortable'));\n\t\t\t\t\tBX.removeClass(header, this.settings.get('classHeaderNoSortable'));\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\n\t\tconfirmDialog(action, then, cancel)\n\t\t{\n\t\t\tlet dialog; let popupContainer; let applyButton; let\n\t\t\t\tcancelButton;\n\n\t\t\tif ('CONFIRM' in action && action.CONFIRM)\n\t\t\t{\n\t\t\t\taction.CONFIRM_MESSAGE = action.CONFIRM_MESSAGE || this.arParams.CONFIRM_MESSAGE;\n\t\t\t\taction.CONFIRM_APPLY_BUTTON = action.CONFIRM_APPLY_BUTTON || this.arParams.CONFIRM_APPLY;\n\t\t\t\taction.CONFIRM_CANCEL_BUTTON = action.CONFIRM_CANCEL_BUTTON || this.arParams.CONFIRM_CANCEL;\n\n\t\t\t\tdialog = new BX.PopupWindow(\n\t\t\t\t\t`${this.getContainerId()}-confirm-dialog`,\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tcontent: `<div class=\"main-grid-confirm-content\">${action.CONFIRM_MESSAGE}</div>`,\n\t\t\t\t\t\ttitleBar: 'CONFIRM_TITLE' in action ? action.CONFIRM_TITLE : '',\n\t\t\t\t\t\tautoHide: false,\n\t\t\t\t\t\tzIndex: 9999,\n\t\t\t\t\t\toverlay: 0.4,\n\t\t\t\t\t\toffsetTop: -100,\n\t\t\t\t\t\tcloseIcon: false,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonClose()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.unbind(window, 'keydown', hotKey);\n\t\t\t\t\t\t\t\tdialog.destroy();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\t\t\ttext: action.CONFIRM_APPLY_BUTTON,\n\t\t\t\t\t\t\t\tid: `${this.getContainerId()}-confirm-dialog-apply-button`,\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick()\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.type.isFunction(then) ? then() : null;\n\t\t\t\t\t\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::confirmDialogApply', [this]);\n\t\t\t\t\t\t\t\t\t\tBX.unbind(window, 'keydown', hotKey);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\t\t\t\ttext: action.CONFIRM_CANCEL_BUTTON,\n\t\t\t\t\t\t\t\tid: `${this.getContainerId()}-confirm-dialog-cancel-button`,\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick()\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.type.isFunction(cancel) ? cancel() : null;\n\t\t\t\t\t\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t\t\t\t\tBX.onCustomEvent(window, 'Grid::confirmDialogCancel', [this]);\n\t\t\t\t\t\t\t\t\t\tBX.unbind(window, 'keydown', hotKey);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tif (!dialog.isShown())\n\t\t\t\t{\n\t\t\t\t\tdialog.show();\n\t\t\t\t\tpopupContainer = dialog.popupContainer;\n\t\t\t\t\tBX.removeClass(popupContainer, this.settings.get('classCloseAnimation'));\n\t\t\t\t\tBX.addClass(popupContainer, this.settings.get('classShowAnimation'));\n\t\t\t\t\tapplyButton = BX(`${this.getContainerId()}-confirm-dialog-apply-button`);\n\t\t\t\t\tcancelButton = BX(`${this.getContainerId()}-confirm-dialog-cancel-button`);\n\n\t\t\t\t\tBX.bind(window, 'keydown', hotKey);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.type.isFunction(then) ? then() : null;\n\t\t\t}\n\n\t\t\tfunction hotKey(event)\n\t\t\t{\n\t\t\t\tif (event.code === 'Enter')\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tBX.fireEvent(applyButton, 'click');\n\t\t\t\t}\n\n\t\t\t\tif (event.code === 'Escape')\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tBX.fireEvent(cancelButton, 'click');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetCurrentPage()\n\t\t{\n\t\t\tconst currentPage = parseInt(this.arParams.CURRENT_PAGE);\n\t\t\tif (BX.Type.isNumber(currentPage))\n\t\t\t{\n\t\t\t\treturn currentPage;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t * @return {Element | any}\n\t\t */\n\t\tgetEmptyStub()\n\t\t{\n\t\t\treturn this.getTable().querySelector('.main-grid-row-empty');\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tshowEmptyStub()\n\t\t{\n\t\t\tconst stub = this.getEmptyStub();\n\t\t\tif (stub)\n\t\t\t{\n\t\t\t\tBX.Dom.attr(stub, 'hidden', null);\n\t\t\t\tBX.Dom.addClass(this.getContainer(), 'main-grid-empty-stub');\n\t\t\t\tif (this.getCurrentPage() <= 1)\n\t\t\t\t{\n\t\t\t\t\tthis.hidePanels();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\thideEmptyStub()\n\t\t{\n\t\t\tconst stub = this.getEmptyStub();\n\t\t\tif (stub)\n\t\t\t{\n\t\t\t\tBX.Dom.attr(stub, 'hidden', true);\n\t\t\t\tBX.Dom.removeClass(this.getContainer(), 'main-grid-empty-stub');\n\t\t\t\tBX.Dom.style(this.getTable(), 'min-height', null);\n\t\t\t\tthis.showPanels();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tshowPanels()\n\t\t{\n\t\t\tBX.Dom.show(this.getPanels());\n\t\t\tif (this.getPanels().offsetHeight > 0)\n\t\t\t{\n\t\t\t\tBX.Dom.removeClass(this.getContainer(), 'main-grid-empty-footer');\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\thidePanels()\n\t\t{\n\t\t\tBX.Dom.hide(this.getPanels());\n\t\t\tBX.Dom.addClass(this.getContainer(), 'main-grid-empty-footer');\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Row}\n\t\t */\n\t\tgetTemplateRow()\n\t\t{\n\t\t\tconst templateRow = BX.Runtime.clone(\n\t\t\t\tthis.getRows().getBodyChild(true).find((row) => {\n\t\t\t\t\treturn row.getId() === 'template_0';\n\t\t\t\t}),\n\t\t\t);\n\t\t\tconst cloned = BX.Runtime.clone(templateRow.getNode());\n\t\t\tBX.Dom.prepend(cloned, this.getBody());\n\n\t\t\tconst checkbox = cloned.querySelector('[type=\"checkbox\"]');\n\t\t\tif (checkbox)\n\t\t\t{\n\t\t\t\tBX.Dom.attr(checkbox, 'disabled', null);\n\t\t\t\tBX.Dom.attr(checkbox, 'data-disabled', null);\n\t\t\t}\n\n\t\t\treturn new BX.Grid.Row(this, cloned);\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t * @return {{}[]}\n\t\t */\n\t\tgetRowEditorValue(withTemplate)\n\t\t{\n\t\t\tthis.rows = null;\n\n\t\t\treturn this.getRows().getSelected(withTemplate).map((row) => {\n\t\t\t\treturn row.getEditorValue();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t * @return {HTMLElement|HTMLBodyElement}\n\t\t */\n\t\tgetRowEditorActionPanel()\n\t\t{\n\t\t\tif (!this.rowEditorActionPanel)\n\t\t\t{\n\t\t\t\tthis.rowEditorActionPanel = BX.Dom.create({\n\t\t\t\t\ttag: 'div',\n\t\t\t\t\tprops: { className: 'main-ui-grid-row-editor-actions-panel' },\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.Dom.create({\n\t\t\t\t\t\t\ttag: 'span',\n\t\t\t\t\t\t\tprops: { className: 'ui-btn ui-btn-success' },\n\t\t\t\t\t\t\ttext: this.arParams.SAVE_BUTTON_LABEL,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick: this.saveRows.bind(this),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tBX.Dom.create({\n\t\t\t\t\t\t\ttag: 'span',\n\t\t\t\t\t\t\tprops: { className: 'ui-btn ui-btn-link' },\n\t\t\t\t\t\t\ttext: this.arParams.CANCEL_BUTTON_LABEL,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick: this.hideRowsEditor.bind(this),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.rowEditorActionPanel;\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tshowRowEditorActionsPanel()\n\t\t{\n\t\t\tconst panel = this.getRowEditorActionPanel();\n\t\t\tBX.Dom.append(panel, this.actionPanel.getPanel());\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\thideRowEditorActionsPanel()\n\t\t{\n\t\t\tBX.Dom.remove(this.getRowEditorActionPanel());\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Row}\n\t\t */\n\t\tprependRowEditor()\n\t\t{\n\t\t\treturn this.addRowEditor('prepend');\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Row}\n\t\t */\n\t\tappendRowEditor()\n\t\t{\n\t\t\treturn this.addRowEditor('append');\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Row}\n\t\t */\n\t\taddRowEditor(direction = 'prepend')\n\t\t{\n\t\t\tBX.Dom.style(this.getTable(), 'min-height', null);\n\t\t\tconst templateRow = this.getTemplateRow();\n\t\t\tthis.editableRows.push(templateRow);\n\n\t\t\tif (direction === 'prepend')\n\t\t\t{\n\t\t\t\ttemplateRow.prependTo(this.getBody());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttemplateRow.appendTo(this.getBody());\n\t\t\t}\n\n\t\t\ttemplateRow.show();\n\t\t\ttemplateRow.select();\n\t\t\ttemplateRow.edit();\n\n\t\t\tthis.getRows().reset();\n\n\t\t\tif (this.getParam('ALLOW_ROWS_SORT'))\n\t\t\t{\n\t\t\t\tthis.rowsSortable.reinit();\n\t\t\t}\n\n\t\t\tif (this.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t{\n\t\t\t\tthis.colsSortable.reinit();\n\t\t\t}\n\n\t\t\tthis.hideEmptyStub();\n\n\t\t\treturn templateRow;\n\t\t},\n\n\t\thideRowsEditor()\n\t\t{\n\t\t\tthis.editableRows.forEach((row) => {\n\t\t\t\tBX.Dom.remove(row.getNode());\n\t\t\t});\n\t\t\tthis.editableRows = [];\n\t\t},\n\n\t\tsaveRows()\n\t\t{\n\t\t\tconst value = this.getRowEditorValue(true);\n\n\t\t\tthis.emitAsync('onAddRowsAsync', { rows: value })\n\t\t\t\t.then((result) => {\n\t\t\t\t\tresult.forEach((rowData, rowIndex) => {\n\t\t\t\t\t\tconst row = this.editableRows[rowIndex];\n\t\t\t\t\t\tif (row)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trow.editCancel();\n\t\t\t\t\t\t\trow.unselect();\n\t\t\t\t\t\t\trow.makeCountable();\n\n\t\t\t\t\t\t\trow.setId(rowData.id);\n\t\t\t\t\t\t\trow.setActions(rowData.actions);\n\t\t\t\t\t\t\trow.setCellsContent(rowData.columns);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.bindOnRowEvents();\n\t\t\t\t\tthis.updateCounterDisplayed();\n\t\t\t\t\tthis.updateCounterSelected();\n\n\t\t\t\t\tthis.editableRows = [];\n\t\t\t\t});\n\t\t},\n\n\t\tgetRealtime(): BX.Grid.Realtime\n\t\t{\n\t\t\treturn this.cache.remember('realtime', () => {\n\t\t\t\treturn new BX.Grid.Realtime({\n\t\t\t\t\tgrid: this,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * Updates grid\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.Updater = function(parent)\n\t{\n\t\tthis.parent = parent;\n\t};\n\n\t/**\n\t * Gets parent object\n\t * @return {?BX.Main.grid}\n\t */\n\tBX.Grid.Updater.prototype.getParent = function()\n\t{\n\t\treturn this.parent;\n\t};\n\n\t/**\n\t * Updates head rows\n\t * @param {?HTMLTableRowElement[]} rows\n\t */\n\tBX.Grid.Updater.prototype.updateHeadRows = function(rows)\n\t{\n\t\tlet headers;\n\n\t\tif (BX.type.isArray(rows) && rows.length > 0)\n\t\t{\n\t\t\theaders = this.getParent().getHeaders();\n\t\t\theaders.forEach((header) => {\n\t\t\t\theader = BX.cleanNode(header);\n\t\t\t\trows.forEach((row) => {\n\t\t\t\t\tif (BX.type.isDomNode(row))\n\t\t\t\t\t{\n\t\t\t\t\t\theader.appendChild(BX.clone(row));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Appends head rows\n\t * @param {?HTMLTableRowElement[]} rows\n\t */\n\tBX.Grid.Updater.prototype.appendHeadRows = function(rows)\n\t{\n\t\tlet headers;\n\n\t\tif (BX.type.isArray(rows) && rows.length > 0)\n\t\t{\n\t\t\theaders = this.getParent().getHeaders();\n\n\t\t\theaders.forEach((header) => {\n\t\t\t\trows.forEach((row) => {\n\t\t\t\t\tif (BX.type.isDomNode(row))\n\t\t\t\t\t{\n\t\t\t\t\t\theader.appendChild(BX.clone(row));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Prepends head rows\n\t * @param {?HTMLTableRowElement[]} rows\n\t */\n\tBX.Grid.Updater.prototype.prependHeadRows = function(rows)\n\t{\n\t\tlet headers;\n\n\t\tif (BX.type.isArray(rows) && rows.length > 0)\n\t\t{\n\t\t\theaders = this.getParent().getHeaders();\n\n\t\t\theaders.forEach((header) => {\n\t\t\t\theader = BX.cleanNode(header);\n\t\t\t\trows.forEach((row) => {\n\t\t\t\t\tif (BX.type.isDomNode(row))\n\t\t\t\t\t{\n\t\t\t\t\t\theader.prepend(BX.clone(row));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Updates body row by row id\n\t * @param {?string|number} id\n\t * @param {HTMLTableRowElement} row\n\t */\n\tBX.Grid.Updater.prototype.updateBodyRowById = function(id, row)\n\t{\n\t\tif ((BX.type.isNumber(id) || BX.type.isNotEmptyString(id)) && BX.type.isDomNode(row))\n\t\t{\n\t\t\tconst currentRow = this.getParent().getRows().getById(id);\n\n\t\t\tif (currentRow)\n\t\t\t{\n\t\t\t\tconst currentNode = currentRow.getNode();\n\t\t\t\tBX.insertAfter(row, currentNode);\n\t\t\t\tBX.remove(currentNode);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Updates all body rows.\n\t * @param {?HTMLTableRowElement[]} rows\n\t */\n\tBX.Grid.Updater.prototype.updateBodyRows = function(rows)\n\t{\n\t\tif (BX.type.isArray(rows))\n\t\t{\n\t\t\tconst body = this.getParent().getBody();\n\t\t\tbody.innerHTML = '';\n\n\t\t\trows.forEach((current) => {\n\t\t\t\tBoolean(current) && body.appendChild(current);\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Appends body rows.\n\t * @param {?HTMLTableRowElement[]} rows\n\t */\n\tBX.Grid.Updater.prototype.appendBodyRows = function(rows)\n\t{\n\t\tlet body;\n\n\t\tif (BX.type.isArray(rows))\n\t\t{\n\t\t\tbody = this.getParent().getBody();\n\t\t\trows.forEach((current) => {\n\t\t\t\tif (BX.type.isDomNode(current))\n\t\t\t\t{\n\t\t\t\t\tbody.appendChild(current);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Prepends body rows\n\t * @param {?HTMLTableRowElement[]} rows\n\t */\n\tBX.Grid.Updater.prototype.prependBodyRows = function(rows)\n\t{\n\t\tlet body;\n\n\t\tif (BX.type.isArray(rows))\n\t\t{\n\t\t\tbody = this.getParent().getBody();\n\t\t\trows.forEach((current) => {\n\t\t\t\tif (BX.type.isDomNode(current))\n\t\t\t\t{\n\t\t\t\t\tBX.prepend(body, current);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Updates table footer rows.\n\t * @param {?HTMLTableRowElement[]} rows\n\t */\n\tBX.Grid.Updater.prototype.updateFootRows = function(rows)\n\t{\n\t\tlet foot;\n\n\t\tif (BX.type.isArray(rows))\n\t\t{\n\t\t\tfoot = BX.cleanNode(this.getParent().getFoot());\n\t\t\trows.forEach((current) => {\n\t\t\t\tif (BX.type.isDomNode(current))\n\t\t\t\t{\n\t\t\t\t\tfoot.appendChild(current);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Updates total rows counter\n\t * @param {?HTMLElement} counter\n\t */\n\tBX.Grid.Updater.prototype.updateCounterTotal = function(counter)\n\t{\n\t\tlet counterCell;\n\n\t\tif (BX.type.isDomNode(counter))\n\t\t{\n\t\t\tcounterCell = BX.cleanNode(this.getParent().getCounterTotal());\n\t\t\tcounterCell.appendChild(counter);\n\t\t}\n\t};\n\n\t/**\n\t * Updates grid pagination\n\t * @param {?HTMLElement} pagination\n\t */\n\tBX.Grid.Updater.prototype.updatePagination = function(pagination)\n\t{\n\t\tconst paginationCell = this.getParent().getPagination().getContainer();\n\n\t\tif (paginationCell)\n\t\t{\n\t\t\tpaginationCell.innerHTML = '';\n\n\t\t\tif (BX.type.isDomNode(pagination))\n\t\t\t{\n\t\t\t\tpaginationCell.appendChild(pagination);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Updates more button\n\t * @param {?HTMLElement} button\n\t */\n\tBX.Grid.Updater.prototype.updateMoreButton = function(button)\n\t{\n\t\tif (BX.type.isDomNode(button))\n\t\t{\n\t\t\tconst buttonParent = BX.Grid.Utils.closestParent(this.getParent().getMoreButton().getNode());\n\t\t\tbuttonParent.innerHTML = '';\n\t\t\tbuttonParent.appendChild(button);\n\t\t}\n\t};\n\n\t/**\n\t * Updates group actions panel\n\t * @param {HTMLElement} panel\n\t */\n\tBX.Grid.Updater.prototype.updateGroupActions = function(panel)\n\t{\n\t\tconst GroupActions = this.parent.getActionsPanel();\n\n\t\tif (Boolean(GroupActions) && BX.type.isDomNode(panel))\n\t\t{\n\t\t\tconst panelNode = GroupActions.getPanel();\n\n\t\t\tif (BX.type.isDomNode(panelNode))\n\t\t\t{\n\t\t\t\tpanelNode.innerHTML = '';\n\n\t\t\t\tconst panelChild = BX.firstChild(panel);\n\n\t\t\t\tif (BX.type.isDomNode(panelChild))\n\t\t\t\t{\n\t\t\t\t\tpanelNode.appendChild(panelChild);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Updates a grid container\n\t * @param {?HTMLElement} container\n\t */\n\tBX.Grid.Updater.prototype.updateContainer = function(container)\n\t{\n\t\tif (BX.Type.isDomNode(container))\n\t\t{\n\t\t\tthis.getParent().getContainer().className = container.className;\n\t\t}\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.Reflection.namespace('BX.Grid');\n\n\tBX.Grid.ImageField = function(parent, options) {\n\t\tthis.parent = parent;\n\t\tthis.options = options;\n\t\tthis.cache = new BX.Cache.MemoryCache();\n\t};\n\n\tBX.Grid.ImageField.prototype = {\n\t\tgetPreview()\n\t\t{\n\t\t\treturn this.cache.remember('preview', () => {\n\t\t\t\treturn BX.create('img', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'main-grid-image-editor-preview',\n\t\t\t\t\t},\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tsrc: this.options.VALUE,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetFileInput()\n\t\t{\n\t\t\treturn this.cache.remember('fileInput', () => {\n\t\t\t\treturn BX.create('input', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'main-grid-image-editor-file-input',\n\t\t\t\t\t},\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\ttype: 'file',\n\t\t\t\t\t\taccept: 'image/*',\n\t\t\t\t\t\tname: this.options.NAME,\n\t\t\t\t\t},\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tchange: function(event) {\n\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\treader.onload = function(event) {\n\t\t\t\t\t\t\t\tthis.getPreview().src = event.currentTarget.result;\n\t\t\t\t\t\t\t}.bind(this);\n\n\t\t\t\t\t\t\treader.readAsDataURL(event.target.files[0]);\n\n\t\t\t\t\t\t\tBX.Dom.remove(this.getFakeField());\n\t\t\t\t\t\t\tBX.Dom.append(this.getFileInput(), this.getLayout());\n\t\t\t\t\t\t\tBX.Dom.removeClass(this.getRemoveButton(), 'ui-btn-disabled');\n\t\t\t\t\t\t\tBX.Dom.style(this.getPreview(), null);\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetUploadButton()\n\t\t{\n\t\t\treturn this.cache.remember('uploadButton', () => {\n\t\t\t\treturn BX.create('button', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'ui-btn ui-btn-xs',\n\t\t\t\t\t},\n\t\t\t\t\ttext: this.parent.getParam('MAIN_UI_GRID_IMAGE_EDITOR_BUTTON_EDIT'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function(event) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tthis.getFileInput().click();\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetRemoveButton()\n\t\t{\n\t\t\treturn this.cache.remember('removeButton', () => {\n\t\t\t\treturn BX.create('button', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'ui-btn ui-btn-xs ui-btn-danger',\n\t\t\t\t\t},\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function(event) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tBX.Dom.append(this.getFakeField(), this.getLayout());\n\t\t\t\t\t\t\tBX.Dom.remove(this.getFileInput());\n\t\t\t\t\t\t\tBX.Dom.addClass(this.getRemoveButton(), 'ui-btn-disabled');\n\t\t\t\t\t\t\tBX.Dom.style(this.getPreview(), {\n\t\t\t\t\t\t\t\topacity: 0.4,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t},\n\t\t\t\t\ttext: this.parent.getParam('MAIN_UI_GRID_IMAGE_EDITOR_BUTTON_REMOVE'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetFakeField()\n\t\t{\n\t\t\treturn this.cache.remember('deleted', () => {\n\t\t\t\treturn BX.create('input', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'main-grid-image-editor-fake-file-input',\n\t\t\t\t\t},\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\t\tname: this.options.NAME,\n\t\t\t\t\t\tvalue: 'null',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetLayout()\n\t\t{\n\t\t\treturn this.cache.remember('layout', () => {\n\t\t\t\treturn BX.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'main-grid-image-editor main-grid-editor',\n\t\t\t\t\t},\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tname: this.options.NAME,\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'main-grid-image-editor-left',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tthis.getPreview(),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'main-grid-image-editor-right',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tthis.getUploadButton(),\n\t\t\t\t\t\t\t\tthis.getRemoveButton(),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tthis.getFileInput(),\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t};\n})();\n","import { Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\n(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.InlineEditor\n\t * @param {BX.Main.grid} parent\n\t * @param {Object} types\n\t * @constructor\n\t */\n\tBX.Grid.InlineEditor = function(parent, types)\n\t{\n\t\tthis.parent = null;\n\t\tthis.types = null;\n\t\tthis.isDropdownChangeEventSubscribed = false;\n\t\tthis.init(parent, types);\n\t};\n\n\tBX.Grid.InlineEditor.prototype = {\n\t\tinit(parent, types)\n\t\t{\n\t\t\tthis.parent = parent;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.types = eval(types);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tthis.types = null;\n\t\t\t}\n\t\t},\n\n\t\tcreateContainer()\n\t\t{\n\t\t\treturn BX.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: this.parent.settings.get('classEditorContainer'),\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\n\t\tcreateTextarea(editObject, height)\n\t\t{\n\t\t\treturn BX.create('textarea', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: [\n\t\t\t\t\t\tthis.parent.settings.get('classEditor'),\n\t\t\t\t\t\tthis.parent.settings.get('classEditorTextarea'),\n\t\t\t\t\t].join(' '),\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\tname: editObject.NAME,\n\t\t\t\t\tstyle: `height:${height}px`,\n\t\t\t\t},\n\t\t\t\thtml: editObject.VALUE || '',\n\t\t\t});\n\t\t},\n\n\t\tcreateInput(editObject)\n\t\t{\n\t\t\tlet className = this.parent.settings.get('classEditorText');\n\t\t\tconst attrs =\t\t\t\t{\n\t\t\t\tvalue: (editObject.VALUE !== undefined && editObject.VALUE !== null) ? BX.util.htmlspecialcharsback(editObject.VALUE) : '',\n\t\t\t\tname: (editObject.NAME !== undefined && editObject.NAME !== null) ? editObject.NAME : '',\n\t\t\t};\n\n\t\t\tif (editObject.TYPE === this.types.CHECKBOX)\n\t\t\t{\n\t\t\t\tclassName = this.parent.settings.get('classEditorCheckbox');\n\t\t\t\tattrs.type = 'checkbox';\n\t\t\t\tattrs.checked = (attrs.value == 'Y');\n\t\t\t}\n\n\t\t\tif (editObject.TYPE === this.types.DATE)\n\t\t\t{\n\t\t\t\tclassName = [className, this.parent.settings.get('classEditorDate')].join(' ');\n\t\t\t}\n\n\t\t\tif (editObject.TYPE === this.types.NUMBER)\n\t\t\t{\n\t\t\t\tclassName = [className, this.parent.settings.get('classEditorNumber')].join(' ');\n\t\t\t\tattrs.type = 'number';\n\t\t\t}\n\n\t\t\tif (editObject.TYPE === this.types.RANGE)\n\t\t\t{\n\t\t\t\tclassName = [className, this.parent.settings.get('classEditorRange')].join(' ');\n\t\t\t\tattrs.type = 'range';\n\n\t\t\t\tif (BX.type.isPlainObject(editObject.DATA))\n\t\t\t\t{\n\t\t\t\t\tattrs.min = editObject.DATA.MIN || '0';\n\t\t\t\t\tattrs.max = editObject.DATA.MAX || 99999;\n\t\t\t\t\tattrs.step = editObject.DATA.STEP || '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (BX.type.isNotEmptyString(editObject.PLACEHOLDER))\n\t\t\t{\n\t\t\t\tattrs.placeholder = BX.util.htmlspecialchars(editObject.PLACEHOLDER);\n\t\t\t}\n\n\t\t\tif (editObject.DISABLED)\n\t\t\t{\n\t\t\t\tattrs.disabled = true;\n\t\t\t}\n\n\t\t\tclassName = [this.parent.settings.get('classEditor'), className].join(' ');\n\n\t\t\treturn BX.create('input', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName,\n\t\t\t\t\tid: `${editObject.NAME}_control`,\n\t\t\t\t},\n\t\t\t\tattrs,\n\t\t\t});\n\t\t},\n\n\t\tcreateCustom(editObject)\n\t\t{\n\t\t\tlet className = this.parent.settings.get('classEditorCustom');\n\t\t\tclassName = [this.parent.settings.get('classEditor'), className].join(' ');\n\n\t\t\treturn BX.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName,\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-name': editObject.NAME,\n\t\t\t\t},\n\t\t\t\thtml: editObject.VALUE || '',\n\t\t\t});\n\t\t},\n\n\t\tcreateMoney(editObject)\n\t\t{\n\t\t\tconst value = editObject.VALUE;\n\t\t\tconst fieldChildren = [];\n\n\t\t\tconst priceObject = value.PRICE || {};\n\t\t\tpriceObject.PLACEHOLDER = editObject.PLACEHOLDER || '';\n\t\t\tfieldChildren.push(this.createMoneyPrice(priceObject));\n\n\t\t\tif ((BX.type.isArray(editObject.CURRENCY_LIST) && editObject.CURRENCY_LIST.length > 0))\n\t\t\t{\n\t\t\t\tconst currencyObject = value.CURRENCY || {};\n\t\t\t\tcurrencyObject.DATA = {\n\t\t\t\t\tITEMS: editObject.CURRENCY_LIST,\n\t\t\t\t};\n\t\t\t\tcurrencyObject.HTML_ENTITY = editObject.HTML_ENTITY || false;\n\t\t\t\tfieldChildren.push(this.createMoneyCurrency(currencyObject));\n\t\t\t}\n\n\t\t\tif (BX.type.isNotEmptyObject(value.HIDDEN))\n\t\t\t{\n\t\t\t\tfor (const fieldName in value.HIDDEN)\n\t\t\t\t{\n\t\t\t\t\tif (value.HIDDEN.hasOwnProperty(fieldName) && BX.type.isNotEmptyString(fieldName))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst hidden = this.createInput({\n\t\t\t\t\t\t\tNAME: fieldName,\n\t\t\t\t\t\t\tVALUE: value.HIDDEN[fieldName],\n\t\t\t\t\t\t\tTYPE: this.types.TEXT,\n\t\t\t\t\t\t});\n\t\t\t\t\t\thidden.type = 'hidden';\n\t\t\t\t\t\tfieldChildren.push(hidden);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet className = this.parent.settings.get('classEditorMoney');\n\t\t\tclassName = [this.parent.settings.get('classEditor'), className].join(' ');\n\t\t\tconst attrs = value.ATTRIBUTES || {};\n\t\t\tattrs['data-name'] = editObject.NAME;\n\n\t\t\treturn BX.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName,\n\t\t\t\t},\n\t\t\t\tattrs,\n\t\t\t\tchildren: fieldChildren,\n\t\t\t});\n\t\t},\n\n\t\tcreateMoneyPrice(priceObject)\n\t\t{\n\t\t\tpriceObject.TYPE = this.types.NUMBER;\n\n\t\t\tconst priceInput = this.createInput(priceObject);\n\t\t\tpriceInput.classList.add('main-grid-editor-money-price');\n\t\t\tEvent.bind(priceInput, 'change', (event) => {\n\t\t\t\tconst fieldNode = event.target.parentNode;\n\t\t\t\tconst currencyDropdown = fieldNode.querySelector('.main-grid-editor-money-currency');\n\t\t\t\tconst eventData = {\n\t\t\t\t\tfield: fieldNode,\n\t\t\t\t\tvalues: {\n\t\t\t\t\t\tprice: event.target.value || '',\n\t\t\t\t\t\tcurrency: currencyDropdown.dataset.value || '',\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tEventEmitter.emit('Grid.MoneyField::change', eventData);\n\t\t\t});\n\n\t\t\treturn priceInput;\n\t\t},\n\n\t\tcreateMoneyCurrency(currencyObject)\n\t\t{\n\t\t\tconst currencyBlock = this.createDropdown(currencyObject);\n\t\t\tcurrencyBlock.dataset.menuOffsetLeft = 15;\n\t\t\tcurrencyBlock.dataset.menuMaxHeight = 200;\n\t\t\tcurrencyBlock.classList.add('main-grid-editor-money-currency');\n\t\t\tif (currencyObject.DISABLED === true)\n\t\t\t{\n\t\t\t\tcurrencyBlock.classList.remove('main-dropdown');\n\t\t\t\tcurrencyBlock.dataset.disabled = true;\n\t\t\t}\n\n\t\t\tif (!this.isDropdownChangeEventSubscribed)\n\t\t\t{\n\t\t\t\tthis.isDropdownChangeEventSubscribed = true;\n\t\t\t\tEventEmitter.subscribe('Dropdown::change', (event) => {\n\t\t\t\t\tconst [controlId] = event.getData();\n\t\t\t\t\tif (!BX.type.isNotEmptyString(controlId))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst dropdownObject = BX.Main.dropdownManager.getById(controlId);\n\t\t\t\t\tif (dropdownObject.dropdown && dropdownObject.dropdown.classList.contains('main-grid-editor-money-currency'))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst fieldNode = dropdownObject.dropdown.parentNode;\n\t\t\t\t\t\tconst priceField = fieldNode.querySelector('.main-grid-editor-money-price');\n\t\t\t\t\t\tconst eventData = {\n\t\t\t\t\t\t\tfield: fieldNode,\n\t\t\t\t\t\t\tvalues: {\n\t\t\t\t\t\t\t\tprice: priceField.value || '',\n\t\t\t\t\t\t\t\tcurrency: dropdownObject.dropdown.dataset.value || '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tEventEmitter.emit('Grid.MoneyField::change', eventData);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn currencyBlock;\n\t\t},\n\n\t\tcreateOutput(editObject)\n\t\t{\n\t\t\treturn BX.create('output', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: this.parent.settings.get('classEditorOutput') || '',\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\tfor: `${editObject.NAME}_control`,\n\t\t\t\t},\n\t\t\t\ttext: editObject.VALUE || '',\n\t\t\t});\n\t\t},\n\n\t\tgetDropdownValueItemByValue(items, value)\n\t\t{\n\t\t\tconst preparedValue = String(value);\n\t\t\tconst result = items.filter((current) => {\n\t\t\t\treturn String(current.VALUE) === preparedValue;\n\t\t\t});\n\n\t\t\treturn result.length > 0 ? result[0] : items[0];\n\t\t},\n\n\t\tcreateDropdown(editObject)\n\t\t{\n\t\t\tconst valueItem = this.getDropdownValueItemByValue(\n\t\t\t\teditObject.DATA.ITEMS,\n\t\t\t\teditObject.VALUE,\n\t\t\t);\n\t\t\tconst isHtmlEntity = 'HTML_ENTITY' in editObject && editObject.HTML_ENTITY === true;\n\n\t\t\treturn BX.create('div', {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: [\n\t\t\t\t\t\tthis.parent.settings.get('classEditor'),\n\t\t\t\t\t\t'main-dropdown main-grid-editor-dropdown',\n\t\t\t\t\t].join(' '),\n\t\t\t\t\tid: `${editObject.NAME}_control`,\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\tname: editObject.NAME,\n\t\t\t\t\ttabindex: '0',\n\t\t\t\t\t'data-items': JSON.stringify(editObject.DATA.ITEMS),\n\t\t\t\t\t'data-value': valueItem.VALUE,\n\t\t\t\t\t'data-html-entity': editObject.HTML_ENTITY,\n\t\t\t\t},\n\t\t\t\tchildren: [BX.create('span', {\n\t\t\t\t\tprops: { className: 'main-dropdown-inner' },\n\t\t\t\t\thtml: isHtmlEntity ? valueItem.NAME : null,\n\t\t\t\t\ttext: isHtmlEntity ? null : valueItem.NAME,\n\t\t\t\t})],\n\t\t\t});\n\t\t},\n\n\t\tcreateMultiselect(editObject)\n\t\t{\n\t\t\tconst selectedValues = [];\n\t\t\tconst squares = (() => {\n\t\t\t\tif (BX.Type.isArrayFilled(editObject.VALUE))\n\t\t\t\t{\n\t\t\t\t\treturn editObject.VALUE.map((value) => {\n\t\t\t\t\t\tconst item = this.getDropdownValueItemByValue(editObject.DATA.ITEMS, value);\n\t\t\t\t\t\tselectedValues.push(item);\n\t\t\t\t\t\tconst itemName = item.HTML ?? BX.util.htmlspecialchars(item.NAME);\n\t\t\t\t\t\tconst renderedItem = BX.Tag.render`\n\t\t\t\t\t\t\t<span class=\"main-ui-square\">\n\t\t\t\t\t\t\t\t<span class=\"main-ui-square-item\">${itemName}</span>\n\t\t\t\t\t\t\t\t<span class=\"main-ui-item-icon main-ui-square-delete\"></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t`;\n\n\t\t\t\t\t\tBX.Dom.attr(renderedItem, 'data-item', item);\n\n\t\t\t\t\t\treturn renderedItem;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t})();\n\t\t\tconst layout = BX.Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"main-grid-editor main-ui-control main-ui-multi-select\"\n\t\t\t\t\tname=\"${BX.Text.encode(editObject.NAME)}\"\n\t\t\t\t\tid=\"${`${BX.Text.encode(editObject.NAME)}_control`}\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"main-ui-square-container\">${squares}</span>\n\t\t\t\t\t<span class=\"main-ui-hide main-ui-control-value-delete\">\n\t\t\t\t\t\t<span class=\"main-ui-control-value-delete-item\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"main-ui-square-search\">\n\t\t\t\t\t\t<input type=\"text\" class=\"main-ui-square-search-item\">\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tBX.Dom.attr(\n\t\t\t\tlayout,\n\t\t\t\t{\n\t\t\t\t\t'data-params': { isMulti: true },\n\t\t\t\t\t'data-items': editObject.DATA.ITEMS,\n\t\t\t\t\t'data-value': selectedValues,\n\t\t\t\t},\n\t\t\t);\n\n\t\t\treturn layout;\n\t\t},\n\n\t\tvalidateEditObject(editObject)\n\t\t{\n\t\t\treturn (\n\t\t\t\tBX.type.isPlainObject(editObject)\n\t\t\t\t&& ('TYPE' in editObject)\n\t\t\t\t&& ('NAME' in editObject)\n\t\t\t\t&& ('VALUE' in editObject)\n\t\t\t\t&& (!('items' in editObject) || (BX.type.isArray(editObject.items) && editObject.items.length))\n\t\t\t);\n\t\t},\n\n\t\tinitCalendar(event)\n\t\t{\n\t\t\tBX.calendar({ node: event.target, field: event.target });\n\t\t},\n\n\t\tbindOnRangeChange(control, output)\n\t\t{\n\t\t\tfunction bubble(control, output)\n\t\t\t{\n\t\t\t\tBX.html(output, control.value);\n\n\t\t\t\tconst value = parseFloat(control.value);\n\t\t\t\tconst max = parseFloat(control.getAttribute('max'));\n\t\t\t\tconst min = parseFloat(control.getAttribute('min'));\n\t\t\t\tconst thumbWidth = 16;\n\t\t\t\tconst range = (max - min);\n\t\t\t\tconst position = (((value - min) / range) * 100);\n\t\t\t\tconst positionOffset = (Math.round(thumbWidth * position / 100) - (thumbWidth / 2));\n\n\t\t\t\toutput.style.left = `${position}%`;\n\t\t\t\toutput.style.marginLeft = `${-positionOffset}px`;\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tbubble(control, output);\n\t\t\t}, 0);\n\n\t\t\tBX.bind(control, 'input', () => {\n\t\t\t\tbubble(control, output);\n\t\t\t});\n\t\t},\n\n\t\tcreateImageEditor(editObject)\n\t\t{\n\t\t\treturn (new BX.Grid.ImageField(this.parent, editObject)).getLayout();\n\t\t},\n\n\t\tgetEditor(editObject, height)\n\t\t{\n\t\t\tlet control; let\n\t\t\t\tspan;\n\t\t\tconst container = this.createContainer();\n\n\t\t\tif (this.validateEditObject(editObject))\n\t\t\t{\n\t\t\t\teditObject.VALUE = editObject.VALUE === null ? '' : editObject.VALUE;\n\n\t\t\t\tswitch (editObject.TYPE)\n\t\t\t\t{\n\t\t\t\t\tcase this.types.TEXT: {\n\t\t\t\t\t\tcontrol = this.createInput(editObject);\n\t\t\t\t\t\tBX.bind(control, 'click', (event) => { event.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.bind(control, 'keydown', BX.delegate(this._onControlKeydown, this));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.DATE: {\n\t\t\t\t\t\tcontrol = this.createInput(editObject);\n\t\t\t\t\t\tBX.bind(control, 'click', this.initCalendar);\n\t\t\t\t\t\tBX.bind(control, 'click', (event) => { event.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.bind(control, 'keydown', BX.delegate(this._onControlKeydown, this));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.NUMBER: {\n\t\t\t\t\t\tcontrol = this.createInput(editObject);\n\t\t\t\t\t\tBX.bind(control, 'click', (event) => { event.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.bind(control, 'keydown', BX.delegate(this._onControlKeydown, this));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.RANGE: {\n\t\t\t\t\t\tcontrol = this.createInput(editObject);\n\t\t\t\t\t\tspan = this.createOutput(editObject);\n\t\t\t\t\t\tthis.bindOnRangeChange(control, span);\n\t\t\t\t\t\tBX.bind(control, 'click', (event) => { event.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.bind(control, 'keydown', BX.delegate(this._onControlKeydown, this));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.CHECKBOX: {\n\t\t\t\t\t\tcontrol = this.createInput(editObject);\n\t\t\t\t\t\tBX.bind(control, 'click', (event) => { event.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.bind(control, 'keydown', BX.delegate(this._onControlKeydown, this));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.TEXTAREA: {\n\t\t\t\t\t\tcontrol = this.createTextarea(editObject, height);\n\t\t\t\t\t\tBX.bind(control, 'click', (event) => { event.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.bind(control, 'keydown', BX.delegate(this._onControlKeydown, this));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.DROPDOWN: {\n\t\t\t\t\t\tcontrol = this.createDropdown(editObject);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.MULTISELECT: {\n\t\t\t\t\t\tcontrol = this.createMultiselect(editObject);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.IMAGE: {\n\t\t\t\t\t\tcontrol = this.createImageEditor(editObject);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.MONEY: {\n\t\t\t\t\t\tcontrol = this.createMoney(editObject);\n\t\t\t\t\t\tBX.bind(control, 'keydown', BX.delegate(this._onControlKeydown, this));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase this.types.CUSTOM: {\n\t\t\t\t\t\tcontrol = this.createCustom(editObject);\n\n\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\tconst html = editObject.HTML || editObject.VALUE || null;\n\n\t\t\t\t\t\t\tif (html)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst res = BX.processHTML(html);\n\n\t\t\t\t\t\t\t\tres.SCRIPT.forEach((item) => {\n\t\t\t\t\t\t\t\t\tif (item.isInternal && item.JS)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tBX.evalGlobal(item.JS);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tBX.bind(control, 'click', (event) => { event.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tBX.bind(control, 'keydown', BX.delegate(this._onControlKeydown, this));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (BX.type.isDomNode(span))\n\t\t\t{\n\t\t\t\tcontainer.appendChild(span);\n\t\t\t}\n\n\t\t\tif (BX.type.isDomNode(control))\n\t\t\t{\n\t\t\t\tcontainer.appendChild(control);\n\t\t\t}\n\n\t\t\treturn container;\n\t\t},\n\n\t\t_onControlKeydown(event)\n\t\t{\n\t\t\tif (event.code === 'Enter')\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tconst saveButton = BX.Grid.Utils.getBySelector(this.parent.getContainer(), '#grid_save_button > button', true);\n\n\t\t\t\tif (saveButton)\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(saveButton, 'click');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n})();\n","import {Reflection} from 'main.core';\n\n/**\n * @memberOf BX.Grid\n */\nexport class Label\n{\n\tstatic Color = {\n\t\tDEFAULT: 'ui-label-default',\n\t\tDANGER: 'ui-label-danger',\n\t\tSUCCESS: 'ui-label-success',\n\t\tWARNING: 'ui-label-warning',\n\t\tPRIMARY: 'ui-label-primary',\n\t\tSECONDARY: 'ui-label-secondary',\n\t\tLIGHTGREEN: 'ui-label-lightgreen',\n\t\tLIGHTBLUE: 'ui-label-lightblue',\n\t\tLIGHT: 'ui-label-light',\n\t};\n\n\tstatic RemoveButtonType = {\n\t\tINSIDE: 'main-grid-tag-remove-inside',\n\t\tOUTSIDE: 'main-grid-tag-remove-outside',\n\t};\n}\n\nconst namespace = Reflection.namespace('BX.Grid');\nnamespace.Label = Label;\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\tBX.Grid.Loader = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.container = null;\n\t\tthis.windowHeight = null;\n\t\tthis.tbodyPos = null;\n\t\tthis.headerPos = null;\n\t\tthis.lastPosTop = null;\n\t\tthis.lastBottomPos = null;\n\t\tthis.table = null;\n\t\tthis.loader = null;\n\t\tthis.adjustLoaderOffset = this.adjustLoaderOffset.bind(this);\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.Loader.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tthis.table = this.parent.getTable();\n\t\t\tthis.loader = new BX.Loader({\n\t\t\t\ttarget: this.getContainer(),\n\t\t\t});\n\t\t},\n\n\t\tadjustLoaderOffset()\n\t\t{\n\t\t\tthis.windowHeight = BX.height(window);\n\t\t\tthis.tbodyPos = BX.pos(this.table.tBodies[0]);\n\t\t\tthis.headerPos = BX.pos(this.table.tHead);\n\n\t\t\tlet scrollY = window.scrollY;\n\n\t\t\tif (this.parent.isIE())\n\t\t\t{\n\t\t\t\tscrollY = document.documentElement.scrollTop;\n\t\t\t}\n\n\t\t\tlet bottomPos = (scrollY + this.windowHeight) - this.tbodyPos.top;\n\t\t\tlet posTop = scrollY - this.tbodyPos.top;\n\n\t\t\tif (bottomPos > (this.tbodyPos.bottom - this.tbodyPos.top))\n\t\t\t{\n\t\t\t\tbottomPos = this.tbodyPos.bottom - this.tbodyPos.top;\n\t\t\t}\n\n\t\t\tif (posTop < this.headerPos.height)\n\t\t\t{\n\t\t\t\tposTop = this.headerPos.height;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbottomPos -= posTop;\n\t\t\t\tbottomPos += this.headerPos.height;\n\t\t\t}\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tif (posTop !== this.lastPosTop)\n\t\t\t\t{\n\t\t\t\t\tthis.getContainer().style.transform = `translate3d(0px, ${posTop}px, 0)`;\n\t\t\t\t}\n\n\t\t\t\tif (bottomPos !== this.lastBottomPos)\n\t\t\t\t{\n\t\t\t\t\tthis.getContainer().style.height = `${bottomPos}px`;\n\t\t\t\t}\n\n\t\t\t\tthis.lastPosTop = posTop;\n\t\t\t\tthis.lastBottomPos = bottomPos;\n\t\t\t});\n\t\t},\n\n\t\tgetContainer()\n\t\t{\n\t\t\tif (!this.container)\n\t\t\t{\n\t\t\t\tthis.container = BX.Grid.Utils.getByClass(this.parent.getContainer(), this.parent.settings.get('classLoader'), true);\n\t\t\t}\n\n\t\t\treturn this.container;\n\t\t},\n\n\t\tshow()\n\t\t{\n\t\t\tif (!this.loader.isShown())\n\t\t\t{\n\t\t\t\tthis.adjustLoaderOffset();\n\t\t\t\tthis.getContainer().style.display = 'block';\n\t\t\t\tthis.getContainer().style.opacity = '1';\n\t\t\t\tthis.getContainer().style.visibility = 'visible';\n\n\t\t\t\tconst rowsCount = this.parent.getRows().getCountDisplayed();\n\n\t\t\t\tif (rowsCount > 0 && rowsCount <= 2)\n\t\t\t\t{\n\t\t\t\t\tthis.loader.setOptions({ size: 60 });\n\t\t\t\t\tthis.loader.show();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.loader.setOptions({ size: 110 });\n\t\t\t\t\tthis.loader.show();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\thide()\n\t\t{\n\t\t\tif (this.loader.isShown())\n\t\t\t{\n\t\t\t\tthis.adjustLoaderOffset();\n\t\t\t\tthis.loader.hide().then(() => {\n\t\t\t\t\tthis.getContainer().style.display = 'none';\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Main');\n\n\t/**\n\t * Works with grid instances\n\t * @type {{data: Array, push: BX.Main.gridManager.push, getById: BX.Main.gridManager.getById}}\n\t */\n\n\tif (BX.Main.gridManager)\n\t{\n\t\treturn;\n\t}\n\n\tBX.Main.gridManager = {\n\t\tdata: [],\n\n\t\tpush(id, instance)\n\t\t{\n\t\t\tif (BX.type.isNotEmptyString(id) && instance)\n\t\t\t{\n\t\t\t\tconst object = {\n\t\t\t\t\tid,\n\t\t\t\t\tinstance,\n\t\t\t\t\told: null,\n\t\t\t\t};\n\n\t\t\t\tif (this.getById(id) === null)\n\t\t\t\t{\n\t\t\t\t\tthis.data.push(object);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.data[0] = object;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetById(id)\n\t\t{\n\t\t\tconst result = this.data.filter((current) => {\n\t\t\t\treturn (current.id === id) || (current.id.replace('main_grid_', '') === id);\n\t\t\t});\n\n\t\t\treturn result.length === 1 ? result[0] : null;\n\t\t},\n\n\t\tgetInstanceById(id)\n\t\t{\n\t\t\tconst result = this.getById(id);\n\n\t\t\treturn BX.type.isPlainObject(result) ? result.instance : null;\n\t\t},\n\n\t\treload(id, url)\n\t\t{\n\t\t\tconst instance = this.getInstanceById(id);\n\t\t\tif (instance)\n\t\t\t{\n\t\t\t\tinstance.reload(url);\n\t\t\t}\n\t\t},\n\n\t\tgetDataIndex(id)\n\t\t{\n\t\t\tlet result = null;\n\t\t\tthis.data.forEach((item, index) => {\n\t\t\t\tif (item.id === id)\n\t\t\t\t{\n\t\t\t\t\tresult = index;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\n\t\tdestroy(id)\n\t\t{\n\t\t\tif (BX.type.isNotEmptyString(id))\n\t\t\t{\n\t\t\t\tconst grid = this.getInstanceById(id);\n\n\t\t\t\tif (grid instanceof BX.Main.grid)\n\t\t\t\t{\n\t\t\t\t\tgrid.destroy();\n\t\t\t\t\tconst index = this.getDataIndex(id);\n\n\t\t\t\t\tif (index !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete this.data[index];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * Works with message\n\t * @param {BX.Main.grid} parent\n\t * @param {object} types - Types of message\n\t * @constructor\n\t */\n\tBX.Grid.Message = function(parent, types)\n\t{\n\t\tthis.parent = null;\n\t\tthis.types = null;\n\t\tthis.messages = null;\n\t\tthis.popup = null;\n\t\tthis.init(parent, types);\n\t};\n\n\tBX.Grid.Message.prototype = {\n\n\t\t/**\n\t\t * @private\n\t\t * @param {BX.Main.grid} parent\n\t\t * @param {object} types\n\t\t */\n\t\tinit(parent, types)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tthis.types = types;\n\t\t\tthis.show();\n\t\t\tBX.addCustomEvent('BX.Main.grid:paramsUpdated', BX.proxy(this.onUpdated, this));\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tonUpdated()\n\t\t{\n\t\t\tthis.show();\n\t\t},\n\n\t\t/**\n\t\t * Gets data for messages\n\t\t * @return {object[]}\n\t\t */\n\t\tgetData()\n\t\t{\n\t\t\treturn this.parent.arParams.MESSAGES;\n\t\t},\n\n\t\t/**\n\t\t * Checks is need show message\n\t\t * @return {boolean}\n\t\t */\n\t\tisNeedShow()\n\t\t{\n\t\t\treturn this.getData().length > 0;\n\t\t},\n\n\t\t/**\n\t\t * Show message\n\t\t */\n\t\tshow()\n\t\t{\n\t\t\tif (this.isNeedShow())\n\t\t\t{\n\t\t\t\tthis.getPopup().setContent(this.getContent());\n\t\t\t\tthis.getPopup().show();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Gets content for message popup\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetContent()\n\t\t{\n\t\t\tconst data = this.getData();\n\t\t\tlet content = null;\n\n\t\t\tif (BX.type.isArray(data) && data.length > 0)\n\t\t\t{\n\t\t\t\tconst messagesDecl = {\n\t\t\t\t\tblock: 'main-grid-messages',\n\t\t\t\t\tcontent: [],\n\t\t\t\t};\n\n\t\t\t\tdata.forEach((message) => {\n\t\t\t\t\tconst messageDecl = {\n\t\t\t\t\t\tblock: 'main-grid-message',\n\t\t\t\t\t\tmix: `main-grid-message-${message.TYPE.toLowerCase()}`,\n\t\t\t\t\t\tcontent: [],\n\t\t\t\t\t};\n\n\t\t\t\t\tif (BX.type.isNotEmptyString(message.TITLE))\n\t\t\t\t\t{\n\t\t\t\t\t\tmessageDecl.content.push({\n\t\t\t\t\t\t\tblock: 'main-grid-message-title',\n\t\t\t\t\t\t\tcontent: BX.create('div', { html: message.TITLE }).innerText,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (BX.type.isNotEmptyString(message.TEXT))\n\t\t\t\t\t{\n\t\t\t\t\t\tmessageDecl.content.push({\n\t\t\t\t\t\t\tblock: 'main-grid-message-text',\n\t\t\t\t\t\t\tcontent: BX.create('div', { html: message.TEXT }).innerText,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tmessagesDecl.content.push(messageDecl);\n\t\t\t\t});\n\n\t\t\t\tcontent = BX.decl(messagesDecl);\n\t\t\t}\n\n\t\t\treturn content;\n\t\t},\n\n\t\t/**\n\t\t * Gets popup of message\n\t\t * @return {BX.PopupWindow}\n\t\t */\n\t\tgetPopup()\n\t\t{\n\t\t\tif (this.popup === null)\n\t\t\t{\n\t\t\t\tthis.popup = new BX.PopupWindow(\n\t\t\t\t\tthis.getPopupId(),\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\toverlay: 0.3,\n\t\t\t\t\t\tminWidth: 400,\n\t\t\t\t\t\tmaxWidth: 800,\n\t\t\t\t\t\tcontentNoPaddings: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\t\t\ttext: this.parent.getParam('CLOSE'),\n\t\t\t\t\t\t\t\tclassName: 'webform-small-button-blue webform-small-button',\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick()\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn this.popup;\n\t\t},\n\n\t\t/**\n\t\t * Gets popup id\n\t\t * @return {string}\n\t\t */\n\t\tgetPopupId()\n\t\t{\n\t\t\treturn `${this.parent.getContainerId()}-main-grid-message`;\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\tBX.Grid.observer = {\n\t\thandlers: [],\n\t\tadd(node, event, handler, context)\n\t\t{\n\t\t\tBX.bind(node, event, context ? BX.proxy(handler, context) : handler);\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\tBX.Grid.Pagesize = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.Pagesize.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tBX.addCustomEvent('Dropdown::change', BX.proxy(this.onChange, this));\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tBX.removeCustomEvent('Dropdown::change', BX.proxy(this.onChange, this));\n\t\t},\n\n\t\tonChange(id, event, item, dataValue, value)\n\t\t{\n\t\t\tconst self = this;\n\n\t\t\tif (id === `${this.parent.getContainerId()}_${this.parent.settings.get('pageSizeId')}` && value >= 0)\n\t\t\t{\n\t\t\t\tthis.parent.tableFade();\n\t\t\t\tthis.parent.getUserOptions().setPageSize(value, () => {\n\t\t\t\t\tself.parent.reloadTable();\n\t\t\t\t\tBX.onCustomEvent(self.parent.getContainer(), 'Grid::pageSizeChanged', [self.parent]);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.Pagination\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.Pagination = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.container = null;\n\t\tthis.links = null;\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.Pagination.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t},\n\n\t\tgetParent()\n\t\t{\n\t\t\treturn this.parent;\n\t\t},\n\n\t\tgetContainer()\n\t\t{\n\t\t\tif (!this.container)\n\t\t\t{\n\t\t\t\tthis.container = BX.Grid.Utils.getByClass(this.getParent().getContainer(), this.getParent().settings.get('classPagination'), true);\n\t\t\t}\n\n\t\t\treturn this.container;\n\t\t},\n\n\t\tgetLinks()\n\t\t{\n\t\t\tconst self = this;\n\t\t\tconst result = BX.Grid.Utils.getByTag(this.getContainer(), 'a');\n\n\t\t\tthis.links = [];\n\n\t\t\tif (result)\n\t\t\t{\n\t\t\t\tthis.links = result.map((current) => {\n\t\t\t\t\treturn new BX.Grid.Element(current, self.getParent());\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.links;\n\t\t},\n\n\t\tgetLink(node)\n\t\t{\n\t\t\tlet result = null;\n\t\t\tlet filter;\n\n\t\t\tif (BX.type.isDomNode(node))\n\t\t\t{\n\t\t\t\tfilter = this.getLinks().filter((current) => {\n\t\t\t\t\treturn node === current.getNode();\n\t\t\t\t});\n\n\t\t\t\tif (filter.length > 0)\n\t\t\t\t{\n\t\t\t\t\tresult = filter[0];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.PinHeader\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.PinHeader = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.table = null;\n\t\tthis.header = null;\n\t\tthis.container = null;\n\t\tthis.parentNodeResizeObserver = null;\n\n\t\tconst adminPanel = this.getAdminPanel();\n\n\t\tif (adminPanel)\n\t\t{\n\t\t\tthis.mo = new MutationObserver(this.onAdminPanelMutation.bind(this));\n\t\t\tthis.mo.observe(document.documentElement, { attributes: true });\n\t\t}\n\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.PinHeader.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tthis.rect = BX.pos(this.parent.getHead());\n\t\t\tthis.gridRect = BX.pos(this.parent.getTable());\n\n\t\t\tlet workArea = BX.Grid.Utils.getBySelector(document, '#workarea-content', true);\n\n\t\t\tif (!workArea)\n\t\t\t{\n\t\t\t\tworkArea = this.parent.getContainer().parentNode;\n\t\t\t\tworkArea = workArea ? workArea.parentNode : workArea;\n\t\t\t}\n\n\t\t\tif (workArea)\n\t\t\t{\n\t\t\t\tthis.parentNodeResizeObserver = new BX.ResizeObserver(BX.proxy(this.refreshRect, this));\n\t\t\t\tthis.parentNodeResizeObserver.observe(workArea);\n\t\t\t}\n\n\t\t\tthis.create(true);\n\n\t\t\tdocument.addEventListener('scroll', BX.proxy(this._onScroll, this), BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t\tdocument.addEventListener('resize', BX.proxy(this._onResize, this), BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t\tBX.addCustomEvent('Grid::updated', BX.proxy(this._onGridUpdate, this));\n\t\t\tBX.addCustomEvent('Grid::resize', BX.proxy(this._onGridUpdate, this));\n\t\t\tBX.bind(window, 'resize', BX.proxy(this._onGridUpdate, this));\n\t\t},\n\n\t\trefreshRect()\n\t\t{\n\t\t\tthis.gridRect = BX.pos(this.parent.getTable());\n\t\t\tthis.rect = BX.pos(this.parent.getHead());\n\t\t},\n\n\t\t_onGridUpdate()\n\t\t{\n\t\t\tconst isPinned = this.isPinned();\n\n\t\t\tBX.remove(this.getContainer());\n\t\t\tthis.create();\n\n\t\t\tisPinned && this.pin();\n\n\t\t\tthis.table = null;\n\t\t\tthis.refreshRect();\n\n\t\t\tthis._onScroll();\n\n\t\t\tBX.onCustomEvent(window, 'Grid::headerUpdated', []);\n\t\t},\n\n\t\tcreate(async)\n\t\t{\n\t\t\tconst cells = BX.Grid.Utils.getByTag(this.parent.getHead(), 'th');\n\t\t\tconst cloneThead = BX.clone(this.parent.getHead());\n\t\t\tconst cloneCells = BX.Grid.Utils.getByTag(cloneThead, 'th');\n\n\t\t\tconst resizeCloneCells = function()\n\t\t\t{\n\t\t\t\tcells.forEach(\n\t\t\t\t\t(cell, index) => {\n\t\t\t\t\t\tlet width = BX.width(cell);\n\n\t\t\t\t\t\tif (index > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twidth -= parseInt(BX.style(cell, 'border-left-width'));\n\t\t\t\t\t\t\twidth -= parseInt(BX.style(cell, 'border-right-width'));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcloneCells[index].firstElementChild && (cloneCells[index].firstElementChild.style.width = `${width}px`);\n\n\t\t\t\t\t\tif (cells.length - 1 > index)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcloneCells[index].style.width = `${width}px`;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tasync ? setTimeout(resizeCloneCells, 0) : resizeCloneCells();\n\n\t\t\tthis.container = BX.decl({\n\t\t\t\tblock: 'main-grid-fixed-bar',\n\t\t\t\tmix: 'main-grid-fixed-top',\n\t\t\t\tattrs: {\n\t\t\t\t\tstyle: `width: ${BX.width(this.parent.getContainer())}px`,\n\t\t\t\t},\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-grid-table',\n\t\t\t\t\ttag: 'table',\n\t\t\t\t\tcontent: cloneThead,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.container.hidden = true;\n\n\t\t\tthis.parent.getWrapper().appendChild(this.container);\n\t\t},\n\n\t\tgetContainer()\n\t\t{\n\t\t\treturn this.container;\n\t\t},\n\n\t\tgetFixedTable()\n\t\t{\n\t\t\treturn this.table || (this.table = BX.Grid.Utils.getByTag(this.getContainer(), 'table', true));\n\t\t},\n\n\t\tgetAdminPanel()\n\t\t{\n\t\t\tif (!this.adminPanel)\n\t\t\t{\n\t\t\t\tthis.adminPanel = document.querySelector('.adm-header');\n\t\t\t}\n\n\t\t\treturn this.adminPanel;\n\t\t},\n\n\t\tisAdminPanelPinned()\n\t\t{\n\t\t\treturn BX.hasClass(document.documentElement, 'adm-header-fixed');\n\t\t},\n\n\t\tgetPinOffset()\n\t\t{\n\t\t\tconst adminPanel = this.getAdminPanel();\n\n\t\t\tif (adminPanel && this.isAdminPanelPinned())\n\t\t\t{\n\t\t\t\treturn BX.Text.toNumber(BX.style(adminPanel, 'height'));\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t},\n\n\t\tpin()\n\t\t{\n\t\t\tconst container = this.getContainer();\n\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\tcontainer.hidden = false;\n\t\t\t}\n\n\t\t\tBX.onCustomEvent(window, 'Grid::headerPinned', []);\n\t\t},\n\n\t\tunpin()\n\t\t{\n\t\t\tconst container = this.getContainer();\n\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\tcontainer.hidden = true;\n\t\t\t}\n\n\t\t\tBX.onCustomEvent(window, 'Grid::headerUnpinned', []);\n\t\t},\n\n\t\tstopPin()\n\t\t{\n\t\t\tBX.Grid.Utils.styleForEach([this.getContainer()], {\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: (`${this.gridRect.bottom - this.rect.height - this.gridRect.top}px`),\n\t\t\t\t'box-shadow': 'none',\n\t\t\t});\n\t\t},\n\n\t\tstartPin()\n\t\t{\n\t\t\tBX.Grid.Utils.styleForEach([this.getContainer()], {\n\t\t\t\tposition: 'fixed',\n\t\t\t\ttop: `${this.getPinOffset()}px`,\n\t\t\t\t'box-shadow': '',\n\t\t\t});\n\t\t},\n\n\t\tisPinned()\n\t\t{\n\t\t\treturn !this.getContainer().hidden;\n\t\t},\n\n\t\t_onScroll()\n\t\t{\n\t\t\tlet scrollY = 0;\n\n\t\t\tif (this.scrollRect)\n\t\t\t{\n\t\t\t\tscrollY = this.scrollRect.scrollTop;\n\t\t\t}\n\t\t\telse\n\t\t\t\tif (document.scrollingElement)\n\t\t\t\t{\n\t\t\t\t\tthis.scrollRect = document.scrollingElement;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tif (document.documentElement.scrollTop > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.scrollRect = document.documentElement;\n\t\t\t\t\t}\n\t\t\t\t\telse if (document.body.scrollTop > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.scrollRect = document.body;\n\t\t\t\t\t}\n\n\t\t\tif (this.gridRect.bottom > (scrollY + this.rect.height))\n\t\t\t{\n\t\t\t\tthis.startPin();\n\n\t\t\t\tconst offset = this.getPinOffset();\n\n\t\t\t\tif ((this.rect.top - offset) <= scrollY)\n\t\t\t\t{\n\t\t\t\t\t!this.isPinned() && this.pin();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isPinned() && this.unpin();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stopPin();\n\t\t\t}\n\t\t},\n\n\t\tonAdminPanelMutation()\n\t\t{\n\t\t\tthis._onScroll();\n\t\t},\n\n\t\t_onResize()\n\t\t{\n\t\t\tthis.rect = BX.pos(this.parent.getHead());\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.PinPanel\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.PinPanel = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.panel = null;\n\t\tthis.isSelected = null;\n\t\tthis.offset = null;\n\t\tthis.animationDuration = null;\n\t\tthis.pinned = false;\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.PinPanel.prototype = {\n\t\tinit(parent) {\n\t\t\tthis.parent = parent;\n\t\t\tthis.offset = 10;\n\t\t\tthis.animationDuration = 200;\n\t\t\tthis.panel = this.getPanel();\n\t\t\tthis.bindOnRowsEvents();\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tthis.unbindOnRowsEvents();\n\t\t},\n\n\t\tbindOnRowsEvents()\n\t\t{\n\t\t\tBX.addCustomEvent('Grid::thereSelectedRows', BX.proxy(this._onThereSelectedRows, this));\n\t\t\tBX.addCustomEvent('Grid::allRowsSelected', BX.proxy(this._onThereSelectedRows, this));\n\t\t\tBX.addCustomEvent('Grid::noSelectedRows', BX.proxy(this._onNoSelectedRows, this));\n\t\t\tBX.addCustomEvent('Grid::allRowsUnselected', BX.proxy(this._onNoSelectedRows, this));\n\t\t\tBX.addCustomEvent('Grid::updated', BX.proxy(this._onNoSelectedRows, this));\n\t\t},\n\n\t\tunbindOnRowsEvents()\n\t\t{\n\t\t\tBX.removeCustomEvent('Grid::thereSelectedRows', BX.proxy(this._onThereSelectedRows, this));\n\t\t\tBX.removeCustomEvent('Grid::allRowsSelected', BX.proxy(this._onThereSelectedRows, this));\n\t\t\tBX.removeCustomEvent('Grid::noSelectedRows', BX.proxy(this._onNoSelectedRows, this));\n\t\t\tBX.removeCustomEvent('Grid::allRowsUnselected', BX.proxy(this._onNoSelectedRows, this));\n\t\t\tBX.removeCustomEvent('Grid::updated', BX.proxy(this._onNoSelectedRows, this));\n\t\t},\n\n\t\tbindOnWindowEvents()\n\t\t{\n\t\t\tBX.bind(window, 'resize', BX.proxy(this._onResize, this));\n\t\t\tdocument.addEventListener('scroll', BX.proxy(this._onScroll, this), BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t},\n\n\t\tunbindOnWindowEvents()\n\t\t{\n\t\t\tBX.unbind(window, 'resize', BX.proxy(this._onResize, this));\n\t\t\tdocument.removeEventListener('scroll', BX.proxy(this._onScroll, this), BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t},\n\n\t\tgetPanel() {\n\t\t\tthis.panel = this.panel || this.parent.getActionsPanel().getPanel();\n\n\t\t\treturn this.panel;\n\t\t},\n\n\t\tgetScrollBottom()\n\t\t{\n\t\t\treturn (BX.scrollTop(window) + this.getWindowHeight());\n\t\t},\n\n\t\tgetPanelRect()\n\t\t{\n\t\t\tif (!BX.type.isPlainObject(this.panelRect))\n\t\t\t{\n\t\t\t\tthis.panelRect = BX.pos(this.getPanel());\n\t\t\t}\n\n\t\t\treturn this.panelRect;\n\t\t},\n\n\t\tgetPanelPrevBottom()\n\t\t{\n\t\t\tconst prev = BX.previousSibling(this.getPanel());\n\n\t\t\treturn BX.pos(prev).bottom + parseFloat(BX.style(prev, 'margin-bottom'));\n\t\t},\n\n\t\tgetWindowHeight()\n\t\t{\n\t\t\tthis.windowHeight = this.windowHeight || BX.height(window);\n\n\t\t\treturn this.windowHeight;\n\t\t},\n\n\t\tpinPanel(withAnimation)\n\t\t{\n\t\t\tconst panel = this.getPanel();\n\t\t\tconst width = BX.width(this.getPanel().parentNode);\n\t\t\tconst height = BX.height(this.getPanel().parentNode);\n\t\t\tconst bodyRect = BX.pos(this.parent.getBody());\n\t\t\tconst offset = this.getStartDiffPanelPosition();\n\n\t\t\tpanel.parentNode.style.setProperty('height', `${height}px`);\n\n\t\t\tpanel.style.setProperty('transform', `translateY(${offset}px)`);\n\t\t\tpanel.classList.add('main-grid-fixed-bottom');\n\t\t\tpanel.style.setProperty('width', `${width}px`);\n\t\t\tpanel.style.removeProperty('position');\n\t\t\tpanel.style.removeProperty('top');\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tif (withAnimation !== false)\n\t\t\t\t{\n\t\t\t\t\tpanel.style.setProperty('transition', 'transform 200ms ease');\n\t\t\t\t}\n\n\t\t\t\tpanel.style.setProperty('transform', 'translateY(0)');\n\t\t\t});\n\n\t\t\tif (this.isNeedPinAbsolute() && !this.absolutePin)\n\t\t\t{\n\t\t\t\tthis.absolutePin = true;\n\t\t\t\tpanel.style.removeProperty('transition');\n\t\t\t\tpanel.style.setProperty('position', 'absolute');\n\t\t\t\tpanel.style.setProperty('top', `${bodyRect.top}px`);\n\t\t\t}\n\n\t\t\tif (!this.isNeedPinAbsolute() && this.absolutePin)\n\t\t\t{\n\t\t\t\tthis.absolutePin = false;\n\t\t\t}\n\n\t\t\tthis.adjustPanelPosition();\n\t\t\tthis.pinned = true;\n\t\t},\n\n\t\tunpinPanel(withAnimation)\n\t\t{\n\t\t\tconst panel = this.getPanel();\n\t\t\tconst panelRect = BX.pos(panel);\n\t\t\tconst parentRect = BX.pos(panel.parentNode);\n\t\t\tconst offset = Math.abs(panelRect.bottom - parentRect.bottom);\n\n\t\t\tif (withAnimation !== false)\n\t\t\t{\n\t\t\t\tpanel.style.setProperty('transition', 'transform 200ms ease');\n\t\t\t}\n\n\t\t\tconst translateOffset = offset < panelRect.height ? `${offset}px` : '100%';\n\t\t\tpanel.style.setProperty('transform', `translateY(${translateOffset})`);\n\n\t\t\tconst delay = function(cb, delay)\n\t\t\t{\n\t\t\t\tif (withAnimation !== false)\n\t\t\t\t{\n\t\t\t\t\treturn setTimeout(cb, delay);\n\t\t\t\t}\n\n\t\t\t\tcb();\n\t\t\t};\n\n\t\t\tdelay(() => {\n\t\t\t\tpanel.parentNode.style.removeProperty('height');\n\t\t\t\tpanel.classList.remove('main-grid-fixed-bottom');\n\t\t\t\tpanel.style.removeProperty('transition');\n\t\t\t\tpanel.style.removeProperty('transform');\n\t\t\t\tpanel.style.removeProperty('width');\n\t\t\t\tpanel.style.removeProperty('position');\n\t\t\t\tpanel.style.removeProperty('top');\n\t\t\t}, withAnimation === false ? 0 : 200);\n\n\t\t\tthis.pinned = false;\n\t\t},\n\n\t\tisSelectedRows()\n\t\t{\n\t\t\treturn this.isSelected;\n\t\t},\n\n\t\tisNeedPinAbsolute()\n\t\t{\n\t\t\treturn (\n\t\t\t\t((BX.pos(this.parent.getBody()).top + this.getPanelRect().height) >= this.getScrollBottom())\n\t\t\t);\n\t\t},\n\n\t\tisNeedPin()\n\t\t{\n\t\t\treturn (this.getScrollBottom() - this.getPanelRect().height) <= this.getPanelPrevBottom();\n\t\t},\n\n\t\tadjustPanelPosition()\n\t\t{\n\t\t\tconst scrollX = window.pageXOffset;\n\t\t\tthis.lastScrollX = this.lastScrollX === null ? scrollX : this.lastScrollX;\n\n\t\t\tBX.Grid.Utils.requestAnimationFrame(BX.proxy(function() {\n\t\t\t\tif (scrollX !== this.lastScrollX)\n\t\t\t\t{\n\t\t\t\t\tconst panelPos = this.getPanelRect();\n\t\t\t\t\tBX.style(this.getPanel(), 'left', `${panelPos.left - scrollX}px`);\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\tthis.lastScrollX = scrollX;\n\t\t},\n\n\t\tpinController(withAnimation)\n\t\t{\n\t\t\tif (this.getPanel())\n\t\t\t{\n\t\t\t\tif (!this.isPinned() && this.isNeedPin() && this.isSelectedRows())\n\t\t\t\t{\n\t\t\t\t\treturn this.pinPanel(withAnimation);\n\t\t\t\t}\n\n\t\t\t\tif (this.isPinned() && !this.isNeedPin() || !this.isSelectedRows())\n\t\t\t\t{\n\t\t\t\t\tthis.unpinPanel(withAnimation);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetEndDiffPanelPosition()\n\t\t{\n\t\t\tconst panelPos = BX.pos(this.getPanel());\n\t\t\tconst prevPanelPos = BX.pos(BX.previousSibling(this.getPanel()));\n\t\t\tconst scrollTop = BX.scrollTop(window);\n\t\t\tconst scrollBottom = scrollTop + BX.height(window);\n\t\t\tlet diff = panelPos.height + this.offset;\n\t\t\tconst prevPanelBottom = (prevPanelPos.bottom + parseFloat(BX.style(this.getPanel(), 'margin-top')));\n\n\t\t\tif (prevPanelBottom < scrollBottom && (prevPanelBottom + panelPos.height) > scrollBottom)\n\t\t\t{\n\t\t\t\tdiff = Math.abs(scrollBottom - (prevPanelBottom + panelPos.height));\n\t\t\t}\n\n\t\t\treturn diff;\n\t\t},\n\n\t\tgetStartDiffPanelPosition()\n\t\t{\n\t\t\tconst panelPos = BX.pos(this.getPanel());\n\t\t\tconst scrollTop = BX.scrollTop(window);\n\t\t\tconst scrollBottom = scrollTop + BX.height(window);\n\t\t\tlet diff = panelPos.height;\n\n\t\t\tif (panelPos.bottom > scrollBottom && panelPos.top < scrollBottom)\n\t\t\t{\n\t\t\t\tdiff = panelPos.bottom - scrollBottom;\n\t\t\t}\n\n\t\t\treturn diff;\n\t\t},\n\n\t\tisPinned()\n\t\t{\n\t\t\treturn this.pinned;\n\t\t},\n\n\t\t_onThereSelectedRows()\n\t\t{\n\t\t\tthis.bindOnWindowEvents();\n\t\t\tthis.isSelected = true;\n\n\t\t\tif (this.lastIsSelected)\n\t\t\t{\n\t\t\t\tthis.pinController();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.lastIsSelected = true;\n\t\t\t\tthis.pinController();\n\t\t\t}\n\t\t},\n\n\t\t_onNoSelectedRows()\n\t\t{\n\t\t\tthis.unbindOnWindowEvents();\n\t\t\tthis.isSelected = false;\n\t\t\tthis.pinController();\n\t\t\tthis.lastIsSelected = false;\n\t\t},\n\n\t\t_onScroll()\n\t\t{\n\t\t\tthis.pinController(false);\n\t\t},\n\n\t\t_onResize()\n\t\t{\n\t\t\tthis.windowHeight = BX.height(window);\n\t\t\tthis.panel = this.parent.getActionsPanel().getPanel();\n\t\t\tthis.panelRect = this.getPanel().getBoundingClientRect();\n\t\t\tthis.pinController(false);\n\t\t},\n\t};\n})();\n","import { EventEmitter } from 'main.core.events';\nimport { Dom, Reflection, Type, Event, Tag, Text } from 'main.core';\n\ntype RealtimeOptions = {\n\tgrid: BX.Main.grid,\n};\n\ntype AddRowOptions = {\n\tid: number | string,\n\tactions?: Array<{[key: string]: any}>,\n\tcolumns?: {[key: string]: any},\n\tcellActions?: {[key: string]: any},\n\tappend?: true,\n\tprepend?: true,\n\tinsertBefore?: number | string,\n\tinsertAfter?: number | string,\n\tanimation?: boolean,\n\tcounters?: {\n\t\t[colId: string]: {\n\t\t\ttype: $Values<BX.Grid.Counters.Type>,\n\t\t\tcolor?: $Values<BX.Grid.Counters.Color>,\n\t\t\tvalue: string | number,\n\t\t},\n\t},\n};\n\ntype ShowStubOptions = {\n\tcontent?: HTMLElement | string | {title?: string, description?: string},\n};\n\n/**\n * @memberOf BX.Grid\n */\nexport class Realtime extends EventEmitter\n{\n\tconstructor(options: RealtimeOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Grid.Realtime');\n\t\tthis.options = { ...options };\n\t}\n\n\taddRow(options: AddRowOptions)\n\t{\n\t\tconst { grid } = this.options;\n\t\tconst row = grid.getTemplateRow();\n\t\trow.makeCountable();\n\t\tgrid.hideEmptyStub();\n\n\t\tif (Type.isNumber(options.id) || Type.isStringFilled(options.id))\n\t\t{\n\t\t\trow.setId(options.id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new ReferenceError('id is not number or string');\n\t\t}\n\n\t\tif (Type.isArrayFilled(options.actions))\n\t\t{\n\t\t\trow.setActions(options.actions);\n\t\t}\n\n\t\tif (Type.isPlainObject(options.columns))\n\t\t{\n\t\t\trow.setCellsContent(options.columns);\n\t\t}\n\n\t\tif (Type.isPlainObject(options.cellActions))\n\t\t{\n\t\t\trow.setCellActions(options.cellActions);\n\t\t}\n\n\t\tif (Type.isPlainObject(options.counters))\n\t\t{\n\t\t\tconst preparedCounters = Object.entries(options.counters).reduce((acc, [columnId, counter]) => {\n\t\t\t\tif (Type.isPlainObject(counter))\n\t\t\t\t{\n\t\t\t\t\tacc[columnId] = {\n\t\t\t\t\t\t...counter,\n\t\t\t\t\t\tanimation: Text.toBoolean(counter.animation),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\n\t\t\trow.setCounters(preparedCounters);\n\t\t}\n\n\t\tif (options.prepend === true)\n\t\t{\n\t\t\trow.prependTo(grid.getBody());\n\t\t}\n\t\telse if (options.append === true)\n\t\t{\n\t\t\trow.appendTo(grid.getBody());\n\t\t}\n\t\telse if (Type.isNumber(options.insertBefore) || Type.isStringFilled(options.insertBefore))\n\t\t{\n\t\t\tconst targetRow = grid.getRows().getById(options.insertBefore);\n\t\t\tif (targetRow)\n\t\t\t{\n\t\t\t\tBX.Dom.insertBefore(row.getNode(), targetRow.getNode());\n\t\t\t}\n\t\t}\n\t\telse if (Type.isNumber(options.insertAfter) || Type.isStringFilled(options.insertAfter))\n\t\t{\n\t\t\tconst targetRow = grid.getRows().getById(options.insertAfter);\n\t\t\tif (targetRow)\n\t\t\t{\n\t\t\t\tBX.Dom.insertAfter(row.getNode(), targetRow.getNode());\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new ReferenceError('prepend, append, insertBefore or insertAfter not filled');\n\t\t}\n\n\t\trow.show();\n\n\t\tif (options.animation !== false)\n\t\t{\n\t\t\trow.enableAbsolutePosition();\n\n\t\t\tconst movedElements = grid.getRows().getSourceBodyChild().filter((currentRow) => {\n\t\t\t\treturn currentRow.rowIndex > row.getIndex();\n\t\t\t});\n\n\t\t\tconst fakeRowNode = document.createElement('tr');\n\t\t\tDom.style(fakeRowNode, {\n\t\t\t\theight: '0px',\n\t\t\t\ttransition: '200ms height linear',\n\t\t\t});\n\t\t\tDom.append(fakeRowNode, grid.getBody());\n\n\t\t\tconst offset = row.getHeight();\n\t\t\tDom.style(fakeRowNode, 'height', `${offset}px`);\n\t\t\tmovedElements.forEach((element) => {\n\t\t\t\tDom.style(element, {\n\t\t\t\t\ttransition: '200ms transform linear',\n\t\t\t\t\ttransform: `translateY(${offset}px) translateZ(0)`,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tDom.addClass(row.getNode(), 'main-ui-grid-show-new-row');\n\n\t\t\tEvent.bind(row.getNode(), 'animationend', (event: AnimationEvent) => {\n\t\t\t\tif (event.animationName === 'showNewRow')\n\t\t\t\t{\n\t\t\t\t\tmovedElements.forEach((element) => {\n\t\t\t\t\t\tDom.style(element, {\n\t\t\t\t\t\t\ttransition: null,\n\t\t\t\t\t\t\ttransform: null,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tDom.remove(fakeRowNode);\n\t\t\t\t\trow.disableAbsolutePosition();\n\n\t\t\t\t\tDom.removeClass(row.getNode(), 'main-ui-grid-show-new-row');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tgrid.getRows().reset();\n\t\tgrid.bindOnRowEvents();\n\t\tgrid.updateCounterDisplayed();\n\t\tgrid.updateCounterSelected();\n\n\t\tif (grid.getParam('ALLOW_ROWS_SORT'))\n\t\t{\n\t\t\tgrid.rowsSortable.reinit();\n\t\t}\n\n\t\tif (grid.getParam('ALLOW_COLUMNS_SORT'))\n\t\t{\n\t\t\tgrid.colsSortable.reinit();\n\t\t}\n\t}\n\n\tshowStub(options: ShowStubOptions = {})\n\t{\n\t\tconst tr = document.createElement('tr');\n\t\tDom.addClass(tr, 'main-grid-row main-grid-row-empty main-grid-row-body');\n\n\t\tconst td = document.createElement('td');\n\t\tDom.addClass(td, 'main-grid-cell main-grid-cell-center');\n\t\tconst colspan = this.options.grid.getRows().getHeadFirstChild().getCells().length;\n\t\tDom.attr(td, 'colspan', colspan);\n\n\t\tconst content = (() => {\n\t\t\tif (Type.isPlainObject(options.content))\n\t\t\t{\n\t\t\t\tconst result = [];\n\t\t\t\tif (Type.isStringFilled(options.content.title))\n\t\t\t\t{\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<div class=\"main-grid-empty-block-title\">\n\t\t\t\t\t\t\t\t${options.content.title}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isStringFilled(options.content.description))\n\t\t\t\t{\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<div class=\"main-grid-empty-block-description\">\n\t\t\t\t\t\t\t\t${options.content.description}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tType.isStringFilled(options.content)\n\t\t\t\t|| Type.isDomNode(options.content)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn options.content;\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\tTag.render`<div class=\"main-grid-empty-image\"></div>`,\n\t\t\t\tTag.render`<div class=\"main-grid-empty-text\">${this.options.grid.getParam('EMPTY_STUB_TEXT')}</div>`,\n\t\t\t];\n\t\t})();\n\n\t\tconst container = Tag.render`\n\t\t\t<div class=\"main-grid-empty-block\">\n\t\t\t\t<div class=\"main-grid-empty-inner\">\n\t\t\t\t\t${content}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(container, td);\n\t\tDom.append(td, tr);\n\n\t\tconst oldStub = this.options.grid.getBody().querySelector('.main-grid-row-empty');\n\t\tif (oldStub)\n\t\t{\n\t\t\tDom.remove(oldStub);\n\t\t}\n\n\t\tDom.append(tr, this.options.grid.getBody());\n\n\t\tthis.options.grid.getRows().getBodyChild().forEach((row) => {\n\t\t\trow.hide();\n\t\t});\n\n\t\tthis.options.grid.adjustEmptyTable(this.options.grid.getRows().getSourceBodyChild());\n\t}\n}\n\nconst namespace = Reflection.namespace('BX.Grid');\nnamespace.Realtime = Realtime;\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\tBX.Grid.Resize = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.lastRegisterButtons = null;\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.Resize.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\n\t\t\tBX.addCustomEvent(window, 'Grid::updated', BX.proxy(this.registerTableButtons, this));\n\t\t\tBX.addCustomEvent(window, 'Grid::headerUpdated', BX.proxy(this.registerPinnedTableButtons, this));\n\n\t\t\tthis.registerTableButtons();\n\t\t\tthis.registerPinnedTableButtons();\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tBX.removeCustomEvent(window, 'Grid::updated', BX.proxy(this.registerTableButtons, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::headerUpdated', BX.proxy(this.registerPinnedTableButtons, this));\n\t\t\tBX.type.isArray(this.lastRegisterButtons) && this.lastRegisterButtons.forEach(jsDD.unregisterObject);\n\t\t\t(this.getButtons() || []).forEach(jsDD.unregisterObject);\n\t\t},\n\n\t\tregisterTableButtons()\n\t\t{\n\t\t\t(this.getButtons() || []).forEach(this.register, this);\n\t\t\tthis.registerPinnedTableButtons();\n\t\t},\n\n\t\tregister(item)\n\t\t{\n\t\t\tif (BX.type.isDomNode(item))\n\t\t\t{\n\t\t\t\titem.onbxdragstart = BX.delegate(this._onDragStart, this);\n\t\t\t\titem.onbxdragstop = BX.delegate(this._onDragEnd, this);\n\t\t\t\titem.onbxdrag = BX.delegate(this._onDrag, this);\n\t\t\t\tjsDD.registerObject(item);\n\t\t\t}\n\t\t},\n\n\t\tregisterPinnedTableButtons()\n\t\t{\n\t\t\tif (this.parent.getParam('ALLOW_PIN_HEADER'))\n\t\t\t{\n\t\t\t\tconst pinnedTableButtons = this.getPinnedTableButtons();\n\n\t\t\t\tif (BX.type.isArray(this.lastRegisterButtons) && this.lastRegisterButtons.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.lastRegisterButtons.forEach(jsDD.unregisterObject);\n\t\t\t\t}\n\n\t\t\t\tthis.lastRegisterButtons = pinnedTableButtons;\n\n\t\t\t\t(this.getPinnedTableButtons() || []).forEach(this.register, this);\n\t\t\t}\n\t\t},\n\n\t\tgetButtons()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.parent.getRows().getHeadFirstChild().getNode(), this.parent.settings.get('classResizeButton'));\n\t\t},\n\n\t\tgetPinnedTableButtons()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(this.parent.getPinHeader().getFixedTable(), this.parent.settings.get('classResizeButton'));\n\t\t},\n\n\t\t_onDragStart()\n\t\t{\n\t\t\tconst cell = BX.findParent(jsDD.current_node, { className: this.parent.settings.get('classHeadCell') });\n\t\t\tconst cells = this.parent.getRows().getHeadFirstChild().getCells();\n\t\t\tconst cellsKeys = Object.keys(cells);\n\t\t\tlet cellContainer;\n\n\t\t\tthis.__overlay = BX.create('div', { props: { className: 'main-grid-cell-overlay' } });\n\t\t\tBX.append(this.__overlay, cell);\n\t\t\tthis.__resizeCell = cell.cellIndex;\n\n\t\t\tcellsKeys.forEach((key) => {\n\t\t\t\tif (!BX.hasClass(cells[key], 'main-grid-special-empty'))\n\t\t\t\t{\n\t\t\t\t\tlet width = BX.width(cells[key]);\n\n\t\t\t\t\tif (key > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\twidth -= parseInt(BX.style(cells[key], 'border-left-width'));\n\t\t\t\t\t\twidth -= parseInt(BX.style(cells[key], 'border-right-width'));\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.width(cells[key], width);\n\t\t\t\t\tcellContainer = BX.firstChild(cells[key]);\n\t\t\t\t\tBX.width(cellContainer, width);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_onDrag(x)\n\t\t{\n\t\t\tconst table = this.parent.getTable();\n\t\t\tconst fixedTable = this.parent.getParam('ALLOW_PIN_HEADER') ? this.parent.getPinHeader().getFixedTable() : null;\n\t\t\tconst cell = table.rows[0].cells[this.__resizeCell];\n\t\t\tlet fixedCell; let\n\t\t\t\tfixedCellContainer;\n\n\t\t\tconst cpos = BX.pos(cell);\n\t\t\tconst cellAttrWidth = parseFloat(cell.style.width);\n\t\t\tlet sX;\n\n\t\t\tx -= cpos.left;\n\t\t\tsX = x;\n\n\t\t\tif (cpos.width > cellAttrWidth)\n\t\t\t{\n\t\t\t\tx = cpos.width;\n\t\t\t}\n\n\t\t\tx = sX > x ? sX : x;\n\n\t\t\tx = Math.max(x, 80);\n\n\t\t\tif (x !== cpos.width)\n\t\t\t{\n\t\t\t\tconst fixedCells = this.parent.getAllRows()[0]\n\t\t\t\t\t.querySelectorAll('.main-grid-fixed-column').length;\n\t\t\t\tlet column = this.parent.getColumnByIndex(this.__resizeCell - fixedCells);\n\n\t\t\t\t// Resize current column\n\t\t\t\tcolumn.forEach((item) => {\n\t\t\t\t\titem.style.width = `${x}px`;\n\t\t\t\t\titem.style.minWidth = `${x}px`;\n\t\t\t\t\titem.style.maxWidth = `${x}px`;\n\t\t\t\t\tBX.Dom.style(item.firstElementChild, 'width', `${x}px`);\n\t\t\t\t});\n\n\t\t\t\t// Resize false columns\n\t\t\t\tif (column[0].classList.contains('main-grid-fixed-column'))\n\t\t\t\t{\n\t\t\t\t\tcolumn = this.parent.getColumnByIndex(this.__resizeCell - fixedCells + 1);\n\n\t\t\t\t\tcolumn.forEach((item) => {\n\t\t\t\t\t\titem.style.width = `${x}px`;\n\t\t\t\t\t\titem.style.minWidth = `${x}px`;\n\t\t\t\t\t\titem.style.maxWidth = `${x}px`;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.parent.adjustFixedColumnsPosition();\n\t\t\t\tthis.parent.adjustFadePosition(this.parent.getFadeOffset());\n\n\t\t\t\tif (BX.type.isDomNode(fixedTable) && BX.type.isDomNode(fixedTable.rows[0]))\n\t\t\t\t{\n\t\t\t\t\tfixedCell = fixedTable.rows[0].cells[this.__resizeCell];\n\t\t\t\t\tfixedCellContainer = BX.firstChild(fixedCell);\n\t\t\t\t\tfixedCellContainer.style.width = `${x}px`;\n\t\t\t\t\tfixedCellContainer.style.minWidth = `${x}px`;\n\t\t\t\t\tfixedCell.style.width = `${x}px`;\n\t\t\t\t\tfixedCell.style.minWidth = `${x}px`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBX.onCustomEvent(window, 'Grid::columnResize', []);\n\t\t},\n\n\t\t_onDragEnd()\n\t\t{\n\t\t\tthis.saveSizes();\n\t\t\tconst cell = BX.findParent(jsDD.current_node, { className: this.parent.settings.get('classHeadCell') });\n\t\t\tconst overlay = cell.querySelector('.main-grid-cell-overlay');\n\t\t\tif (overlay)\n\t\t\t{\n\t\t\t\tBX.Dom.remove(overlay);\n\t\t\t}\n\t\t},\n\n\t\tgetColumnSizes()\n\t\t{\n\t\t\tconst cells = this.parent.getRows().getHeadFirstChild().getCells();\n\t\t\tconst columns = {};\n\t\t\tlet name;\n\n\t\t\t[].forEach.call(cells, (current) => {\n\t\t\t\tname = BX.data(current, 'name');\n\n\t\t\t\tif (BX.type.isNotEmptyString(name))\n\t\t\t\t{\n\t\t\t\t\tcolumns[name] = BX.width(current);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\treturn columns;\n\t\t},\n\n\t\tsaveSizes()\n\t\t{\n\t\t\tthis.parent.getUserOptions().setColumnSizes(this.getColumnSizes(), 1);\n\t\t},\n\t};\n})();\n","import { Type } from 'main.core';\n\n(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.Row\n\t * @param {BX.Main.Grid} parent\n\t * @param {HtmlElement} node\n\t * @constructor\n\t */\n\tBX.Grid.Row = function(parent, node)\n\t{\n\t\tthis.node = null;\n\t\tthis.checkbox = null;\n\t\tthis.sort = null;\n\t\tthis.actions = null;\n\t\tthis.settings = null;\n\t\tthis.index = null;\n\t\tthis.actionsButton = null;\n\t\tthis.parent = null;\n\t\tthis.depth = null;\n\t\tthis.parentId = null;\n\t\tthis.editData = null;\n\t\tthis.custom = null;\n\t\tthis.onElementClick = this.onElementClick.bind(this);\n\t\tthis.init(parent, node);\n\t\tthis.initElementsEvents();\n\t};\n\n\t// noinspection JSUnusedGlobalSymbols,JSUnusedGlobalSymbols\n\tBX.Grid.Row.prototype = {\n\t\tinit(parent, node)\n\t\t{\n\t\t\tif (BX.type.isDomNode(node))\n\t\t\t{\n\t\t\t\tthis.node = node;\n\t\t\t\tthis.parent = parent;\n\t\t\t\tthis.settings = new BX.Grid.Settings();\n\t\t\t\tthis.bindNodes = [];\n\n\t\t\t\tif (this.isBodyChild())\n\t\t\t\t{\n\t\t\t\t\tthis.bindNodes = [].slice.call(this.node.parentNode.querySelectorAll(`tr[data-bind=\"${this.getId()}\"]`));\n\t\t\t\t\tif (this.bindNodes.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.node.addEventListener('mouseover', this.onMouseOver.bind(this));\n\t\t\t\t\t\tthis.node.addEventListener('mouseleave', this.onMouseLeave.bind(this));\n\t\t\t\t\t\tthis.bindNodes.forEach(function(row) {\n\t\t\t\t\t\t\trow.addEventListener('mouseover', this.onMouseOver.bind(this));\n\t\t\t\t\t\t\trow.addEventListener('mouseleave', this.onMouseLeave.bind(this));\n\t\t\t\t\t\t\trow.addEventListener('click', () => {\n\t\t\t\t\t\t\t\tif (this.isSelected())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.unselect();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.select();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.parent.getParam('ALLOW_CONTEXT_MENU'))\n\t\t\t\t{\n\t\t\t\t\tBX.bind(this.getNode(), 'contextmenu', BX.delegate(this._onRightClick, this));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonMouseOver()\n\t\t{\n\t\t\tthis.node.classList.add('main-grid-row-over');\n\t\t\tthis.bindNodes.forEach((row) => {\n\t\t\t\trow.classList.add('main-grid-row-over');\n\t\t\t});\n\t\t},\n\n\t\tonMouseLeave()\n\t\t{\n\t\t\tthis.node.classList.remove('main-grid-row-over');\n\t\t\tthis.bindNodes.forEach((row) => {\n\t\t\t\trow.classList.remove('main-grid-row-over');\n\t\t\t});\n\t\t},\n\n\t\tisCustom()\n\t\t{\n\t\t\tif (this.custom === null)\n\t\t\t{\n\t\t\t\tthis.custom = BX.hasClass(this.getNode(), this.parent.settings.get('classRowCustom'));\n\t\t\t}\n\n\t\t\treturn this.custom;\n\t\t},\n\n\t\t_onRightClick(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tif (!this.isHeadChild())\n\t\t\t{\n\t\t\t\tthis.showActionsMenu(event);\n\t\t\t}\n\t\t},\n\n\t\tgetDefaultAction()\n\t\t{\n\t\t\treturn BX.data(this.getNode(), 'default-action');\n\t\t},\n\n\t\tgetEditorValue()\n\t\t{\n\t\t\tconst self = this;\n\t\t\tconst cells = this.getCells();\n\t\t\tconst values = {};\n\t\t\tlet cellValues;\n\n\t\t\t[].forEach.call(cells, (current) => {\n\t\t\t\tcellValues = self.getCellEditorValue(current);\n\t\t\t\tif (BX.type.isArray(cellValues))\n\t\t\t\t{\n\t\t\t\t\tcellValues.forEach((cellValue) => {\n\t\t\t\t\t\tvalues[cellValue.NAME] = cellValue.VALUE === undefined ? '' : cellValue.VALUE;\n\n\t\t\t\t\t\tif (cellValue.hasOwnProperty('RAW_NAME') && cellValue.hasOwnProperty('RAW_VALUE'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalues[`${cellValue.NAME}_custom`] = values[`${cellValue.NAME}_custom`] || {};\n\t\t\t\t\t\t\tvalues[`${cellValue.NAME}_custom`][cellValue.RAW_NAME] =\t\t\t\t\t\t\t\tvalues[`${cellValue.NAME}_custom`][cellValue.RAW_NAME] || cellValue.RAW_VALUE;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if (cellValues)\n\t\t\t\t{\n\t\t\t\t\tvalues[cellValues.NAME] = cellValues.VALUE === undefined ? '' : cellValues.VALUE;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn values;\n\t\t},\n\n\t\t/**\n\t\t * @deprecated\n\t\t * @use this.getEditorValue()\n\t\t */\n\t\teditGetValues()\n\t\t{\n\t\t\treturn this.getEditorValue();\n\t\t},\n\n\t\tgetCellEditorValue(cell)\n\t\t{\n\t\t\tconst editor = BX.Grid.Utils.getByClass(cell, this.parent.settings.get('classEditor'), true);\n\t\t\tlet result = null;\n\n\t\t\tif (BX.type.isDomNode(editor))\n\t\t\t{\n\t\t\t\tif (BX.hasClass(editor, 'main-grid-editor-checkbox'))\n\t\t\t\t{\n\t\t\t\t\tresult = {\n\t\t\t\t\t\tNAME: editor.getAttribute('name'),\n\t\t\t\t\t\tVALUE: editor.checked ? 'Y' : 'N',\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse if (BX.hasClass(editor, 'main-grid-editor-custom'))\n\t\t\t\t{\n\t\t\t\t\tresult = this.getCustomValue(editor);\n\t\t\t\t}\n\t\t\t\telse if (BX.hasClass(editor, 'main-grid-editor-money'))\n\t\t\t\t{\n\t\t\t\t\tresult = this.getMoneyValue(editor);\n\t\t\t\t}\n\t\t\t\telse if (BX.hasClass(editor, 'main-ui-multi-select'))\n\t\t\t\t{\n\t\t\t\t\tresult = this.getMultiSelectValues(editor);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = this.getImageValue(editor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tisEdit()\n\t\t{\n\t\t\treturn BX.hasClass(this.getNode(), 'main-grid-row-edit');\n\t\t},\n\n\t\thide()\n\t\t{\n\t\t\tBX.addClass(this.getNode(), this.parent.settings.get('classHide'));\n\t\t},\n\n\t\tshow()\n\t\t{\n\t\t\tBX.Dom.attr(this.getNode(), 'hidden', null);\n\t\t\tBX.removeClass(this.getNode(), this.parent.settings.get('classHide'));\n\t\t},\n\n\t\tisShown()\n\t\t{\n\t\t\treturn !BX.hasClass(this.getNode(), this.parent.settings.get('classHide'));\n\t\t},\n\n\t\tisNotCount()\n\t\t{\n\t\t\treturn BX.hasClass(this.getNode(), this.parent.settings.get('classNotCount'));\n\t\t},\n\n\t\tgetContentContainer(target)\n\t\t{\n\t\t\tif (BX.Type.isDomNode(target))\n\t\t\t{\n\t\t\t\tconst cell = target.closest('.main-grid-cell');\n\t\t\t\tif (BX.Type.isDomNode(cell))\n\t\t\t\t{\n\t\t\t\t\treturn cell.querySelector('.main-grid-cell-content');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn target;\n\t\t},\n\n\t\tgetContent(cell)\n\t\t{\n\t\t\tconst container = this.getContentContainer(cell);\n\t\t\tlet content;\n\n\t\t\tif (BX.type.isDomNode(container))\n\t\t\t{\n\t\t\t\tcontent = BX.html(container);\n\t\t\t}\n\n\t\t\treturn content;\n\t\t},\n\t\tgetMoneyValue(editor)\n\t\t{\n\t\t\tconst result = [];\n\t\t\tconst filteredValue = {\n\t\t\t\tPRICE: {},\n\t\t\t\tCURRENCY: {},\n\t\t\t\tHIDDEN: {},\n\t\t\t};\n\t\t\tconst fieldName = editor.getAttribute('data-name');\n\n\t\t\tconst inputs = [].slice.call(editor.querySelectorAll('input'));\n\t\t\tinputs.forEach((element) => {\n\t\t\t\tresult.push({\n\t\t\t\t\tNAME: fieldName,\n\t\t\t\t\tRAW_NAME: element.name,\n\t\t\t\t\tRAW_VALUE: element.value || '',\n\t\t\t\t\tVALUE: element.value || '',\n\t\t\t\t});\n\n\t\t\t\tif (element.classList.contains('main-grid-editor-money-price'))\n\t\t\t\t{\n\t\t\t\t\tfilteredValue.PRICE = {\n\t\t\t\t\t\tNAME: element.name,\n\t\t\t\t\t\tVALUE: element.value,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse if (element.type === ' hidden')\n\t\t\t\t{\n\t\t\t\t\tfilteredValue.HIDDEN[element.name] = element.value;\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst currencySelector = editor.querySelector('.main-grid-editor-dropdown');\n\t\t\tif (currencySelector)\n\t\t\t{\n\t\t\t\tconst currencyFieldName = currencySelector.getAttribute('name');\n\t\t\t\tif (BX.type.isNotEmptyString(currencyFieldName))\n\t\t\t\t{\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tNAME: fieldName,\n\t\t\t\t\t\tRAW_NAME: currencyFieldName,\n\t\t\t\t\t\tRAW_VALUE: currencySelector.dataset.value || '',\n\t\t\t\t\t\tVALUE: currencySelector.dataset.value || '',\n\t\t\t\t\t});\n\t\t\t\t\tfilteredValue.CURRENCY = {\n\t\t\t\t\t\tNAME: currencyFieldName,\n\t\t\t\t\t\tVALUE: currencySelector.dataset.value,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push({\n\t\t\t\tNAME: fieldName,\n\t\t\t\tVALUE: filteredValue,\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\t\tgetCustomValue(editor)\n\t\t{\n\t\t\tconst map = new Map(); const\n\t\t\t\tname = editor.getAttribute('data-name');\n\t\t\tconst inputs = [].slice.call(editor.querySelectorAll('input, select, textarea'));\n\t\t\tinputs.forEach((element) => {\n\t\t\t\tif (element.name === '')\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (element.hasAttribute('data-ignore-field'))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet resultObject = {\n\t\t\t\t\tNAME: name,\n\t\t\t\t\tRAW_NAME: element.name,\n\t\t\t\t\tRAW_VALUE: element.value,\n\t\t\t\t\tVALUE: element.value,\n\t\t\t\t};\n\n\t\t\t\tswitch (element.tagName)\n\t\t\t\t{\n\t\t\t\t\tcase 'SELECT':\n\t\t\t\t\t\tif (element.multiple)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst selectValues = [];\n\t\t\t\t\t\t\telement.querySelectorAll('option').forEach((option) => {\n\t\t\t\t\t\t\t\tif (option.selected)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tselectValues.push(option.value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresultObject.RAW_VALUE = selectValues;\n\t\t\t\t\t\t\tresultObject.VALUE = selectValues;\n\t\t\t\t\t\t\tmap.set(element.name, resultObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmap.set(element.name, resultObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'INPUT':\n\t\t\t\t\t\tswitch (element.type.toUpperCase())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcase 'RADIO':\n\t\t\t\t\t\t\t\tif (element.checked)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tmap.set(element.name, resultObject);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'CHECKBOX':\n\t\t\t\t\t\t\t\tif (element.checked)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (this.isMultipleCustomValue(element.name))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (map.has(element.name))\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tresultObject = map.get(element.name);\n\t\t\t\t\t\t\t\t\t\t\tresultObject.RAW_VALUE.push(element.value);\n\t\t\t\t\t\t\t\t\t\t\tresultObject.VALUE.push(element.value);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tresultObject.RAW_VALUE = [element.value];\n\t\t\t\t\t\t\t\t\t\t\tresultObject.VALUE = [element.value];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tmap.set(element.name, resultObject);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'FILE':\n\t\t\t\t\t\t\t\tresultObject.RAW_VALUE = element.files[0];\n\t\t\t\t\t\t\t\tresultObject.VALUE = element.files[0];\n\t\t\t\t\t\t\t\tmap.set(element.name, resultObject);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tif (this.isMultipleCustomValue(element.name))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (map.has(element.name))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tresultObject = map.get(element.name);\n\t\t\t\t\t\t\t\t\t\tresultObject.RAW_VALUE.push(element.value);\n\t\t\t\t\t\t\t\t\t\tresultObject.VALUE.push(element.value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tresultObject.RAW_VALUE = [element.value];\n\t\t\t\t\t\t\t\t\t\tresultObject.VALUE = [element.value];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmap.set(element.name, resultObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmap.set(element.name, resultObject);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst result = [];\n\t\t\tmap.forEach((value) => {\n\t\t\t\tresult.push(value);\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\n\t\tisMultipleCustomValue(elementName: string): boolean\n\t\t{\n\t\t\treturn elementName.length > 2\n\t\t\t\t&& elementName.lastIndexOf('[]') === elementName.length - 2;\n\t\t},\n\n\t\tgetImageValue(editor)\n\t\t{\n\t\t\tlet result = null;\n\t\t\tif (BX.hasClass(editor, 'main-grid-image-editor'))\n\t\t\t{\n\t\t\t\tconst input = editor.querySelector('.main-grid-image-editor-file-input');\n\n\t\t\t\tif (input)\n\t\t\t\t{\n\t\t\t\t\tresult = {\n\t\t\t\t\t\tNAME: input.name,\n\t\t\t\t\t\tVALUE: input.files[0],\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst fakeInput = editor.querySelector('.main-grid-image-editor-fake-file-input');\n\n\t\t\t\t\tif (fakeInput)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = {\n\t\t\t\t\t\t\tNAME: fakeInput.name,\n\t\t\t\t\t\t\tVALUE: fakeInput.value,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (editor.value)\n\t\t\t{\n\t\t\t\tresult = {\n\t\t\t\t\tNAME: editor.getAttribute('name'),\n\t\t\t\t\tVALUE: editor.value,\n\t\t\t\t};\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult = {\n\t\t\t\t\tNAME: editor.getAttribute('name'),\n\t\t\t\t\tVALUE: BX.data(editor, 'value'),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetMultiSelectValues(editor)\n\t\t{\n\t\t\tconst value = JSON.parse(BX.data(editor, 'value'));\n\n\t\t\treturn {\n\t\t\t\tNAME: editor.getAttribute('name'),\n\t\t\t\tVALUE: Type.isArrayFilled(value) ? value : '',\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * @param {HTMLTableCellElement} cell\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetEditorContainer(cell)\n\t\t{\n\t\t\treturn BX.Grid.Utils.getByClass(cell, this.parent.settings.get('classEditorContainer'), true);\n\t\t},\n\n\t\t/**\n\t\t * @return {HTMLElement}\n\t\t */\n\t\tgetCollapseButton()\n\t\t{\n\t\t\tif (!this.collapseButton)\n\t\t\t{\n\t\t\t\tthis.collapseButton = BX.Grid.Utils.getByClass(this.getNode(), this.parent.settings.get('classCollapseButton'), true);\n\t\t\t}\n\n\t\t\treturn this.collapseButton;\n\t\t},\n\n\t\tstateLoad()\n\t\t{\n\t\t\tBX.addClass(this.getNode(), this.parent.settings.get('classRowStateLoad'));\n\t\t},\n\n\t\tstateUnload()\n\t\t{\n\t\t\tBX.removeClass(this.getNode(), this.parent.settings.get('classRowStateLoad'));\n\t\t},\n\n\t\tstateExpand()\n\t\t{\n\t\t\tBX.addClass(this.getNode(), this.parent.settings.get('classRowStateExpand'));\n\t\t},\n\n\t\tstateCollapse()\n\t\t{\n\t\t\tBX.removeClass(this.getNode(), this.parent.settings.get('classRowStateExpand'));\n\t\t},\n\n\t\tgetParentId()\n\t\t{\n\t\t\tif (this.parentId === null)\n\t\t\t{\n\t\t\t\tthis.parentId = BX.data(this.getNode(), 'parent-id');\n\n\t\t\t\tif (typeof this.parentId !== 'undefined' && this.parentId !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.parentId = this.parentId.toString();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.parentId;\n\t\t},\n\n\t\t/**\n\t\t * @return {DOMStringMap}\n\t\t */\n\t\tgetDataset()\n\t\t{\n\t\t\treturn this.getNode().dataset;\n\t\t},\n\n\t\t/**\n\t\t * Gets row depth level\n\t\t * @return {?number}\n\t\t */\n\t\tgetDepth()\n\t\t{\n\t\t\tif (this.depth === null)\n\t\t\t{\n\t\t\t\tthis.depth = BX.data(this.getNode(), 'depth');\n\t\t\t}\n\n\t\t\treturn this.depth;\n\t\t},\n\n\t\t/**\n\t\t * Set row depth\n\t\t * @param {number} depth\n\t\t */\n\t\tsetDepth(depth)\n\t\t{\n\t\t\tdepth = parseInt(depth);\n\n\t\t\tif (BX.type.isNumber(depth))\n\t\t\t{\n\t\t\t\tconst depthOffset = depth - parseInt(this.getDepth());\n\t\t\t\tconst Rows = this.parent.getRows();\n\n\t\t\t\tthis.getDataset().depth = depth;\n\n\t\t\t\tthis.getShiftCells().forEach((cell) => {\n\t\t\t\t\tBX.data(cell, 'depth', depth);\n\t\t\t\t\tBX.style(cell, 'padding-left', `${depth * 20}px`);\n\t\t\t\t});\n\n\t\t\t\tRows.getRowsByParentId(this.getId(), true).forEach((row) => {\n\t\t\t\t\tconst childDepth = parseInt(depthOffset) + parseInt(row.getDepth());\n\t\t\t\t\trow.getDataset().depth = childDepth;\n\t\t\t\t\trow.getShiftCells().forEach((cell) => {\n\t\t\t\t\t\tBX.data(cell, 'depth', childDepth);\n\t\t\t\t\t\tBX.style(cell, 'padding-left', `${childDepth * 20}px`);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Sets parent id\n\t\t * @param {string|number} id\n\t\t */\n\t\tsetParentId(id)\n\t\t{\n\t\t\tthis.getDataset().parentId = id;\n\t\t},\n\n\t\t/**\n\t\t * @return {HTMLTableRowElement}\n\t\t */\n\t\tgetShiftCells()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getBySelector(this.getNode(), 'td[data-shift=\"true\"]');\n\t\t},\n\n\t\tshowChildRows()\n\t\t{\n\t\t\tconst rows = this.getChildren();\n\t\t\tconst isCustom = this.isCustom();\n\n\t\t\trows.forEach((row) => {\n\t\t\t\trow.show();\n\t\t\t\tif (!isCustom && row.isExpand())\n\t\t\t\t{\n\t\t\t\t\trow.showChildRows();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.parent.updateCounterDisplayed();\n\t\t\tthis.parent.updateCounterSelected();\n\t\t\tthis.parent.adjustCheckAllCheckboxes();\n\t\t\tthis.parent.adjustRows();\n\t\t},\n\n\t\t/**\n\t\t * @return {BX.Grid.Row[]}\n\t\t */\n\t\tgetChildren()\n\t\t{\n\t\t\tconst functionName = this.isCustom() ? 'getRowsByGroupId' : 'getRowsByParentId';\n\t\t\tconst id = this.isCustom() ? this.getGroupId() : this.getId();\n\n\t\t\treturn this.parent.getRows()[functionName](id, true);\n\t\t},\n\n\t\thideChildRows()\n\t\t{\n\t\t\tconst rows = this.getChildren();\n\t\t\trows.forEach((row) =>\n\t\t\t{ row.hide();\n\t\t\t});\n\t\t\tthis.parent.updateCounterDisplayed();\n\t\t\tthis.parent.updateCounterSelected();\n\t\t\tthis.parent.adjustCheckAllCheckboxes();\n\t\t\tthis.parent.adjustRows();\n\t\t},\n\n\t\tisChildsLoaded()\n\t\t{\n\t\t\tif (!BX.type.isBoolean(this.childsLoaded))\n\t\t\t{\n\t\t\t\tthis.childsLoaded = this.isCustom() || BX.data(this.getNode(), 'child-loaded') === 'true';\n\t\t\t}\n\n\t\t\treturn this.childsLoaded;\n\t\t},\n\n\t\texpand()\n\t\t{\n\t\t\tconst self = this;\n\t\t\tthis.stateExpand();\n\n\t\t\tif (this.isChildsLoaded())\n\t\t\t{\n\t\t\t\tthis.showChildRows();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stateLoad();\n\t\t\t\tthis.loadChildRows((rows) => {\n\t\t\t\t\trows.reverse().forEach((current) => {\n\t\t\t\t\t\tBX.insertAfter(current, self.getNode());\n\t\t\t\t\t});\n\t\t\t\t\tself.parent.getRows().reset();\n\t\t\t\t\tself.parent.bindOnRowEvents();\n\n\t\t\t\t\tif (self.parent.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.parent.getRowsSortable().reinit();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.parent.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.parent.getColsSortable().reinit();\n\t\t\t\t\t}\n\n\t\t\t\t\tself.stateUnload();\n\t\t\t\t\tBX.data(self.getNode(), 'child-loaded', 'true');\n\t\t\t\t\tself.parent.updateCounterDisplayed();\n\t\t\t\t\tself.parent.updateCounterSelected();\n\t\t\t\t\tself.parent.adjustCheckAllCheckboxes();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tcollapse()\n\t\t{\n\t\t\tthis.stateCollapse();\n\t\t\tthis.hideChildRows();\n\t\t},\n\n\t\tisExpand()\n\t\t{\n\t\t\treturn BX.hasClass(this.getNode(), this.parent.settings.get('classRowStateExpand'));\n\t\t},\n\n\t\ttoggleChildRows()\n\t\t{\n\t\t\tif (this.isExpand())\n\t\t\t{\n\t\t\t\tthis.collapse();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.expand();\n\t\t\t}\n\t\t},\n\n\t\tloadChildRows(callback)\n\t\t{\n\t\t\tif (BX.type.isFunction(callback))\n\t\t\t{\n\t\t\t\tconst self = this;\n\t\t\t\tlet depth = parseInt(this.getDepth());\n\t\t\t\tconst action = this.parent.getUserOptions().getAction('GRID_GET_CHILD_ROWS');\n\t\t\t\tdepth = BX.type.isNumber(depth) ? depth + 1 : 1;\n\t\t\t\tthis.parent.getData().request('', 'POST', { action, parent_id: this.getId(), depth }, null, function() {\n\t\t\t\t\tconst rows = this.getRowsByParentId(self.getId());\n\t\t\t\t\tcallback.apply(null, [rows]);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tupdate(data, url, callback)\n\t\t{\n\t\t\tdata = data || '';\n\n\t\t\tconst action = this.parent.getUserOptions().getAction('GRID_UPDATE_ROW');\n\t\t\tconst depth = this.getDepth();\n\t\t\tconst id = this.getId();\n\t\t\tconst parentId = this.getParentId();\n\t\t\tconst rowData = { id, parentId, action, depth, data };\n\t\t\tconst self = this;\n\n\t\t\tthis.stateLoad();\n\t\t\tthis.parent.getData().request(url, 'POST', rowData, null, function() {\n\t\t\t\tconst bodyRows = this.getBodyRows();\n\t\t\t\tself.parent.getUpdater().updateBodyRows(bodyRows);\n\t\t\t\tself.stateUnload();\n\t\t\t\tself.parent.getRows().reset();\n\t\t\t\tself.parent.getUpdater().updateFootRows(this.getFootRows());\n\t\t\t\tself.parent.getUpdater().updatePagination(this.getPagination());\n\t\t\t\tself.parent.getUpdater().updateMoreButton(this.getMoreButton());\n\t\t\t\tself.parent.getUpdater().updateCounterTotal(this.getCounterTotal());\n\t\t\t\tself.parent.bindOnRowEvents();\n\t\t\t\tself.parent.adjustEmptyTable(bodyRows);\n\n\t\t\t\tself.parent.bindOnMoreButtonEvents();\n\t\t\t\tself.parent.bindOnClickPaginationLinks();\n\t\t\t\tself.parent.updateCounterDisplayed();\n\t\t\t\tself.parent.updateCounterSelected();\n\n\t\t\t\tif (self.parent.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.parent.colsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tif (self.parent.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.parent.rowsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tBX.onCustomEvent(window, 'Grid::rowUpdated', [{ id, data, grid: self.parent, response: this }]);\n\t\t\t\tBX.onCustomEvent(window, 'Grid::updated', [self.parent]);\n\n\t\t\t\tif (BX.type.isFunction(callback))\n\t\t\t\t{\n\t\t\t\t\tcallback({ id, data, grid: self.parent, response: this });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tremove(data, url, callback)\n\t\t{\n\t\t\tdata = data || '';\n\n\t\t\tconst action = this.parent.getUserOptions().getAction('GRID_DELETE_ROW');\n\t\t\tconst depth = this.getDepth();\n\t\t\tconst id = this.getId();\n\t\t\tconst parentId = this.getParentId();\n\t\t\tconst rowData = { id, parentId, action, depth, data };\n\t\t\tconst self = this;\n\n\t\t\tthis.stateLoad();\n\t\t\tthis.parent.getData().request(url, 'POST', rowData, null, function() {\n\t\t\t\tconst bodyRows = this.getBodyRows();\n\t\t\t\tself.parent.getUpdater().updateBodyRows(bodyRows);\n\t\t\t\tself.stateUnload();\n\t\t\t\tself.parent.getRows().reset();\n\t\t\t\tself.parent.getUpdater().updateFootRows(this.getFootRows());\n\t\t\t\tself.parent.getUpdater().updatePagination(this.getPagination());\n\t\t\t\tself.parent.getUpdater().updateMoreButton(this.getMoreButton());\n\t\t\t\tself.parent.getUpdater().updateCounterTotal(this.getCounterTotal());\n\t\t\t\tself.parent.bindOnRowEvents();\n\t\t\t\tself.parent.adjustEmptyTable(bodyRows);\n\n\t\t\t\tself.parent.bindOnMoreButtonEvents();\n\t\t\t\tself.parent.bindOnClickPaginationLinks();\n\t\t\t\tself.parent.updateCounterDisplayed();\n\t\t\t\tself.parent.updateCounterSelected();\n\n\t\t\t\tif (self.parent.getParam('ALLOW_COLUMNS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.parent.colsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tif (self.parent.getParam('ALLOW_ROWS_SORT'))\n\t\t\t\t{\n\t\t\t\t\tself.parent.rowsSortable.reinit();\n\t\t\t\t}\n\n\t\t\t\tBX.onCustomEvent(window, 'Grid::rowRemoved', [{ id, data, grid: self.parent, response: this }]);\n\t\t\t\tBX.onCustomEvent(window, 'Grid::updated', [self.parent]);\n\n\t\t\t\tif (BX.type.isFunction(callback))\n\t\t\t\t{\n\t\t\t\t\tcallback({ id, data, grid: self.parent, response: this });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\teditCancel()\n\t\t{\n\t\t\tconst cells = this.getCells();\n\t\t\tconst self = this;\n\t\t\tlet editorContainer;\n\n\t\t\t[].forEach.call(cells, (current) => {\n\t\t\t\teditorContainer = self.getEditorContainer(current);\n\n\t\t\t\tif (BX.type.isDomNode(editorContainer))\n\t\t\t\t{\n\t\t\t\t\tBX.remove(self.getEditorContainer(current));\n\t\t\t\t\tBX.show(self.getContentContainer(current));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tBX.removeClass(this.getNode(), 'main-grid-row-edit');\n\t\t},\n\n\t\tgetCellByIndex(index)\n\t\t{\n\t\t\treturn this.getCells()[index];\n\t\t},\n\n\t\tgetEditDataByCellIndex(index)\n\t\t{\n\t\t\treturn eval(BX.data(this.getCellByIndex(index), 'edit'));\n\t\t},\n\n\t\tgetCellNameByCellIndex(index)\n\t\t{\n\t\t\treturn BX.data(this.getCellByIndex(index), 'name');\n\t\t},\n\n\t\tresetEditData()\n\t\t{\n\t\t\tthis.editData = null;\n\t\t},\n\n\t\tsetEditData(editData)\n\t\t{\n\t\t\tthis.editData = editData;\n\t\t},\n\n\t\tgetEditData()\n\t\t{\n\t\t\tif (this.editData === null)\n\t\t\t{\n\t\t\t\tconst editableData = this.parent.getParam('EDITABLE_DATA');\n\t\t\t\tconst rowId = this.getId();\n\n\t\t\t\tif (BX.type.isPlainObject(editableData) && rowId in editableData)\n\t\t\t\t{\n\t\t\t\t\tthis.editData = editableData[rowId];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.editData = {};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.editData;\n\t\t},\n\n\t\tgetCellEditDataByCellIndex(cellIndex)\n\t\t{\n\t\t\tconst editData = this.getEditData();\n\t\t\tlet result = null;\n\t\t\tcellIndex = parseInt(cellIndex);\n\n\t\t\tif (BX.type.isNumber(cellIndex) && BX.type.isPlainObject(editData))\n\t\t\t{\n\t\t\t\tconst columnEditData = this.parent.getRows().getHeadFirstChild().getEditDataByCellIndex(cellIndex);\n\n\t\t\t\tif (BX.type.isPlainObject(columnEditData))\n\t\t\t\t{\n\t\t\t\t\tresult = columnEditData;\n\t\t\t\t\tresult.VALUE = editData[columnEditData.NAME];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tedit()\n\t\t{\n\t\t\tconst cells = this.getCells();\n\t\t\tconst self = this;\n\t\t\tlet editObject; let editor; let height; let\n\t\t\t\tcontentContainer;\n\n\t\t\t[].forEach.call(cells, (current, index) => {\n\t\t\t\tif (current.dataset.editable === 'true')\n\t\t\t\t{\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\teditObject = self.getCellEditDataByCellIndex(index);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (err)\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new Error(err);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.parent.getEditor().validateEditObject(editObject))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontentContainer = self.getContentContainer(current);\n\t\t\t\t\t\theight = BX.height(contentContainer);\n\t\t\t\t\t\teditor = self.parent.getEditor().getEditor(editObject, height);\n\n\t\t\t\t\t\tif (!self.getEditorContainer(current) && BX.type.isDomNode(editor))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrent.appendChild(editor);\n\t\t\t\t\t\t\tBX.hide(contentContainer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tBX.addClass(this.getNode(), 'main-grid-row-edit');\n\t\t},\n\n\t\tsetDraggable(value)\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tBX.removeClass(this.getNode(), this.parent.settings.get('classDisableDrag'));\n\t\t\t\tthis.parent.getRowsSortable().register(this.getNode());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.addClass(this.getNode(), this.parent.settings.get('classDisableDrag'));\n\t\t\t\tthis.parent.getRowsSortable().unregister(this.getNode());\n\t\t\t}\n\t\t},\n\n\t\tisDraggable()\n\t\t{\n\t\t\treturn !BX.hasClass(this.getNode(), this.parent.settings.get('classDisableDrag'));\n\t\t},\n\n\t\tgetNode()\n\t\t{\n\t\t\treturn this.node;\n\t\t},\n\n\t\tgetIndex()\n\t\t{\n\t\t\treturn this.getNode().rowIndex;\n\t\t},\n\n\t\tgetId()\n\t\t{\n\t\t\treturn String(BX.data(this.getNode(), 'id'));\n\t\t},\n\n\t\tgetGroupId()\n\t\t{\n\t\t\treturn (BX.data(this.getNode(), 'group-id')).toString();\n\t\t},\n\n\t\tgetObserver()\n\t\t{\n\t\t\treturn BX.Grid.observer;\n\t\t},\n\n\t\tgetCheckbox()\n\t\t{\n\t\t\tif (!this.checkbox)\n\t\t\t{\n\t\t\t\tthis.checkbox = BX.Grid.Utils.getByClass(this.getNode(), this.settings.get('classRowCheckbox'), true);\n\t\t\t}\n\n\t\t\treturn this.checkbox;\n\t\t},\n\n\t\tgetActionsMenu()\n\t\t{\n\t\t\tif (!this.actionsMenu)\n\t\t\t{\n\t\t\t\tconst buttonRect = this.getActionsButton().getBoundingClientRect();\n\n\t\t\t\tthis.actionsMenu = BX.PopupMenu.create(\n\t\t\t\t\t`main-grid-actions-menu-${this.getId()}`,\n\t\t\t\t\tthis.getActionsButton(),\n\t\t\t\t\tthis.getMenuItems(),\n\t\t\t\t\t{\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\toffsetTop: -((buttonRect.height / 2) + 26),\n\t\t\t\t\t\toffsetLeft: 30,\n\t\t\t\t\t\tangle: {\n\t\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t\t\toffset: ((buttonRect.height / 2) - 8),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupClose: BX.delegate(this._onCloseMenu, this),\n\t\t\t\t\t\t\tonPopupShow: BX.delegate(this._onPopupShow, this),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tBX.addCustomEvent('Grid::updated', () => {\n\t\t\t\t\tif (this.actionsMenu)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.actionsMenu.destroy();\n\t\t\t\t\t\tthis.actionsMenu = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tBX.bind(this.actionsMenu.popupWindow.popupContainer, 'click', BX.delegate(function(event) {\n\t\t\t\t\tconst actionsMenu = this.getActionsMenu();\n\t\t\t\t\tif (actionsMenu)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst target = BX.getEventTarget(event);\n\t\t\t\t\t\tconst item = BX.findParent(target, {\n\t\t\t\t\t\t\tclassName: 'menu-popup-item',\n\t\t\t\t\t\t}, 10);\n\n\t\t\t\t\t\tif (!item || !item.dataset.preventCloseContextMenu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactionsMenu.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\treturn this.actionsMenu;\n\t\t},\n\n\t\t_onCloseMenu()\n\t\t{},\n\n\t\t_onPopupShow(popupMenu)\n\t\t{\n\t\t\tpopupMenu.setBindElement(this.getActionsButton());\n\t\t},\n\n\t\tactionsMenuIsShown()\n\t\t{\n\t\t\treturn this.getActionsMenu().popupWindow.isShown();\n\t\t},\n\n\t\tshowActionsMenu(event)\n\t\t{\n\t\t\tBX.fireEvent(document.body, 'click');\n\n\t\t\tthis.getActionsMenu().popupWindow.show();\n\n\t\t\tif (event)\n\t\t\t{\n\t\t\t\tthis.getActionsMenu().popupWindow.popupContainer.style.top = `${(event.pageY - 25) + BX.PopupWindow.getOption('offsetTop')}px`;\n\t\t\t\tthis.getActionsMenu().popupWindow.popupContainer.style.left = `${(event.pageX + 20) + BX.PopupWindow.getOption('offsetLeft')}px`;\n\t\t\t}\n\t\t},\n\n\t\tcloseActionsMenu()\n\t\t{\n\t\t\tif (this.actionsMenu && this.actionsMenu.popupWindow)\n\t\t\t{\n\t\t\t\tthis.actionsMenu.popupWindow.close();\n\t\t\t}\n\t\t},\n\n\t\tgetMenuItems()\n\t\t{\n\t\t\treturn this.getActions() || [];\n\t\t},\n\n\t\tgetActions()\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.actions = this.actions || eval(BX.data(this.getActionsButton(), this.settings.get('dataActionsKey')));\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tthis.actions = null;\n\t\t\t}\n\n\t\t\treturn this.actions;\n\t\t},\n\n\t\tgetActionsButton()\n\t\t{\n\t\t\tif (!this.actionsButton)\n\t\t\t{\n\t\t\t\tthis.actionsButton = BX.Grid.Utils.getByClass(this.getNode(), this.settings.get('classRowActionButton'), true);\n\t\t\t}\n\n\t\t\treturn this.actionsButton;\n\t\t},\n\n\t\tinitSelect()\n\t\t{\n\t\t\tif (this.isSelected() && !BX.hasClass(this.getNode(), this.settings.get('classCheckedRow')))\n\t\t\t{\n\t\t\t\tBX.addClass(this.getNode(), this.settings.get('classCheckedRow'));\n\t\t\t}\n\t\t},\n\n\t\tgetParentNode()\n\t\t{\n\t\t\tlet result;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tresult = (this.getNode()).parentNode;\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tresult = null;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetParentNodeName()\n\t\t{\n\t\t\tlet result;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tresult = (this.getParentNode()).nodeName;\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tresult = null;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tisSelectable()\n\t\t{\n\t\t\treturn !this.isEdit() || this.parent.getParam('ALLOW_EDIT_SELECTION');\n\t\t},\n\n\t\tselect()\n\t\t{\n\t\t\tlet checkbox;\n\n\t\t\tif (\n\t\t\t\tthis.isSelectable()\n\t\t\t\t&& (this.parent.getParam('ADVANCED_EDIT_MODE') || !this.parent.getRows().hasEditable())\n\t\t\t)\n\t\t\t{\n\t\t\t\tcheckbox = this.getCheckbox();\n\n\t\t\t\tif (checkbox && !BX.data(checkbox, 'disabled'))\n\t\t\t\t{\n\t\t\t\t\tBX.addClass(this.getNode(), this.settings.get('classCheckedRow'));\n\t\t\t\t\tthis.bindNodes.forEach(function(row) {\n\t\t\t\t\t\tBX.addClass(row, this.settings.get('classCheckedRow'));\n\t\t\t\t\t}, this);\n\t\t\t\t\tcheckbox.checked = true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tunselect()\n\t\t{\n\t\t\tif (this.isSelectable())\n\t\t\t{\n\t\t\t\tBX.removeClass(this.getNode(), this.settings.get('classCheckedRow'));\n\t\t\t\tthis.bindNodes.forEach(function(row) {\n\t\t\t\t\tBX.removeClass(row, this.settings.get('classCheckedRow'));\n\t\t\t\t}, this);\n\t\t\t\tif (this.getCheckbox())\n\t\t\t\t{\n\t\t\t\t\tthis.getCheckbox().checked = false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetCells()\n\t\t{\n\t\t\treturn this.getNode().cells;\n\t\t},\n\n\t\tisSelected()\n\t\t{\n\t\t\treturn (\n\t\t\t\t(this.getCheckbox() && (this.getCheckbox()).checked)\n\t\t\t\t|| (BX.hasClass(this.getNode(), this.settings.get('classCheckedRow')))\n\t\t\t);\n\t\t},\n\n\t\tisHeadChild()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.getParentNodeName() === 'THEAD'\n\t\t\t\t&& BX.hasClass(this.getNode(), this.settings.get('classHeadRow'))\n\t\t\t);\n\t\t},\n\n\t\tisBodyChild()\n\t\t{\n\t\t\treturn (\n\t\t\t\tBX.hasClass(this.getNode(), this.settings.get('classBodyRow')) && !BX.hasClass(this.getNode(), this.settings.get('classEmptyRows'))\n\t\t\t);\n\t\t},\n\n\t\tisFootChild()\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.getParentNodeName() === 'TFOOT'\n\t\t\t\t&& BX.hasClass(this.getNode(), this.settings.get('classFootRow'))\n\t\t\t);\n\t\t},\n\n\t\tprependTo(target)\n\t\t{\n\t\t\tBX.Dom.prepend(this.getNode(), target);\n\t\t},\n\n\t\tappendTo(target)\n\t\t{\n\t\t\tBX.Dom.append(this.getNode(), target);\n\t\t},\n\n\t\tsetId(id)\n\t\t{\n\t\t\tBX.Dom.attr(this.getNode(), 'data-id', id);\n\t\t},\n\n\t\tsetActions(actions)\n\t\t{\n\t\t\tconst actionCell = this.getNode().querySelector('.main-grid-cell-action');\n\t\t\tif (actionCell)\n\t\t\t{\n\t\t\t\tlet actionButton = actionCell.querySelector('.main-grid-row-action-button');\n\t\t\t\tif (!actionButton)\n\t\t\t\t{\n\t\t\t\t\tactionButton = BX.Dom.create({\n\t\t\t\t\t\ttag: 'div',\n\t\t\t\t\t\tprops: { className: 'main-grid-row-action-button' },\n\t\t\t\t\t});\n\n\t\t\t\t\tconst container = this.getContentContainer(actionCell);\n\t\t\t\t\tBX.Dom.append(actionButton, container);\n\t\t\t\t}\n\n\t\t\t\tBX.Dom.attr(actionButton, {\n\t\t\t\t\thref: '#',\n\t\t\t\t\t'data-actions': actions,\n\t\t\t\t});\n\n\t\t\t\tthis.actions = actions;\n\n\t\t\t\tif (this.actionsMenu)\n\t\t\t\t{\n\t\t\t\t\tthis.actionsMenu.destroy();\n\t\t\t\t\tthis.actionsMenu = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tmakeCountable()\n\t\t{\n\t\t\tBX.Dom.removeClass(this.getNode(), 'main-grid-not-count');\n\t\t},\n\n\t\tmakeNotCountable()\n\t\t{\n\t\t\tBX.Dom.addClass(this.getNode(), 'main-grid-not-count');\n\t\t},\n\n\t\tgetColumnOptions(columnId)\n\t\t{\n\t\t\tconst columns = this.parent.getParam('COLUMNS_ALL');\n\t\t\tif (\n\t\t\t\tBX.Type.isPlainObject(columns)\n\t\t\t\t&& Reflect.has(columns, columnId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn columns[columnId];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tsetCellsContent(content)\n\t\t{\n\t\t\tconst headRow = this.parent.getRows().getHeadFirstChild();\n\n\t\t\t[...this.getCells()].forEach((cell, cellIndex) => {\n\t\t\t\tconst cellName = headRow.getCellNameByCellIndex(cellIndex);\n\n\t\t\t\tif (Reflect.has(content, cellName))\n\t\t\t\t{\n\t\t\t\t\tconst columnOptions = this.getColumnOptions(cellName);\n\t\t\t\t\tconst container = this.getContentContainer(cell);\n\t\t\t\t\tconst cellContent = content[cellName];\n\t\t\t\t\tif (\n\t\t\t\t\t\tcolumnOptions.type === 'labels'\n\t\t\t\t\t\t&& BX.Type.isArray(cellContent)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst labels = cellContent.map((labelOptions) => {\n\t\t\t\t\t\t\tconst label = BX.Tag.render`\n\t\t\t\t\t\t\t\t<span class=\"ui-label ${labelOptions.color}\"></span>\n\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\tif (labelOptions.light !== true)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.Dom.addClass(label, 'ui-label-fill');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (BX.Type.isPlainObject(labelOptions.events))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (Reflect.has(labelOptions.events, 'click'))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.Dom.addClass(label, 'ui-label-link');\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.bindOnEvents(label, labelOptions.events);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst labelContent = (() => {\n\t\t\t\t\t\t\t\tif (BX.Type.isStringFilled(labelOptions.html))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn labelOptions.html;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn labelOptions.text;\n\t\t\t\t\t\t\t})();\n\n\t\t\t\t\t\t\tconst inner = BX.Tag.render`\n\t\t\t\t\t\t\t\t<span class=\"ui-label-inner\">${labelContent}</span>\n\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\tBX.Dom.append(inner, label);\n\n\t\t\t\t\t\t\tif (BX.Type.isPlainObject(labelOptions.removeButton))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst button = (() => {\n\t\t\t\t\t\t\t\t\tif (labelOptions.removeButton.type === BX.Grid.Label.RemoveButtonType.INSIDE)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn BX.Tag.render`\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"ui-label-icon\"></span>\n\t\t\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn BX.Tag.render`\n\t\t\t\t\t\t\t\t\t\t<span class=\"main-grid-label-remove-button ${labelOptions.removeButton.type}\"></span>\n\t\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t\t})();\n\n\t\t\t\t\t\t\t\tif (BX.Type.isPlainObject(labelOptions.removeButton.events))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.bindOnEvents(button, labelOptions.removeButton.events);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tBX.Dom.append(button, label);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn label;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst labelsContainer = BX.Tag.render`\n\t\t\t\t\t\t\t<div class=\"main-grid-labels\">${labels}</div>\n\t\t\t\t\t\t`;\n\n\t\t\t\t\t\tBX.Dom.clean(container);\n\t\t\t\t\t\tconst oldLabelsContainer = container.querySelector('.main-grid-labels');\n\t\t\t\t\t\tif (BX.Type.isDomNode(oldLabelsContainer))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Dom.replace(oldLabelsContainer, labelsContainer);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Dom.append(labelsContainer, container);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (\n\t\t\t\t\t\tcolumnOptions.type === 'tags'\n\t\t\t\t\t\t&& BX.Type.isPlainObject(cellContent)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst tags = cellContent.items.map((tagOptions) => {\n\t\t\t\t\t\t\tconst tag = BX.Tag.render`\n\t\t\t\t\t\t\t\t<span class=\"main-grid-tag\"></span>\n\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\tthis.bindOnEvents(tag, tagOptions.events);\n\n\t\t\t\t\t\t\tif (tagOptions.active === true)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.Dom.addClass(tag, 'main-grid-tag-active');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst tagContent = (() => {\n\t\t\t\t\t\t\t\tif (BX.Type.isStringFilled(tagOptions.html))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn tagOptions.html;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn BX.Text.encode(tagOptions.text);\n\t\t\t\t\t\t\t})();\n\n\t\t\t\t\t\t\tconst tagInner = BX.Tag.render`\n\t\t\t\t\t\t\t\t<span class=\"main-grid-tag-inner\">${tagContent}</span>\n\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\tBX.Dom.append(tagInner, tag);\n\n\t\t\t\t\t\t\tif (tagOptions.active === true)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst removeButton = BX.Tag.render`\n\t\t\t\t\t\t\t\t\t<span class=\"main-grid-tag-remove\"></span>\n\t\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\t\tBX.Dom.append(removeButton, tag);\n\n\t\t\t\t\t\t\t\tif (BX.Type.isPlainObject(tagOptions.removeButton))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.bindOnEvents(removeButton, tagOptions.removeButton.events);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn tag;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst tagsContainer = BX.Tag.render`\n\t\t\t\t\t\t\t<span class=\"main-grid-tags\">${tags}</span>\n\t\t\t\t\t\t`;\n\n\t\t\t\t\t\tconst addButton = BX.Tag.render`\n\t\t\t\t\t\t\t<span class=\"main-grid-tag-add\"></span>\n\t\t\t\t\t\t`;\n\t\t\t\t\t\tif (BX.Type.isPlainObject(cellContent.addButton))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.bindOnEvents(addButton, cellContent.addButton.events);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tBX.Dom.append(addButton, tagsContainer);\n\n\t\t\t\t\t\tconst oldTagsContainer = container.querySelector('.main-grid-tags');\n\t\t\t\t\t\tif (BX.Type.isDomNode(oldTagsContainer))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Dom.replace(oldTagsContainer, tagsContainer);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Dom.append(tagsContainer, container);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (BX.Type.isDomNode(cellContent))\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Dom.append(cellContent, container);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Runtime.html(container, cellContent);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tgetCellById(id)\n\t\t{\n\t\t\tconst headRow = this.parent.getRows().getHeadFirstChild();\n\n\t\t\treturn [...this.getCells()].find((cell, index) => {\n\t\t\t\treturn headRow.getCellNameByCellIndex(index) === id;\n\t\t\t});\n\t\t},\n\n\t\tisTemplate()\n\t\t{\n\t\t\treturn this.isBodyChild() && /^template_\\d$/.test(this.getId());\n\t\t},\n\n\t\tenableAbsolutePosition()\n\t\t{\n\t\t\tconst headCells = [...this.parent.getRows().getHeadFirstChild().getCells()];\n\t\t\tconst cellsWidth = headCells.map((cell) => {\n\t\t\t\treturn BX.Dom.style(cell, 'width');\n\t\t\t});\n\n\t\t\tconst cells = this.getCells();\n\t\t\tcellsWidth.forEach((width, index) => {\n\t\t\t\tBX.Dom.style(cells[index], 'width', width);\n\t\t\t});\n\n\t\t\tBX.Dom.style(this.getNode(), 'position', 'absolute');\n\t\t},\n\n\t\tdisableAbsolutePosition()\n\t\t{\n\t\t\tBX.Dom.style(this.getNode(), 'position', null);\n\t\t},\n\n\t\tgetHeight()\n\t\t{\n\t\t\treturn BX.Text.toNumber(BX.Dom.style(this.getNode(), 'height'));\n\t\t},\n\n\t\tsetCellActions(cellActions)\n\t\t{\n\t\t\tObject.entries(cellActions).forEach(([cellId, actions]) => {\n\t\t\t\tconst cell = this.getCellById(cellId);\n\t\t\t\tif (cell)\n\t\t\t\t{\n\t\t\t\t\tconst inner = cell.querySelector('.main-grid-cell-inner');\n\t\t\t\t\tif (inner)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst container = (() => {\n\t\t\t\t\t\t\tconst currentContainer = inner.querySelector('.main-grid-cell-content-actions');\n\t\t\t\t\t\t\tif (currentContainer)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.Dom.clean(currentContainer);\n\n\t\t\t\t\t\t\t\treturn currentContainer;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst newContainer = BX.Tag.render`\n\t\t\t\t\t\t\t\t<div class=\"main-grid-cell-content-actions\"></div>\n\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\tBX.Dom.append(newContainer, inner);\n\n\t\t\t\t\t\t\treturn newContainer;\n\t\t\t\t\t\t})();\n\n\t\t\t\t\t\tif (BX.Type.isArrayFilled(actions))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactions.forEach((action) => {\n\t\t\t\t\t\t\t\tconst actionClass = (() => {\n\t\t\t\t\t\t\t\t\tif (BX.Type.isArrayFilled(action.class))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn action.class.join(' ');\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn action.class;\n\t\t\t\t\t\t\t\t})();\n\n\t\t\t\t\t\t\t\tconst button = BX.Tag.render`\n\t\t\t\t\t\t\t\t\t<span class=\"main-grid-cell-content-action ${actionClass}\"></span>\n\t\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\t\tif (BX.Type.isPlainObject(action.events))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.bindOnEvents(button, action.events);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (BX.Type.isPlainObject(action.attributes))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.Dom.attr(button, action.attributes);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tBX.Dom.append(button, container);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tinitElementsEvents()\n\t\t{\n\t\t\tconst buttons = [\n\t\t\t\t...this.getNode().querySelectorAll('.main-grid-cell [data-events]'),\n\t\t\t];\n\t\t\tif (BX.Type.isArrayFilled(buttons))\n\t\t\t{\n\t\t\t\tbuttons.forEach((button) => {\n\t\t\t\t\tconst events = eval(BX.Dom.attr(button, 'data-events'));\n\t\t\t\t\tif (BX.Type.isPlainObject(events))\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Dom.attr(button, 'data-events', null);\n\t\t\t\t\t\tthis.bindOnEvents(button, events);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t * @param event\n\t\t */\n\t\tonElementClick(event)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tbindOnEvents(button, events)\n\t\t{\n\t\t\tif (\n\t\t\t\tBX.Type.isDomNode(button)\n\t\t\t\t&& BX.Type.isPlainObject(events)\n\t\t\t)\n\t\t\t{\n\t\t\t\tBX.Event.bind(button, 'click', this.onElementClick.bind(this));\n\n\t\t\t\tconst target = (() => {\n\t\t\t\t\tconst selector = BX.Dom.attr(button, 'data-target');\n\t\t\t\t\tif (selector)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn button.closest(selector);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn button;\n\t\t\t\t})();\n\n\t\t\t\tconst event = new BX.Event.BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tbutton,\n\t\t\t\t\t\ttarget,\n\t\t\t\t\t\trow: this,\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tevent.setTarget(target);\n\n\t\t\t\tObject.entries(events).forEach(([eventName, handler]) => {\n\t\t\t\t\tconst preparedHandler = eval(handler);\n\t\t\t\t\tBX.Event.bind(button, eventName, preparedHandler.bind(null, event));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tsetCounters(counters)\n\t\t{\n\t\t\tif (BX.Type.isPlainObject(counters))\n\t\t\t{\n\t\t\t\tObject.entries(counters).forEach(([columnId, counter]) => {\n\t\t\t\t\tconst cell = this.getCellById(columnId);\n\t\t\t\t\tif (BX.Type.isDomNode(cell))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst cellInner = cell.querySelector('.main-grid-cell-inner');\n\t\t\t\t\t\tconst counterContainer = (() => {\n\t\t\t\t\t\t\tconst container = cell.querySelector('.main-grid-cell-counter');\n\t\t\t\t\t\t\tif (BX.Type.isDomNode(container))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn container;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn BX.Tag.render`\n\t\t\t\t\t\t\t\t<span class=\"main-grid-cell-counter\"></span>\n\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t})();\n\n\t\t\t\t\t\tconst uiCounter = (() => {\n\t\t\t\t\t\t\tconst currentCounter = counterContainer.querySelector('.ui-counter');\n\t\t\t\t\t\t\tif (BX.Type.isDomNode(currentCounter))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn currentCounter;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst newCounter = BX.Tag.render`\n\t\t\t\t\t\t\t\t<span class=\"ui-counter\"></span>\n\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\tBX.Dom.append(newCounter, counterContainer);\n\n\t\t\t\t\t\t\treturn newCounter;\n\t\t\t\t\t\t})();\n\n\t\t\t\t\t\tif (BX.Type.isPlainObject(counter.events))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.bindOnEvents(uiCounter, counter.events);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst counterInner = (() => {\n\t\t\t\t\t\t\tconst currentInner = uiCounter.querySelector('.ui-counter-inner');\n\t\t\t\t\t\t\tif (BX.Type.isDomNode(currentInner))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn currentInner;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst newInner = BX.Tag.render`\n\t\t\t\t\t\t\t\t<span class=\"ui-counter-inner\"></span>\n\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\tBX.Dom.append(newInner, uiCounter);\n\n\t\t\t\t\t\t\treturn newInner;\n\t\t\t\t\t\t})();\n\n\t\t\t\t\t\tif (BX.Type.isStringFilled(counter.type))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tObject.values(BX.Grid.Counters.Type).forEach((type) => {\n\t\t\t\t\t\t\t\tBX.Dom.removeClass(counterContainer, `main-grid-cell-counter-${type}`);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tBX.Dom.addClass(counterContainer, `main-grid-cell-counter-${counter.type}`);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (BX.Type.isStringFilled(counter.color))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tObject.values(BX.Grid.Counters.Color).forEach((color) => {\n\t\t\t\t\t\t\t\tBX.Dom.removeClass(uiCounter, color);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tBX.Dom.addClass(uiCounter, counter.color);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (BX.Type.isStringFilled(counter.size))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tObject.values(BX.Grid.Counters.Size).forEach((size) => {\n\t\t\t\t\t\t\t\tBX.Dom.removeClass(uiCounter, size);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tBX.Dom.addClass(uiCounter, counter.size);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (BX.Type.isStringFilled(counter.class))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Dom.addClass(uiCounter, counter.class);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tBX.Type.isStringFilled(counter.value)\n\t\t\t\t\t\t\t|| BX.Type.isNumber(counter.value)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst currentValue = BX.Text.toNumber(counterInner.innerText);\n\t\t\t\t\t\t\tconst value = BX.Text.toNumber(counter.value);\n\n\t\t\t\t\t\t\tif (value > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (value < 100)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcounterInner.innerText = counter.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcounterInner.innerText = '99+';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (counter.animation !== false)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (value !== currentValue)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (value > currentValue)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tBX.Dom.addClass(counterInner, 'ui-counter-plus');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tBX.Dom.addClass(counterInner, 'ui-counter-minus');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tBX.Event.bindOnce(counterInner, 'animationend', (event) => {\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tevent.animationName === 'uiCounterPlus'\n\t\t\t\t\t\t\t\t\t\t\t|| event.animationName === 'uiCounterMinus'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tBX.Dom.removeClass(counterInner, ['ui-counter-plus', 'ui-counter-minus']);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (BX.Text.toNumber(counter.value) > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst align = counter.type === BX.Grid.Counters.Type.RIGHT ? 'right' : 'left';\n\t\t\t\t\t\t\tif (align === 'left')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.Dom.prepend(counterContainer, cellInner);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (align === 'right')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.Dom.append(counterContainer, cellInner);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst leftAlignedClass = (\n\t\t\t\t\t\t\t\t`main-grid-cell-counter-${BX.Grid.Counters.Type.LEFT_ALIGNED}`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (BX.Dom.hasClass(counterContainer, leftAlignedClass))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.remove(uiCounter);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.remove(counterContainer);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t};\n})();\n",";(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\n\t/**\n\t * BX.Grid.Rows\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.Rows = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.rows = null;\n\t\tthis.headChild = null;\n\t\tthis.bodyChild = null;\n\t\tthis.footChild = null;\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.Rows.prototype = {\n\t\tinit: function(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t},\n\n\t\treset: function()\n\t\t{\n\t\t\tthis.rows = null;\n\t\t\tthis.headChild = null;\n\t\t\tthis.bodyChild = null;\n\t\t\tthis.footChild = null;\n\t\t},\n\n\t\tenableDragAndDrop: function()\n\t\t{\n\t\t\tthis.parent.arParams[\"ALLOW_ROWS_SORT\"] = true;\n\n\t\t\tif (!(this.parent.getRowsSortable() instanceof BX.Grid.RowsSortable))\n\t\t\t{\n\t\t\t\tthis.parent.rowsSortable = new BX.Grid.RowsSortable(this.parent);\n\t\t\t}\n\t\t},\n\n\t\tdisableDragAndDrop: function()\n\t\t{\n\t\t\tthis.parent.arParams[\"ALLOW_ROWS_SORT\"] = false;\n\t\t\tif (this.parent.getRowsSortable() instanceof BX.Grid.RowsSortable)\n\t\t\t{\n\t\t\t\tthis.parent.getRowsSortable().destroy();\n\t\t\t\tthis.parent.rowsSortable = null;\n\t\t\t}\n\t\t},\n\n\t\tgetFootLastChild: function()\n\t\t{\n\t\t\treturn this.getLast(this.getFootChild());\n\t\t},\n\n\t\tgetFootFirstChild: function()\n\t\t{\n\t\t\treturn this.getFirst(this.getFootChild());\n\t\t},\n\n\t\tgetBodyLastChild: function()\n\t\t{\n\t\t\treturn this.getLast(this.getBodyChild());\n\t\t},\n\n\t\tgetBodyFirstChild: function()\n\t\t{\n\t\t\treturn this.getFirst(this.getBodyChild());\n\t\t},\n\n\t\tgetHeadLastChild: function()\n\t\t{\n\t\t\treturn this.getLast(this.getHeadChild());\n\t\t},\n\n\t\tgetHeadFirstChild: function()\n\t\t{\n\t\t\treturn this.getFirst(this.getHeadChild());\n\t\t},\n\n\t\tgetEditSelectedValues: function(withTemplate)\n\t\t{\n\t\t\tvar selectedRows = this.getSelected(withTemplate);\n\t\t\tvar values = {};\n\n\t\t\tselectedRows.forEach(\n\t\t\t\tfunction(current)\n\t\t\t\t{\n\t\t\t\t\tvalues[current.getId()] = current.editGetValues();\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn values;\n\t\t},\n\n\t\tgetSelectedIds: function(withTemplate)\n\t\t{\n\t\t\treturn this.getSelected(withTemplate).map(function(current) {\n\t\t\t\treturn current.getId();\n\t\t\t});\n\t\t},\n\n\t\tinitSelected: function()\n\t\t{\n\t\t\tvar selected = this.getSelected();\n\n\t\t\tif (BX.type.isArray(selected) && selected.length)\n\t\t\t{\n\t\t\t\tselected.forEach(function(row) {\n\t\t\t\t\trow.initSelect();\n\t\t\t\t});\n\n\t\t\t\tthis.parent.enableActionsPanel();\n\t\t\t}\n\t\t},\n\n\t\teditSelected: function()\n\t\t{\n\t\t\tthis.getSelected().forEach(function(current) {\n\t\t\t\tcurrent.edit();\n\t\t\t});\n\n\t\t\tBX.onCustomEvent(window, 'Grid::thereEditedRows', []);\n\t\t},\n\n\t\teditSelectedCancel: function(withTemplate)\n\t\t{\n\t\t\tthis.getSelected(withTemplate).forEach(function(current) {\n\t\t\t\tcurrent.editCancel();\n\t\t\t});\n\n\t\t\tBX.onCustomEvent(window, 'Grid::noEditedRows', []);\n\t\t},\n\n\t\tisSelected: function()\n\t\t{\n\t\t\treturn this.getBodyChild().some(function(current) {\n\t\t\t\treturn current.isShown() && current.isSelected();\n\t\t\t});\n\t\t},\n\n\t\tisAllSelected: function()\n\t\t{\n\t\t\treturn !this.getBodyChild()\n\t\t\t\t.filter(function(current) {\n\t\t\t\t\treturn !!current.getCheckbox() && current.getCheckbox().disabled !== true;\n\t\t\t\t})\n\t\t\t\t.some(function(current) {\n\t\t\t\t\treturn !current.isSelected();\n\t\t\t\t});\n\t\t},\n\n\t\tgetParent: function()\n\t\t{\n\t\t\treturn this.parent;\n\t\t},\n\n\t\tgetCountSelected: function()\n\t\t{\n\t\t\tvar result;\n\n\t\t\ttry {\n\t\t\t\tresult = this.getSelected().filter(function(row) {\n\t\t\t\t\treturn !row.isNotCount() && row.isShown();\n\t\t\t\t}).length;\n\t\t\t} catch(err) {\n\t\t\t\tresult = 0;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetCountDisplayed: function()\n\t\t{\n\t\t\tvar result;\n\n\t\t\ttry {\n\t\t\t\tresult = this.getBodyChild().filter(function(row) { return row.isShown() && !row.isNotCount(); }).length;\n\t\t\t} catch(err) {\n\t\t\t\tresult = 0;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\taddRows: function(rows)\n\t\t{\n\t\t\tvar body = BX.findChild(\n\t\t\t\tthis.getParent().getTable(),\n\t\t\t\t{tag: 'TBODY'},\n\t\t\t\ttrue,\n\t\t\t\tfalse\n\t\t\t);\n\n\t\t\trows.forEach(function(current) {\n\t\t\t\tbody.appendChild(current);\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Gets all rows of table\n\t\t * @return {BX.Grid.Row[]}\n\t\t */\n\t\tgetRows: function()\n\t\t{\n\t\t\tvar result;\n\t\t\tvar self = this;\n\n\t\t\tif (!this.rows)\n\t\t\t{\n\t\t\t\tresult = [].slice.call(this.getParent().getTable().querySelectorAll('tr[data-id], thead > tr'));\n\n\t\t\t\tthis.rows = result.map(function(current) {\n\t\t\t\t\treturn new BX.Grid.Row(self.parent, current);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.rows;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets selected rows\n\t\t * @return {BX.Grid.Row[]}\n\t\t */\n\t\tgetSelected: function(withTemplate)\n\t\t{\n\t\t\treturn this.getBodyChild(withTemplate).filter(function(current) {\n\t\t\t\treturn current.isShown() && current.isSelected();\n\t\t\t});\n\t\t},\n\n\t\tnormalizeNode: function(node)\n\t\t{\n\t\t\tif (!BX.hasClass(node, this.getParent().settings.get('classBodyRow')))\n\t\t\t{\n\t\t\t\tnode = BX.findParent(node, {className: this.getParent().settings.get('classBodyRow')}, true, false);\n\t\t\t}\n\n\t\t\treturn node;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets BX.Grid.Row by id\n\t\t * @param {string|number} id\n\t\t * @return {?BX.Grid.Row}\n\t\t */\n\t\tgetById: function(id)\n\t\t{\n\t\t\treturn this.getBodyChild().find(function(current) {\n\t\t\t\treturn String(current.getId()) === String(id);\n\t\t\t}) || null;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets BX.Grid.Row for tr node\n\t\t * @param {HTMLTableRowElement} node\n\t\t * @return {?BX.Grid.Row}\n\t\t */\n\t\tget: function(node)\n\t\t{\n\t\t\tif (BX.Type.isDomNode(node))\n\t\t\t{\n\t\t\t\tconst rowNode = node.closest('.main-grid-row');\n\t\t\t\tif (BX.Type.isDomNode(rowNode))\n\t\t\t\t{\n\t\t\t\t\tconst rowInstance = this.getRows().find((row) => {\n\t\t\t\t\t\treturn row.getNode() === rowNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (rowInstance)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn rowInstance;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\t/** @static @method getLast */\n\t\tgetLast: function(array)\n\t\t{\n\t\t\tvar result;\n\n\t\t\ttry {\n\t\t\t\tresult = array[array.length-1];\n\t\t\t} catch (err) {\n\t\t\t\tresult = null;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\t/** @static @method getFirst */\n\t\tgetFirst: function(array)\n\t\t{\n\t\t\tvar result;\n\n\t\t\ttry {\n\t\t\t\tresult = array[0];\n\t\t\t} catch (err) {\n\t\t\t\tresult = null;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetHeadChild: function()\n\t\t{\n\t\t\tthis.headChild = this.headChild || this.getRows().filter(function(current) {\n\t\t\t\t\treturn current.isHeadChild();\n\t\t\t\t});\n\n\t\t\treturn this.headChild;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets child rows of tbody\n\t\t * @return {BX.Grid.Row[]}\n\t\t */\n\t\tgetBodyChild: function(withTemplates)\n\t\t{\n\t\t\treturn this.getRows().filter(function(current) {\n\t\t\t\treturn current.isBodyChild() && (!current.isTemplate() || withTemplates);\n\t\t\t});\n\t\t},\n\n\t\tgetFootChild: function()\n\t\t{\n\t\t\tthis.footChild = this.footChild || this.getRows().filter(function(current) {\n\t\t\t\treturn current.isFootChild();\n\t\t\t});\n\n\t\t\treturn this.footChild;\n\t\t},\n\n\n\t\tselectAll: function()\n\t\t{\n\t\t\tthis.getRows().map(function(current) {\n\t\t\t\tcurrent.isShown() && current.select();\n\t\t\t});\n\t\t},\n\n\t\tunselectAll: function()\n\t\t{\n\t\t\tthis.getRows().map(function(current) {\n\t\t\t\tcurrent.unselect();\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Gets row by rowIndex\n\t\t * @param {number} rowIndex\n\t\t * @return {?BX.Grid.Row}\n\t\t */\n\t\tgetByIndex: function(rowIndex)\n\t\t{\n\t\t\tvar filter = this.getBodyChild()\n\t\t\t\t.filter(function(item) {\n\t\t\t\t\treturn item;\n\t\t\t\t})\n\t\t\t\t.filter(function(item) {\n\t\t\t\t\treturn item.getNode().rowIndex === rowIndex;\n\t\t\t\t});\n\n\t\t\treturn filter.length ? filter[0] : null;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets child rows\n\t\t * @param {number|string} parentId\n\t\t * @param {boolean} [recursive]\n\t\t * @return {BX.Grid.Row[]}\n\t\t */\n\t\tgetRowsByParentId: function(parentId, recursive)\n\t\t{\n\t\t\tvar result = [];\n\t\t\tvar self = this;\n\n\t\t\tif (!parentId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tparentId = parentId.toString();\n\n\t\t\tfunction getByParentId(parentId)\n\t\t\t{\n\t\t\t\tself.getBodyChild().forEach(function(row) {\n\t\t\t\t\tif (row.getParentId() === parentId) {\n\t\t\t\t\t\tresult.push(row);\n\t\t\t\t\t\trecursive && getByParentId(row.getId());\n\t\t\t\t\t}\n\t\t\t\t}, self);\n\t\t\t}\n\n\t\t\tgetByParentId(parentId);\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetRowsByGroupId: function(groupId)\n\t\t{\n\t\t\tvar result = [];\n\t\t\tvar self = this;\n\n\t\t\tif (!groupId)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tgroupId = groupId.toString();\n\n\t\t\tfunction getByParentId(groupId)\n\t\t\t{\n\t\t\t\tself.getBodyChild().forEach(function(row) {\n\t\t\t\t\tif (row.getGroupId() === groupId && !row.isCustom()) {\n\t\t\t\t\t\tresult.push(row);\n\t\t\t\t\t}\n\t\t\t\t}, self);\n\t\t\t}\n\n\t\t\tgetByParentId(groupId);\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetExpandedRows: function()\n\t\t{\n\t\t\treturn this.getRows().filter(function(row) {\n\t\t\t\treturn row.isShown() && row.isExpand();\n\t\t\t});\n\t\t},\n\n\t\tgetIdsExpandedRows: function()\n\t\t{\n\t\t\treturn this.getExpandedRows().map(function(row) {\n\t\t\t\treturn row.getId();\n\t\t\t});\n\t\t},\n\n\n\t\tgetIdsCollapsedGroups: function()\n\t\t{\n\t\t\treturn this.getRows().filter(function(row) {\n\t\t\t\treturn row.isCustom() && !row.isExpand();\n\t\t\t}).map(function(row) {\n\t\t\t\treturn row.getId();\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * @return {HTMLElement[]}\n\t\t */\n\t\tgetSourceRows: function()\n\t\t{\n\t\t\treturn BX.Grid.Utils.getBySelector(this.getParent().getTable(), [\n\t\t\t\t'.main-grid-header > tr',\n\t\t\t\t'.main-grid-header + tbody > tr'\n\t\t\t].join(', '));\n\t\t},\n\n\n\t\t/**\n\t\t * @return {HTMLElement[]}\n\t\t */\n\t\tgetSourceBodyChild: function()\n\t\t{\n\t\t\treturn this.getSourceRows().filter(function(current) {\n\t\t\t\treturn BX.Grid.Utils.closestParent(current).nodeName === 'TBODY';\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * @return {HTMLElement[]}\n\t\t */\n\t\tgetSourceHeadChild: function()\n\t\t{\n\t\t\treturn this.getSourceRows().filter(function(current) {\n\t\t\t\treturn BX.Grid.Utils.closestParent(current).nodeName === 'THEAD';\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * @return {HTMLElement[]}\n\t\t */\n\t\tgetSourceFootChild: function()\n\t\t{\n\t\t\treturn this.getSourceRows().filter(function(current) {\n\t\t\t\treturn BX.Grid.Utils.closestParent(current).nodeName === 'TFOOT';\n\t\t\t});\n\t\t},\n\n\t\thasEditable: function()\n\t\t{\n\t\t\treturn this.getBodyChild().some(function(current) {\n\t\t\t\treturn current.isEdit();\n\t\t\t});\n\t\t},\n\n\t\tinsertAfter: function(currentId, targetId)\n\t\t{\n\t\t\tconst currentRow = this.getById(currentId);\n\t\t\tconst targetRow = this.getById(targetId);\n\n\t\t\tif (currentRow && targetRow)\n\t\t\t{\n\t\t\t\tBX.Dom.insertAfter(currentRow.getNode(), targetRow.getNode());\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t},\n\n\t\tinsertBefore: function(currentId, targetId)\n\t\t{\n\t\t\tconst currentRow = this.getById(currentId);\n\t\t\tconst targetRow = this.getById(targetId);\n\n\t\t\tif (currentRow && targetRow)\n\t\t\t{\n\t\t\t\tBX.Dom.insertBefore(currentRow.getNode(), targetRow.getNode());\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\tBX.Grid.RowDragEvent = function(eventName)\n\t{\n\t\tthis.allowMoveRow = true;\n\t\tthis.allowInsertBeforeTarget = true;\n\t\tthis.dragItem = null;\n\t\tthis.targetItem = null;\n\t\tthis.eventName = eventName || '';\n\t\tthis.errorMessage = '';\n\t};\n\n\tBX.Grid.RowDragEvent.prototype = {\n\t\tallowMove() { this.allowMoveRow = true; this.errorMessage = ''; },\n\t\tallowInsertBefore() { this.allowInsertBeforeTarget = true; },\n\t\tdisallowMove(errorMessage) { this.allowMoveRow = false; this.errorMessage = errorMessage || ''; },\n\t\tdisallowInsertBefore() { this.allowInsertBeforeTarget = false; },\n\t\tgetDragItem() { return this.dragItem; },\n\t\tgetTargetItem() { return this.targetItem; },\n\t\tgetEventName() { return this.eventName; },\n\t\tsetDragItem(item) { return this.dragItem = item; },\n\t\tsetTargetItem(item) { return this.targetItem = item; },\n\t\tsetEventName(name) { return this.eventName = name; },\n\t\tisAllowedMove() { return this.allowMoveRow; },\n\t\tisAllowedInsertBefore() { return this.allowInsertBeforeTarget; },\n\t\tgetErrorMessage() { return this.errorMessage; },\n\t};\n\n\tBX.Grid.RowsSortable = function(parent)\n\t{\n\t\tthis.parent = null;\n\t\tthis.list = null;\n\t\tthis.setDefaultProps();\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.RowsSortable.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tthis.list = this.getList();\n\t\t\tthis.prepareListItems();\n\t\t\tjsDD.Enable();\n\n\t\t\tif (!this.inited)\n\t\t\t{\n\t\t\t\tthis.inited = true;\n\t\t\t\tthis.onscrollDebounceHandler = BX.debounce(this._onWindowScroll, 300, this);\n\n\t\t\t\tif (!this.parent.getParam('ALLOW_ROWS_SORT_IN_EDIT_MODE', false))\n\t\t\t\t{\n\t\t\t\t\tBX.addCustomEvent('Grid::thereEditedRows', BX.proxy(this.disable, this));\n\t\t\t\t\tBX.addCustomEvent('Grid::noEditedRows', BX.proxy(this.enable, this));\n\t\t\t\t}\n\n\t\t\t\tdocument.addEventListener('scroll', this.onscrollDebounceHandler, BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t\t}\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tif (!this.parent.getParam('ALLOW_ROWS_SORT_IN_EDIT_MODE', false))\n\t\t\t{\n\t\t\t\tBX.removeCustomEvent('Grid::thereEditedRows', BX.proxy(this.disable, this));\n\t\t\t\tBX.removeCustomEvent('Grid::noEditedRows', BX.proxy(this.enable, this));\n\t\t\t}\n\n\t\t\tdocument.removeEventListener('scroll', this.onscrollDebounceHandler, BX.Grid.Utils.listenerParams({ passive: true }));\n\t\t\tthis.unregisterObjects();\n\t\t},\n\n\t\t_onWindowScroll()\n\t\t{\n\t\t\tthis.windowScrollTop = BX.scrollTop(window);\n\t\t\tthis.rowsRectList = null;\n\t\t},\n\n\t\tdisable()\n\t\t{\n\t\t\tthis.unregisterObjects();\n\t\t},\n\n\t\tenable()\n\t\t{\n\t\t\tthis.reinit();\n\t\t},\n\n\t\treinit()\n\t\t{\n\t\t\tthis.unregisterObjects();\n\t\t\tthis.setDefaultProps();\n\t\t\tthis.init(this.parent);\n\t\t},\n\n\t\tgetList()\n\t\t{\n\t\t\treturn this.parent.getRows().getSourceBodyChild();\n\t\t},\n\n\t\tunregisterObjects()\n\t\t{\n\t\t\tthis.list.forEach(this.unregister, this);\n\t\t},\n\n\t\tprepareListItems()\n\t\t{\n\t\t\tthis.list.forEach(this.register, this);\n\t\t},\n\n\t\tregister(row)\n\t\t{\n\t\t\tconst Rows = this.parent.getRows();\n\t\t\tconst rowInstance = Rows.get(row);\n\t\t\tif (rowInstance && rowInstance.isDraggable())\n\t\t\t{\n\t\t\t\trow.onbxdragstart = BX.delegate(this._onDragStart, this);\n\t\t\t\trow.onbxdrag = BX.delegate(this._onDrag, this);\n\t\t\t\trow.onbxdragstop = BX.delegate(this._onDragEnd, this);\n\t\t\t\tjsDD.registerObject(row);\n\t\t\t}\n\t\t},\n\n\t\tunregister(row)\n\t\t{\n\t\t\tjsDD.unregisterObject(row);\n\t\t},\n\n\t\tgetIndex(item)\n\t\t{\n\t\t\treturn BX.Grid.Utils.getIndex(this.list, item);\n\t\t},\n\n\t\tcalcOffset()\n\t\t{\n\t\t\tlet offset = this.dragRect.height;\n\n\t\t\tif (this.additionalDragItems.length > 0)\n\t\t\t{\n\t\t\t\tthis.additionalDragItems.forEach((row) => {\n\t\t\t\t\toffset += row.clientHeight;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn offset;\n\t\t},\n\n\t\tgetTheadCells(sourceCells)\n\t\t{\n\t\t\treturn [].map.call(sourceCells, (cell, index) => {\n\t\t\t\treturn {\n\t\t\t\t\tblock: '',\n\t\t\t\t\ttag: 'th',\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tstyle: `width: ${BX.width(sourceCells[index])}px;`,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\n\t\tcreateFake()\n\t\t{\n\t\t\tconst content = [];\n\t\t\tthis.cloneDragItem = BX.clone(this.dragItem);\n\t\t\tthis.cloneDragAdditionalDragItems = [];\n\t\t\tthis.cloneDragAdditionalDragItemRows = [];\n\n\t\t\tconst theadCellsDecl = this.getTheadCells(this.dragItem.cells);\n\t\t\tcontent.push(this.cloneDragItem);\n\n\t\t\tthis.additionalDragItems.forEach(function(row) {\n\t\t\t\tconst cloneRow = BX.clone(row);\n\t\t\t\tcontent.push(cloneRow);\n\t\t\t\tthis.cloneDragAdditionalDragItems.push(cloneRow);\n\t\t\t\tthis.cloneDragAdditionalDragItemRows.push(new BX.Grid.Row(this.parent, cloneRow));\n\t\t\t}, this);\n\n\t\t\tconst tableWidth = BX.width(this.parent.getTable());\n\n\t\t\tthis.fake = BX.decl({\n\t\t\t\tblock: 'main-grid-fake-container',\n\t\t\t\tattrs: {\n\t\t\t\t\tstyle: `position: absolute; top: ${this.getDragStartRect().top}px; width: ${tableWidth}px`,\n\t\t\t\t},\n\t\t\t\tcontent: {\n\t\t\t\t\tblock: 'main-grid-table',\n\t\t\t\t\tmix: 'main-grid-table-fake',\n\t\t\t\t\ttag: 'table',\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tstyle: `width: ${tableWidth}px`,\n\t\t\t\t\t},\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tblock: 'main-grid-header',\n\t\t\t\t\t\t\ttag: 'thead',\n\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\tblock: 'main-grid-row-head',\n\t\t\t\t\t\t\t\ttag: 'tr',\n\t\t\t\t\t\t\t\tcontent: theadCellsDecl,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tblock: '',\n\t\t\t\t\t\t\ttag: 'tbody',\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tBX.insertAfter(this.fake, this.parent.getTable());\n\n\t\t\tthis.cloneDragItem = new BX.Grid.Row(this.parent, this.cloneDragItem);\n\n\t\t\treturn this.fake;\n\t\t},\n\n\t\tgetDragStartRect()\n\t\t{\n\t\t\treturn BX.pos(this.dragItem, this.parent.getTable());\n\t\t},\n\n\t\t_onDragStart()\n\t\t{\n\t\t\tthis.moved = false;\n\t\t\tthis.dragItem = jsDD.current_node;\n\t\t\tthis.targetItem = this.dragItem;\n\t\t\tthis.additionalDragItems = this.getAdditionalDragItems(this.dragItem);\n\t\t\tthis.dragIndex = this.getIndex(this.dragItem);\n\t\t\tthis.dragRect = this.getRowRect(this.dragItem, this.dragIndex);\n\t\t\tthis.offset = this.calcOffset();\n\t\t\tthis.dragStartOffset = (jsDD.start_y - this.dragRect.top);\n\t\t\tthis.dragEvent = new BX.Grid.RowDragEvent();\n\t\t\tthis.dragEvent.setEventName('BX.Main.grid:rowDragStart');\n\t\t\tthis.dragEvent.setDragItem(this.dragItem);\n\t\t\tthis.dragEvent.setTargetItem(this.targetItem);\n\t\t\tthis.dragEvent.allowInsertBefore();\n\n\t\t\tconst dragRow = this.parent.getRows().get(this.dragItem);\n\t\t\tthis.startDragDepth = dragRow.getDepth();\n\t\t\tthis.startDragParentId = dragRow.getParentId();\n\n\t\t\tthis.createFake();\n\n\t\t\tBX.addClass(this.parent.getContainer(), this.parent.settings.get('classOnDrag'));\n\t\t\tBX.addClass(this.dragItem, this.parent.settings.get('classDragActive'));\n\t\t\tBX.onCustomEvent(window, 'BX.Main.grid:rowDragStart', [this.dragEvent, this.parent]);\n\t\t},\n\n\t\tgetAdditionalDragItems(dragItem)\n\t\t{\n\t\t\tconst Rows = this.parent.getRows();\n\n\t\t\treturn Rows.getRowsByParentId(Rows.get(dragItem).getId(), true).map((row) => {\n\t\t\t\treturn row.getNode();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * @param {?HTMLElement} row\n\t\t * @param {int} offset\n\t\t * @param {?int} [transition] css transition-duration in ms\n\t\t */\n\t\tmoveRow(row, offset, transition)\n\t\t{\n\t\t\tif (row)\n\t\t\t{\n\t\t\t\tconst transitionDuration = BX.type.isNumber(transition) ? transition : 300;\n\t\t\t\trow.style.transition = `${transitionDuration}ms`;\n\t\t\t\trow.style.transform = `translate3d(0px, ${offset}px, 0px)`;\n\t\t\t}\n\t\t},\n\n\t\tgetDragOffset()\n\t\t{\n\t\t\treturn jsDD.y - this.dragRect.top - this.dragStartOffset;\n\t\t},\n\n\t\tgetWindowScrollTop()\n\t\t{\n\t\t\tif (this.windowScrollTop === null)\n\t\t\t{\n\t\t\t\tthis.windowScrollTop = BX.scrollTop(window);\n\t\t\t}\n\n\t\t\treturn this.windowScrollTop;\n\t\t},\n\n\t\tgetSortOffset()\n\t\t{\n\t\t\treturn jsDD.y;\n\t\t},\n\n\t\tgetRowRect(row, index)\n\t\t{\n\t\t\tif (!this.rowsRectList)\n\t\t\t{\n\t\t\t\tthis.rowsRectList = {};\n\n\t\t\t\tthis.list.forEach(function(current, i) {\n\t\t\t\t\tthis.rowsRectList[i] = current.getBoundingClientRect();\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\treturn this.rowsRectList[index];\n\t\t},\n\n\t\tgetRowCenter(row, index)\n\t\t{\n\t\t\tconst rect = this.getRowRect(row, index);\n\n\t\t\treturn rect.top + this.getWindowScrollTop() + (rect.height / 2);\n\t\t},\n\n\t\tisDragToBottom(row, index)\n\t\t{\n\t\t\tconst rowCenter = this.getRowCenter(row, index);\n\t\t\tconst sortOffset = this.getSortOffset();\n\n\t\t\treturn index > this.dragIndex && rowCenter < sortOffset;\n\t\t},\n\n\t\tisMovedToBottom(row)\n\t\t{\n\t\t\treturn row.style.transform === `translate3d(0px, ${-this.offset}px, 0px)`;\n\t\t},\n\n\t\tisDragToTop(row, index)\n\t\t{\n\t\t\tconst rowCenter = this.getRowCenter(row, index);\n\t\t\tconst sortOffset = this.getSortOffset();\n\n\t\t\treturn index < this.dragIndex && rowCenter > sortOffset;\n\t\t},\n\n\t\tisMovedToTop(row)\n\t\t{\n\t\t\treturn row.style.transform === `translate3d(0px, ${this.offset}px, 0px)`;\n\t\t},\n\n\t\tisDragToBack(row, index)\n\t\t{\n\t\t\tconst rowCenter = this.getRowCenter(row, index);\n\t\t\tconst dragIndex = this.dragIndex;\n\t\t\tconst y = jsDD.y;\n\n\t\t\treturn (index > dragIndex && y < rowCenter) || (index < dragIndex && y > rowCenter);\n\t\t},\n\n\t\tisMoved(row)\n\t\t{\n\t\t\treturn (row.style.transform !== 'translate3d(0px, 0px, 0px)' && row.style.transform !== '');\n\t\t},\n\n\t\t_onDrag()\n\t\t{\n\t\t\tconst dragTransitionDuration = 0;\n\t\t\tconst defaultOffset = 0;\n\n\t\t\tthis.moveRow(this.dragItem, this.getDragOffset(), dragTransitionDuration);\n\t\t\tthis.moveRow(this.fake, this.getDragOffset(), dragTransitionDuration);\n\t\t\tBX.Grid.Utils.styleForEach(this.additionalDragItems, {\n\t\t\t\ttransition: `${dragTransitionDuration}ms`,\n\t\t\t\ttransform: `translate3d(0px, ${this.getDragOffset()}px, 0px)`,\n\t\t\t});\n\n\t\t\tthis.list.forEach(function(current, index) {\n\t\t\t\tif (Boolean(current) && current !== this.dragItem && !this.additionalDragItems.includes(current))\n\t\t\t\t{\n\t\t\t\t\tif (this.isDragToTop(current, index) && !this.isMovedToTop(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.targetItem = current;\n\t\t\t\t\t\tthis.moveRow(current, this.offset);\n\t\t\t\t\t\tthis.dragEvent.setEventName('BX.Main.grid:rowDragMove');\n\t\t\t\t\t\tthis.dragEvent.setTargetItem(this.targetItem);\n\t\t\t\t\t\tBX.onCustomEvent(window, 'BX.Main.grid:rowDragMove', [this.dragEvent, this.parent]);\n\t\t\t\t\t\tthis.checkError(this.dragEvent);\n\t\t\t\t\t\tthis.updateProperties(this.dragItem, this.targetItem);\n\t\t\t\t\t\tthis.isDragetToTop = true;\n\t\t\t\t\t\tthis.moved = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.isDragToBottom(current, index) && !this.isMovedToBottom(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.targetItem = this.findNextVisible(this.list, index);\n\t\t\t\t\t\tthis.moveRow(current, -this.offset);\n\t\t\t\t\t\tthis.dragEvent.setEventName('BX.Main.grid:rowDragMove');\n\t\t\t\t\t\tthis.dragEvent.setTargetItem(this.targetItem);\n\t\t\t\t\t\tBX.onCustomEvent(window, 'BX.Main.grid:rowDragMove', [this.dragEvent, this.parent]);\n\t\t\t\t\t\tthis.checkError(this.dragEvent);\n\t\t\t\t\t\tthis.updateProperties(this.dragItem, this.targetItem);\n\t\t\t\t\t\tthis.isDragetToTop = false;\n\n\t\t\t\t\t\tif (this.targetItem)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.moved = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.isDragToBack(current, index) && this.isMoved(current))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.moveRow(current, defaultOffset);\n\t\t\t\t\t\tthis.targetItem = current;\n\n\t\t\t\t\t\tif (this.isDragetToTop)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.targetItem = this.findNextVisible(this.list, index);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.moved = true;\n\n\t\t\t\t\t\tthis.dragEvent.setEventName('BX.Main.grid:rowDragMove');\n\t\t\t\t\t\tthis.dragEvent.setTargetItem(this.targetItem);\n\n\t\t\t\t\t\tBX.onCustomEvent(window, 'BX.Main.grid:rowDragMove', [this.dragEvent, this.parent]);\n\t\t\t\t\t\tthis.checkError(this.dragEvent);\n\t\t\t\t\t\tthis.updateProperties(this.dragItem, this.targetItem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\n\t\tcreateError(target, message)\n\t\t{\n\t\t\tconst error = BX.decl({\n\t\t\t\tblock: 'main-grid-error',\n\t\t\t\tcontent: message || '',\n\t\t\t});\n\n\t\t\tBoolean(target) && target.appendChild(error);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tBX.addClass(error, 'main-grid-error-show');\n\t\t\t}, 0);\n\n\t\t\treturn error;\n\t\t},\n\n\t\tcheckError(event)\n\t\t{\n\t\t\tif (!event.isAllowedMove() && !this.error)\n\t\t\t{\n\t\t\t\tthis.error = this.createError(this.fake, event.getErrorMessage());\n\t\t\t}\n\n\t\t\tif (event.isAllowedMove() && this.error)\n\t\t\t{\n\t\t\t\tBX.remove(this.error);\n\t\t\t\tthis.error = null;\n\t\t\t}\n\t\t},\n\n\t\tfindNextVisible(list, index)\n\t\t{\n\t\t\tlet result = null;\n\t\t\tconst Rows = this.parent.getRows();\n\n\t\t\tlist.forEach((item, currentIndex) => {\n\t\t\t\tif (!result && currentIndex > index)\n\t\t\t\t{\n\t\t\t\t\tconst row = Rows.get(item);\n\t\t\t\t\tif (row && row.isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\tresult = item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\n\t\t/**\n\t\t * Updates row properties\n\t\t * @param {?HTMLTableRowElement} dragItem\n\t\t * @param {?HTMLTableRowElement} targetItem\n\t\t */\n\t\tupdateProperties(dragItem, targetItem)\n\t\t{\n\t\t\tconst Rows = this.parent.getRows();\n\t\t\tconst dragRow = Rows.get(dragItem);\n\t\t\tlet depth = 0;\n\t\t\tlet parentId = 0;\n\n\t\t\tif (targetItem)\n\t\t\t{\n\t\t\t\tconst targetRow = Rows.get(targetItem);\n\t\t\t\tdepth = targetRow.getDepth();\n\t\t\t\tparentId = targetRow.getParentId();\n\t\t\t}\n\n\t\t\tdragRow.setDepth(depth);\n\t\t\tdragRow.setParentId(parentId);\n\n\t\t\tthis.cloneDragItem.setDepth(depth);\n\t\t\tthis.cloneDragAdditionalDragItemRows.forEach(function(row, index) {\n\t\t\t\trow.setDepth(BX.data(this.additionalDragItems[index], 'depth'));\n\t\t\t}, this);\n\t\t},\n\n\t\tresetDragProperties()\n\t\t{\n\t\t\tconst dragRow = this.parent.getRows().get(this.dragItem);\n\t\t\tdragRow.setDepth(this.startDragDepth);\n\t\t\tdragRow.setParentId(this.startDragParentId);\n\t\t},\n\n\t\t_onDragOver() {},\n\n\t\t_onDragLeave() {},\n\n\t\t_onDragEnd()\n\t\t{\n\t\t\tBX.onCustomEvent(window, 'BX.Main.grid:rowDragEnd', [this.dragEvent, this.parent]);\n\n\t\t\tBX.removeClass(this.parent.getContainer(), this.parent.settings.get('classOnDrag'));\n\t\t\tBX.removeClass(this.dragItem, this.parent.settings.get('classDragActive'));\n\n\t\t\tBX.Grid.Utils.styleForEach(this.list, { transition: '', transform: '' });\n\n\t\t\tif (this.dragEvent.isAllowedMove())\n\t\t\t{\n\t\t\t\tthis.sortRows(this.dragItem, this.targetItem);\n\t\t\t\tthis.sortAdditionalDragItems(this.dragItem, this.additionalDragItems);\n\n\t\t\t\tthis.list = this.getList();\n\t\t\t\tthis.parent.getRows().reset();\n\n\t\t\t\tconst dragItem = this.parent.getRows().get(this.dragItem);\n\t\t\t\tconst ids = this.parent.getRows().getBodyChild().map((row) => {\n\t\t\t\t\treturn row.getId();\n\t\t\t\t});\n\n\t\t\t\tif (this.parent.getParam('ALLOW_ROWS_SORT_INSTANT_SAVE', true))\n\t\t\t\t{\n\t\t\t\t\tthis.saveRowsSort(ids);\n\t\t\t\t}\n\n\t\t\t\tBX.onCustomEvent(window, 'Grid::rowMoved', [ids, dragItem, this.parent]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.resetDragProperties();\n\t\t\t}\n\n\t\t\tBX.remove(this.fake);\n\n\t\t\tthis.setDefaultProps();\n\t\t},\n\n\t\tsortAdditionalDragItems(dragItem, additional)\n\t\t{\n\t\t\tadditional.reduce((prev, current) => {\n\t\t\t\tBoolean(current) && BX.insertAfter(current, prev);\n\n\t\t\t\treturn current;\n\t\t\t}, dragItem);\n\t\t},\n\n\t\tsortRows(current, target)\n\t\t{\n\t\t\tif (target)\n\t\t\t{\n\t\t\t\ttarget.parentNode.insertBefore(current, target);\n\t\t\t}\n\t\t\telse if (this.moved)\n\t\t\t{\n\t\t\t\tcurrent.parentNode.appendChild(current);\n\t\t\t}\n\t\t},\n\n\t\tsaveRowsSort(rows)\n\t\t{\n\t\t\tconst data = {\n\t\t\t\tids: rows,\n\t\t\t\taction: this.parent.getUserOptions().getAction('GRID_SAVE_ROWS_SORT'),\n\t\t\t};\n\n\t\t\tthis.parent.getData().request(null, 'POST', data);\n\t\t},\n\n\t\tsetDefaultProps()\n\t\t{\n\t\t\tthis.moved = false;\n\t\t\tthis.dragItem = null;\n\t\t\tthis.targetItem = null;\n\t\t\tthis.dragRect = null;\n\t\t\tthis.dragIndex = null;\n\t\t\tthis.offset = null;\n\t\t\tthis.realX = null;\n\t\t\tthis.realY = null;\n\t\t\tthis.dragStartOffset = null;\n\t\t\tthis.windowScrollTop = null;\n\t\t\tthis.rowsRectList = null;\n\t\t\tthis.error = false;\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.Settings\n\t * @constructor\n\t */\n\tBX.Grid.Settings = function()\n\t{\n\t\tthis.settings = {};\n\t\tthis.defaultSettings = {\n\t\t\tclassContainer: 'main-grid',\n\t\t\tclassWrapper: 'main-grid-wrapper',\n\t\t\tclassTable: 'main-grid-table',\n\t\t\tclassScrollContainer: 'main-grid-container',\n\t\t\tclassFadeContainer: 'main-grid-fade',\n\t\t\tclassFadeContainerRight: 'main-grid-fade-right',\n\t\t\tclassFadeContainerLeft: 'main-grid-fade-left',\n\t\t\tclassNavPanel: 'main-grid-nav-panel',\n\t\t\tclassActionPanel: 'main-grid-action-panel',\n\t\t\tclassCursor: 'main-grid-cursor',\n\t\t\tclassRowCustom: 'main-grid-row-custom',\n\t\t\tclassMoreButton: 'main-grid-more-btn',\n\t\t\tclassRow: 'main-grid-row',\n\t\t\tclassHeadRow: 'main-grid-row-head',\n\t\t\tclassBodyRow: 'main-grid-row-body',\n\t\t\tclassFootRow: 'main-grid-row-foot',\n\t\t\tclassDataRows: 'main-grid-row-data',\n\t\t\tclassPanels: 'main-grid-bottom-panels',\n\t\t\tclassCellHeadContainer: 'main-grid-cell-head-container',\n\t\t\tclassCellHeadOndrag: 'main-grid-cell-head-ondrag',\n\t\t\tclassEmptyRows: 'main-grid-row-empty',\n\t\t\tclassEmptyBlock: 'main-grid-empty-block',\n\t\t\tclassCheckAllCheckboxes: 'main-grid-check-all',\n\t\t\tclassCheckedRow: 'main-grid-row-checked',\n\t\t\tclassRowCheckbox: 'main-grid-row-checkbox',\n\t\t\tclassPagination: 'main-grid-panel-cell-pagination',\n\t\t\tclassActionCol: 'main-grid-cell-action',\n\t\t\tclassCounterDisplayed: 'main-grid-counter-displayed',\n\t\t\tclassCounterSelected: 'main-grid-counter-selected',\n\t\t\tclassCounterTotal: 'main-grid-panel-total',\n\t\t\tclassTableFade: 'main-grid-table-fade',\n\t\t\tclassDragActive: 'main-grid-on-row-drag',\n\t\t\tclassResizeButton: 'main-grid-resize-button',\n\t\t\tclassOnDrag: 'main-grid-ondrag',\n\t\t\tclassDisableDrag: 'main-grid-row-drag-disabled',\n\t\t\tclassPanelCellContent: 'main-grid-panel-content',\n\t\t\tclassCollapseButton: 'main-grid-plus-button',\n\t\t\tclassRowStateLoad: 'main-grid-load-row',\n\t\t\tclassRowStateExpand: 'main-grid-row-expand',\n\t\t\tclassHeaderSortable: 'main-grid-col-sortable',\n\t\t\tclassHeaderNoSortable: 'main-grid-col-no-sortable',\n\t\t\tclassCellStatic: 'main-grid-cell-static',\n\t\t\tclassHeadCell: 'main-grid-cell-head',\n\t\t\tclassPageSize: 'main-grid-panel-select-pagesize',\n\t\t\tclassGroupEditButton: 'main-grid-control-panel-action-edit',\n\t\t\tclassGroupDeleteButton: 'main-grid-control-panel-action-remove',\n\t\t\tclassGroupActionsDisabled: 'main-grid-control-panel-action-icon-disable',\n\t\t\tclassPanelButton: 'ui-btn',\n\t\t\tclassPanelApplyButton: 'main-grid-control-panel-apply-button',\n\t\t\tclassPanelCheckbox: 'main-grid-panel-checkbox',\n\t\t\tclassEditor: 'main-grid-editor',\n\t\t\tclassEditorContainer: 'main-grid-editor-container',\n\t\t\tclassEditorText: 'main-grid-editor-text',\n\t\t\tclassEditorDate: 'main-grid-editor-date',\n\t\t\tclassEditorNumber: 'main-grid-editor-number',\n\t\t\tclassEditorRange: 'main-grid-editor-range',\n\t\t\tclassEditorCheckbox: 'main-grid-editor-checkbox',\n\t\t\tclassEditorTextarea: 'main-grid-editor-textarea',\n\t\t\tclassEditorCustom: 'main-grid-editor-custom',\n\t\t\tclassEditorMoney: 'main-grid-editor-money',\n\t\t\tclassCellContainer: 'main-grid-cell-content',\n\t\t\tclassEditorOutput: 'main-grid-editor-output',\n\t\t\tclassSettingsWindow: 'main-grid-settings-window',\n\t\t\tclassSettingsWindowColumn: 'main-grid-settings-window-list-item',\n\t\t\tclassSettingsWindowColumnLabel: 'main-grid-settings-window-list-item-label',\n\t\t\tclassSettingsWindowColumnEditState: 'main-grid-settings-window-list-item-edit',\n\t\t\tclassSettingsWindowColumnEditInput: 'main-grid-settings-window-list-item-edit-input',\n\t\t\tclassSettingsWindowColumnEditButton: 'main-grid-settings-window-list-item-edit-button',\n\t\t\tclassSettingsWindowColumnCheckbox: 'main-grid-settings-window-list-item-checkbox',\n\t\t\tclassSettingsWindowShow: 'main-grid-settings-window-show',\n\t\t\tclassSettingsWindowSelectAll: 'main-grid-settings-window-select-all',\n\t\t\tclassSettingsWindowUnselectAll: 'main-grid-settings-window-unselect-all',\n\t\t\tclassSettingsWindowSearchSectionsWrapper: 'main-grid-settings-window-search-section-wrapper',\n\t\t\tclassSettingsWindowSearchActiveSectionIcon: 'main-grid-settings-window-search-section-item-icon-active',\n\t\t\tclassSettingsWindowSearchSectionInput: 'main-grid-settings-window-search-section-input',\n\t\t\tclassSettingsWindowSearchSectionItemHidden: 'main-grid-settings-window-list-item-hidden',\n\t\t\tclassSettingsWindowSearchSectionItemVisible: 'main-grid-settings-window-list-item-visible',\n\t\t\tclassSettingsButton: 'main-grid-interface-settings-icon',\n\t\t\tclassSettingsButtonActive: 'main-grid-interface-settings-icon-active',\n\t\t\tclassSettingsWindowClose: 'main-grid-settings-window-actions-item-close',\n\t\t\tclassSettingsWindowReset: 'main-grid-settings-window-actions-item-reset',\n\t\t\tclassSettingsWindowColumnChecked: 'main-grid-settings-window-list-item-checked',\n\t\t\tclassShowAnimation: 'main-grid-show-popup-animation',\n\t\t\tclassCloseAnimation: 'main-grid-close-popup-animation',\n\t\t\tclassLoader: 'main-grid-loader-container',\n\t\t\tclassLoaderShow: 'main-grid-show-loader',\n\t\t\tclassLoaderHide: 'main-grid-hide-loader',\n\t\t\tclassRowError: 'main-grid-error',\n\t\t\tloaderHideAnimationName: 'hideLoader',\n\t\t\tclassHide: 'main-grid-hide',\n\t\t\tclassEar: 'main-grid-ear',\n\t\t\tclassEarLeft: 'main-grid-ear-left',\n\t\t\tclassEarRight: 'main-grid-ear-right',\n\t\t\tclassNotCount: 'main-grid-not-count',\n\t\t\tclassCounter: 'main-grid-panel-counter',\n\t\t\tclassForAllCounterEnabled: 'main-grid-panel-counter-for-all-enable',\n\t\t\tclassLoad: 'load',\n\t\t\tclassRowActionButton: 'main-grid-row-action-button',\n\t\t\tclassDropdown: 'main-dropdown',\n\t\t\tclassPanelControl: 'main-grid-panel-control',\n\t\t\tclassPanelControlContainer: 'main-grid-panel-control-container',\n\t\t\tclassForAllCheckbox: 'main-grid-for-all-checkbox',\n\t\t\tclassDisable: 'main-grid-disable',\n\t\t\tdataActionsKey: 'actions',\n\t\t\tupdateActionMore: 'more',\n\t\t\tclassShow: 'show',\n\t\t\tclassGridShow: 'main-grid-show',\n\t\t\tupdateActionPagination: 'pagination',\n\t\t\tupdateActionSort: 'sort',\n\t\t\tajaxIdDataProp: 'ajaxid',\n\t\t\tpageSizeId: 'grid_page_size',\n\t\t\tsortableRows: true,\n\t\t\tsortableColumns: true,\n\t\t\tanimationDuration: 300,\n\t\t};\n\t\tthis.prepare();\n\t};\n\n\tBX.Grid.Settings.prototype = {\n\t\tprepare()\n\t\t{\n\t\t\tthis.settings = this.defaultSettings;\n\t\t},\n\n\t\tgetDefault()\n\t\t{\n\t\t\treturn this.defaultSettings;\n\t\t},\n\n\t\tget(name)\n\t\t{\n\t\t\tlet result;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tresult = (this.getDefault())[name];\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tresult = null;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetList()\n\t\t{\n\t\t\treturn this.getDefault();\n\t\t},\n\t};\n})();\n","import { Reflection, Text, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport {\n\tCheckboxList as UiCheckboxList,\n\tCheckboxListCategory,\n\tCheckboxListOption,\n\tCheckboxListSection,\n} from 'ui.dialogs.checkbox-list';\nimport type { PopupInterface } from './popup-interface';\n\nconst namespace = Reflection.namespace('BX.Grid.SettingsWindow');\n\ntype CheckboxListOptions = {\n\tsections?: Object[],\n\tcategories?: Object[],\n\tcolumnsWithSections?: Object[];\n\tcolumns?: Object[];\n\tchecked?: string[];\n}\n\ntype CheckboxListParams = {\n\tgrid: BX.Main.grid;\n\tparent: Object;\n\ttitle: string;\n\tisUseLazyLoadColumns: boolean;\n}\n\nconst SAVE_FOR_ALL = 'forAll';\nconst SAVE_FOR_ME = 'forMe';\n\nclass CheckboxList implements PopupInterface\n{\n\tparams: CheckboxListParams = {};\n\tgrid: BX.Main.grid;\n\tparent: BX.Grid.SettingsWindow;\n\tuseSearch: boolean;\n\tuseSectioning: boolean;\n\toptions: CheckboxListOptions = {};\n\n\tstickyColumns: Set<string> = new Set();\n\tpopup: UiCheckboxList = null;\n\tpopupItems: HTMLCollection = null;\n\n\tconstructor(params: CheckboxListParams)\n\t{\n\t\tthis.params = params;\n\n\t\tthis.grid = params.grid;\n\t\tthis.parent = params.parent;\n\t\tthis.options = this.grid.arParams.CHECKBOX_LIST_OPTIONS;\n\n\t\tthis.useSearch = Boolean(this.grid.arParams.ENABLE_FIELDS_SEARCH);\n\t\tthis.useSectioning = Type.isArrayFilled(this.options.sections);\n\t\tthis.isForAllValue = false;\n\t}\n\n\tgetPopup(): UiCheckboxList\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tthis.createPopup();\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\tcreatePopup(): void\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tuseSearch,\n\t\t\tuseSectioning,\n\t\t\tparams: { title, placeholder, emptyStateTitle, emptyStateDescription, allSectionsDisabledTitle },\n\t\t} = this;\n\n\t\tconst context = {\n\t\t\tparentType: 'grid',\n\t\t};\n\n\t\tthis.popup = new UiCheckboxList({\n\t\t\tcontext,\n\t\t\tpopupOptions: {\n\t\t\t\twidth: 1100,\n\t\t\t},\n\t\t\tcolumnCount: 4,\n\t\t\tlang: {\n\t\t\t\ttitle,\n\t\t\t\tplaceholder,\n\t\t\t\temptyStateTitle,\n\t\t\t\temptyStateDescription,\n\t\t\t\tallSectionsDisabledTitle,\n\t\t\t},\n\t\t\tsections: this.getSections(),\n\t\t\tcategories: this.getCategories(),\n\t\t\toptions: this.getOptions(),\n\t\t\tevents: {\n\t\t\t\tonApply: (event) => this.onApply(event),\n\t\t\t\tonDefault: (event) => this.onDefault(event),\n\t\t\t},\n\t\t\tparams: {\n\t\t\t\tuseSearch,\n\t\t\t\tuseSectioning,\n\t\t\t\tdestroyPopupAfterClose: false,\n\t\t\t\tcloseAfterApply: false,\n\t\t\t\tisEditableOptionsTitle: true,\n\t\t\t},\n\t\t\tcustomFooterElements: this.getCustomFooterElements(),\n\t\t});\n\t}\n\n\tgetSections(): CheckboxListSection[]\n\t{\n\t\tconst sections = this.options.sections ?? [];\n\n\t\tconst result = [];\n\t\tsections.forEach((section) => {\n\t\t\tconst { id, name, selected } = section;\n\n\t\t\tresult.push({\n\t\t\t\tkey: id,\n\t\t\t\ttitle: name,\n\t\t\t\tvalue: selected,\n\t\t\t});\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tgetCategories(): CheckboxListCategory[]\n\t{\n\t\tconst categories = this.options.categories ?? [];\n\n\t\tconst result = [];\n\n\t\tif (categories.length === 0)\n\t\t{\n\t\t\tthis.getSections().forEach((section) => {\n\t\t\t\tconst { key, title } = section;\n\n\t\t\t\tresult.push({\n\t\t\t\t\tkey,\n\t\t\t\t\ttitle,\n\t\t\t\t\tsectionKey: key,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn result;\n\t\t}\n\n\t\tcategories.forEach((category) => {\n\t\t\tconst { title, sectionKey, key } = category;\n\n\t\t\tresult.push({\n\t\t\t\ttitle,\n\t\t\t\tsectionKey,\n\t\t\t\tkey,\n\t\t\t});\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tgetOptions(): CheckboxListOption[]\n\t{\n\t\tconst options = this.options;\n\t\tconst columns = options.columns ?? [];\n\t\tconst columnsWithSections = options.columnsWithSections ?? [];\n\t\tconst result = [];\n\t\tconst customNames = this.grid.getUserOptions().getCurrentOptions()?.custom_names ?? {};\n\n\t\tif (this.useSectioning)\n\t\t{\n\t\t\tfor (const sectionName in columnsWithSections)\n\t\t\t{\n\t\t\t\tcolumnsWithSections[sectionName].forEach((column) => {\n\t\t\t\t\tconst { id, default: defaultValue } = column;\n\t\t\t\t\tlet { name: title } = column;\n\t\t\t\t\tif (Type.isPlainObject(customNames) && Object.hasOwn(customNames, 'id'))\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = customNames[id];\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ttitle: Text.decode(title),\n\t\t\t\t\t\tvalue: this.isChecked(id),\n\t\t\t\t\t\tcategoryKey: sectionName,\n\t\t\t\t\t\tdefaultValue,\n\t\t\t\t\t\tid,\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.prepareColumnParams(column);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tcolumns.forEach((column) => {\n\t\t\tconst {\n\t\t\t\tid,\n\t\t\t\tname: title,\n\t\t\t\tdefault: defaultValue,\n\t\t\t} = column;\n\n\t\t\tresult.push({\n\t\t\t\ttitle: Text.decode(title),\n\t\t\t\tvalue: this.isChecked(id),\n\t\t\t\tdefaultValue,\n\t\t\t\tid,\n\t\t\t});\n\n\t\t\tthis.prepareColumnParams(column);\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tisChecked(fieldName: string): boolean\n\t{\n\t\tconst checked = this.options.checked ?? [];\n\n\t\treturn checked.includes(fieldName);\n\t}\n\n\tprepareColumnParams(column: Object): void\n\t{\n\t\tconst { sticked, id } = column;\n\n\t\tif (sticked)\n\t\t{\n\t\t\tthis.stickyColumns.add(id);\n\t\t}\n\t}\n\n\tgetCustomFooterElements(): Object[]\n\t{\n\t\tif (this.isAdmin())\n\t\t{\n\t\t\tconst { arParams: params, containerId } = this.parent;\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttype: 'textToggle',\n\t\t\t\t\tid: `${containerId}-${SAVE_FOR_ALL}`,\n\t\t\t\t\ttitle: params.SETTINGS_FOR_LABEL,\n\t\t\t\t\tdataItems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: SAVE_FOR_ME,\n\t\t\t\t\t\t\tlabel: params.SETTINGS_FOR_FOR_ME_LABEL,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: SAVE_FOR_ALL,\n\t\t\t\t\t\t\tlabel: params.SETTINGS_FOR_FOR_ALL_LABEL,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t// eslint-disable-next-line no-return-assign\n\t\t\t\t\tonClick: (value: boolean) => {\n\t\t\t\t\t\tthis.isForAllValue = (value === SAVE_FOR_ALL);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.popup.show();\n\t}\n\n\tgetStickedColumns(): string[]\n\t{\n\t\tconst {\n\t\t\tALLOW_STICKED_COLUMNS: isStickyColumnsAllowed,\n\t\t\tHAS_STICKED_COLUMNS: hasStickyColumns,\n\t\t} = this.parent.arParams;\n\n\t\tif (isStickyColumnsAllowed && hasStickyColumns)\n\t\t{\n\t\t\treturn this.stickyColumns.values();\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tonApply(event): void\n\t{\n\t\tconst { fields: columns, data } = event.data;\n\n\t\tif (this.isForAll())\n\t\t{\n\t\t\tconst params = {\n\t\t\t\tCONFIRM: true,\n\t\t\t\tCONFIRM_MESSAGE: this.grid.getParam('SETTINGS_FOR_ALL_CONFIRM_MESSAGE'),\n\t\t\t};\n\n\t\t\tthis.grid.confirmDialog(\n\t\t\t\tparams,\n\t\t\t\t() => this.saveColumnsAndHidePopup(columns, data),\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.saveColumnsAndHidePopup(columns, data);\n\t\t}\n\t}\n\n\tsaveColumnsAndHidePopup(columns, data)\n\t{\n\t\tthis.saveColumns(columns, data);\n\t\tthis.popup.hide();\n\t}\n\n\tsaveColumns(columns, data): void\n\t{\n\t\tconst options = this.grid.getUserOptions();\n\t\tconst columnNames = this.getColumnNames(data);\n\t\tconst stickyColumns = this.getStickedColumns();\n\n\t\tconst batch = [\n\t\t\t{\n\t\t\t\taction: options.getAction('GRID_SET_COLUMNS'),\n\t\t\t\tcolumns: columns.join(','),\n\t\t\t},\n\t\t\t{\n\t\t\t\taction: options.getAction('SET_CUSTOM_NAMES'),\n\t\t\t\tcustom_names: columnNames,\n\t\t\t},\n\t\t\t{\n\t\t\t\taction: options.getAction('GRID_SET_STICKED_COLUMNS'),\n\t\t\t\tstickedColumns: stickyColumns,\n\t\t\t},\n\t\t];\n\n\t\tif (this.isForAll())\n\t\t{\n\t\t\tbatch.push({\n\t\t\t\taction: options.getAction('GRID_SAVE_SETTINGS'),\n\t\t\t\tview_id: 'default',\n\t\t\t\tset_default_settings: 'Y',\n\t\t\t\tdelete_user_settings: 'Y',\n\t\t\t});\n\t\t}\n\n\t\toptions.batch(batch, () => this.grid.reloadTable());\n\t}\n\n\tgetColumnNames(data): {[key: string]: string}[]\n\t{\n\t\tconst options = this.options;\n\t\tconst columns = options.columns ?? [];\n\n\t\tconst names = {};\n\t\tconst { titles } = data;\n\n\t\tif (!Type.isObjectLike(titles))\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\tcolumns.forEach((column) => {\n\t\t\tconst id = column.id;\n\t\t\tif (Type.isStringFilled(titles[id]) && titles[id] !== column.name)\n\t\t\t{\n\t\t\t\tnames[id] = titles[id];\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tType.isStringFilled(this.parent.arParams.DEFAULT_COLUMNS[id].name)\n\t\t\t\t&& this.parent.arParams.DEFAULT_COLUMNS[id].name !== column.name\n\t\t\t)\n\t\t\t{\n\t\t\t\tnames[id] = column.name;\n\t\t\t}\n\t\t});\n\n\t\treturn names;\n\t}\n\n\tonDefault(event: BaseEvent)\n\t{\n\t\tconst params = {\n\t\t\tCONFIRM: true,\n\t\t\tCONFIRM_MESSAGE: this.grid.arParams.CONFIRM_RESET_MESSAGE,\n\t\t};\n\n\t\tthis.grid.confirmDialog(\n\t\t\tparams,\n\t\t\t() => {\n\t\t\t\tthis.grid.getUserOptions().reset(\n\t\t\t\t\tthis.isForAll(),\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.grid.reloadTable();\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t);\n\n\t\tevent.preventDefault();\n\n\t\treturn event;\n\t}\n\n\tsortItems(): void\n\t{\n\t\t// may be implemented\n\t}\n\n\treset(): void\n\t{\n\t\tthis.options.checked = [];\n\n\t\tthis.popup.options\n\t\t\t.filter((item) => item.defaultValue)\n\t\t\t.forEach((item) => {\n\t\t\t\tthis.options.checked.push(item.id);\n\t\t\t})\n\t\t;\n\n\t\tthis.close();\n\t}\n\n\tgetSelectedColumns(): ?string[]\n\t{\n\t\treturn this.getPopup().getSelectedOptions();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.popup?.destroy();\n\t}\n\n\tisForAll(): boolean\n\t{\n\t\treturn this.isForAllValue;\n\t}\n\n\tisAdmin(): boolean\n\t{\n\t\treturn Boolean(this.parent.arParams.IS_ADMIN ?? false);\n\t}\n\n\tgetPopupItems(): HTMLCollection\n\t{\n\t\treturn this.options.columns;\n\t}\n\n\tgetItems(): []\n\t{\n\t\treturn this.getPopup().getOptions();\n\t}\n\n\tselect(id: string): void\n\t{\n\t\tthis.getPopup().selectOption(id);\n\t}\n\n\tsaveColumnsByNames(columns: string[], callback: Function): void\n\t{\n\t\tthis.getItems()\n\t\t\t.filter((item) => columns.includes(item.id))\n\t\t\t.forEach((item) => this.select(item.id))\n\t\t;\n\n\t\tthis.getPopup().apply();\n\n\t\tif (Type.isFunction(callback))\n\t\t{\n\t\t\tcallback();\n\t\t}\n\t}\n}\n\nnamespace.CheckboxList = CheckboxList;\n","/* eslint-disable */\n\n;(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid.SettingsWindow');\n\n\n\t/**\n\t * @param {BX.Main.grid} parent\n\t * @param {HTMLElement} node\n\t * @constructor\n\t */\n\tBX.Grid.SettingsWindow.Column = function(parent, node)\n\t{\n\t\tthis.node = null;\n\t\tthis.label = null;\n\t\tthis.checkbox = null;\n\t\tthis.editButton = null;\n\t\tthis.settings = null;\n\t\tthis.parent = null;\n\t\tthis.default = null;\n\t\tthis.defaultTitle = null;\n\t\tthis.state = null;\n\t\tthis.lastTitle = null;\n\t\tthis.init(parent, node);\n\t};\n\n\tBX.Grid.SettingsWindow.Column.inited = {};\n\n\tBX.Grid.SettingsWindow.Column.prototype = {\n\t\tinit: function(parent, node)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tthis.node = node;\n\n\t\t\ttry {\n\t\t\t\tthis.lastTitle = node.querySelector(\"label\").innerText.trim();\n\t\t\t} catch (err) {}\n\n\t\t\tthis.updateState();\n\n\t\t\tif (!BX.Grid.SettingsWindow.Column.inited[this.getId()])\n\t\t\t{\n\t\t\t\tBX.Grid.SettingsWindow.Column.inited[this.getId()] = true;\n\t\t\t\tBX.bind(this.getEditButton(), 'click', BX.proxy(this.onEditButtonClick, this));\n\t\t\t\tBX.bind(this.getStickyButton(), 'click', BX.proxy(this.onStickyButtonClick, this));\n\t\t\t}\n\t\t},\n\n\t\tgetStickyButton: function()\n\t\t{\n\t\t\treturn this.node.querySelector(\".main-grid-settings-window-list-item-sticky-button\");\n\t\t},\n\n\t\tisSticked: function()\n\t\t{\n\t\t\treturn this.node.classList.contains(\"main-grid-settings-window-list-item-sticked\");\n\t\t},\n\n\t\tonStickyButtonClick: function()\n\t\t{\n\t\t\tif (this.isSticked())\n\t\t\t{\n\t\t\t\tthis.unstick();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stick();\n\t\t\t}\n\t\t},\n\n\t\tstick: function()\n\t\t{\n\t\t\tthis.node.classList.add(\"main-grid-settings-window-list-item-sticked\");\n\t\t},\n\n\t\tunstick: function()\n\t\t{\n\t\t\tthis.node.classList.remove(\"main-grid-settings-window-list-item-sticked\");\n\t\t},\n\n\t\tonEditButtonClick: function(event)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t\tthis.isEditEnabled() ? this.disableEdit() : this.enableEdit();\n\t\t},\n\n\n\t\t/**\n\t\t * @private\n\t\t * @param {object} state\n\t\t * @property {boolean} state.selected\n\t\t * @property {title} state.title\n\t\t */\n\t\tsetState: function(state)\n\t\t{\n\t\t\tthis.state = state;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets state of column\n\t\t * @return {object}\n\t\t */\n\t\tgetState: function()\n\t\t{\n\t\t\treturn this.state;\n\t\t},\n\n\n\t\t/**\n\t\t * Updates default state\n\t\t */\n\t\tupdateState: function()\n\t\t{\n\t\t\tthis.setState({\n\t\t\t\tselected: this.isSelected(),\n\t\t\t\tsticked: this.isSticked(),\n\t\t\t\ttitle: this.getTitle()\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Restores last state\n\t\t */\n\t\trestoreState: function()\n\t\t{\n\t\t\tvar state = this.getState();\n\n\t\t\tstate.selected ? this.select() : this.unselect();\n\t\t\tstate.sticked ? this.stick() : this.unstick();\n\t\t\tthis.setTitle(state.title);\n\t\t},\n\n\n\t\t/**\n\t\t * Gets column id\n\t\t * @return {string}\n\t\t */\n\t\tgetId: function()\n\t\t{\n\t\t\treturn this.getNode().dataset.name;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets column title\n\t\t * @return {string}\n\t\t */\n\t\tgetTitle: function()\n\t\t{\n\t\t\treturn this.getLabel().innerText;\n\t\t},\n\n\n\t\t/**\n\t\t * Sets column title\n\t\t * @param {string} title\n\t\t */\n\t\tsetTitle: function(title)\n\t\t{\n\t\t\tthis.getLabel().innerText = !!title && title !== \"undefined\" ? title : this.getDefaultTitle();\n\t\t},\n\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tisEdited: function()\n\t\t{\n\t\t\treturn this.getTitle() !== this.getDefaultTitle();\n\t\t},\n\n\n\t\t/**\n\t\t * Gets column settings\n\t\t * @return {?object}\n\t\t */\n\t\tgetSettings: function()\n\t\t{\n\t\t\tif (this.settings === null)\n\t\t\t{\n\t\t\t\tvar columns = this.parent.getParam('DEFAULT_COLUMNS');\n\t\t\t\tthis.settings = this.getId() in columns ? columns[this.getId()] : {};\n\t\t\t}\n\n\t\t\treturn this.settings;\n\t\t},\n\n\n\t\t/**\n\t\t * Checks column is default\n\t\t * @return {boolean}\n\t\t */\n\t\tisDefault: function()\n\t\t{\n\t\t\tif (this.default === null)\n\t\t\t{\n\t\t\t\tvar settings = this.getSettings();\n\t\t\t\tthis.default = 'default' in settings ? settings.default : false;\n\t\t\t}\n\n\t\t\treturn this.default;\n\t\t},\n\n\n\t\t/**\n\t\t * Restore column to default state\n\t\t */\n\t\trestore: function()\n\t\t{\n\t\t\tthis.isDefault() ? this.select() : this.unselect();\n\t\t\tthis.setTitle(this.getDefaultTitle());\n\t\t\tthis.node.dataset.stickedDefault === \"true\" ? this.stick() : this.unstick();\n\t\t\tthis.disableEdit();\n\t\t\tthis.updateState();\n\t\t},\n\n\n\t\t/**\n\t\t * Gets default column title\n\t\t * @return {?string}\n\t\t */\n\t\tgetDefaultTitle: function()\n\t\t{\n\t\t\tif (this.defaultTitle === null)\n\t\t\t{\n\t\t\t\tvar settings = this.getSettings();\n\t\t\t\tthis.defaultTitle = 'name' in settings ? settings.name : this.lastTitle;\n\t\t\t}\n\n\t\t\treturn this.defaultTitle;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets column node\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetNode: function()\n\t\t{\n\t\t\treturn this.node;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets column label node\n\t\t * @return {?HTMLLabelElement}\n\t\t */\n\t\tgetLabel: function()\n\t\t{\n\t\t\tif (this.label === null)\n\t\t\t{\n\t\t\t\tthis.label = BX.Grid.Utils.getByTag(this.getNode(), 'label', true);\n\t\t\t\tBX.Event.bind(this.label, 'paste', this.onLabelPaste.bind(this));\n\t\t\t\tBX.Event.bind(this.label, 'keydown', this.onLabelKeydown.bind(this));\n\t\t\t}\n\n\t\t\treturn this.label;\n\t\t},\n\n\t\tonLabelPaste: function(event)\n\t\t{\n\t\t\tevent.preventDefault();\n\n\t\t\tif (event.clipboardData && event.clipboardData.getData)\n\t\t\t{\n\t\t\t\tvar sourceText = event.clipboardData.getData(\"text/plain\");\n\t\t\t\tvar encodedText = BX.Text.encode(sourceText);\n\t\t\t\tvar formattedHtml = encodedText\n\t\t\t\t\t.trim()\n\t\t\t\t\t.replace(new RegExp('\\t', 'g'), \" \")\n\t\t\t\t\t.replace(new RegExp('\\n', 'g'), \" \")\n\t\t\t\t\t.replace(/ +(?= )/g,'');\n\t\t\t\tdocument.execCommand(\"insertHTML\", false, formattedHtml);\n\t\t\t}\n\t\t},\n\n\t\tonLabelKeydown: function(event)\n\t\t{\n\t\t\tif (event.keyCode === 13)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Gets column checkbox node\n\t\t * @return {?HTMLInputElement}\n\t\t */\n\t\tgetCheckbox: function()\n\t\t{\n\t\t\tif (this.checkbox === null)\n\t\t\t{\n\t\t\t\tthis.checkbox = BX.Grid.Utils.getBySelector(this.getNode(), 'input[type=\"checkbox\"]', true);\n\t\t\t}\n\n\t\t\treturn this.checkbox;\n\t\t},\n\n\n\t\t/**\n\t\t * Gets edit button\n\t\t * @return {?HTMLElement}\n\t\t */\n\t\tgetEditButton: function()\n\t\t{\n\t\t\tif (this.editButton === null)\n\t\t\t{\n\t\t\t\tthis.editButton = BX.Grid.Utils.getByClass(\n\t\t\t\t\tthis.getNode(),\n\t\t\t\t\tthis.parent.settings.get('classSettingsWindowColumnEditButton'),\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn this.editButton;\n\t\t},\n\n\n\t\t/**\n\t\t * Enables edit mode\n\t\t */\n\t\tenableEdit: function()\n\t\t{\n\t\t\tthis.getLabel().contentEditable = true;\n\t\t\tthis.getCheckbox().disabled = true;\n\t\t\tthis.adjustCaret();\n\t\t},\n\n\n\t\t/**\n\t\t * Disables edit mode\n\t\t */\n\t\tdisableEdit: function()\n\t\t{\n\t\t\tthis.getLabel().contentEditable = false;\n\t\t\tthis.getCheckbox().disabled = false;\n\t\t},\n\n\n\t\t/**\n\t\t * Checks is edit enabled\n\t\t * @return {boolean}\n\t\t */\n\t\tisEditEnabled: function()\n\t\t{\n\t\t\treturn this.getLabel().isContentEditable;\n\t\t},\n\n\n\t\t/**\n\t\t * Checks column is active\n\t\t * @return {boolean}\n\t\t */\n\t\tisSelected: function()\n\t\t{\n\t\t\treturn this.getCheckbox().checked;\n\t\t},\n\n\n\t\t/**\n\t\t * Selects column\n\t\t */\n\t\tselect: function()\n\t\t{\n\t\t\tthis.getCheckbox().checked = true;\n\t\t},\n\n\n\t\t/**\n\t\t * Unselects column\n\t\t */\n\t\tunselect: function()\n\t\t{\n\t\t\tthis.getCheckbox().checked = false;\n\t\t},\n\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tadjustCaret: function()\n\t\t{\n\t\t\tvar range = document.createRange();\n\t\t\tvar selection = window.getSelection();\n\t\t\tvar elementTextLength = this.getLabel().innerText.length;\n\t\t\tvar textNodes = this.getLabel().childNodes;\n\t\t\tvar lastTextNode = textNodes[textNodes.length - 1];\n\n\t\t\trange.setStart(lastTextNode, elementTextLength);\n\t\t\trange.setEnd(lastTextNode, elementTextLength);\n\t\t\trange.collapse(true);\n\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t\tBX.fireEvent(this.getNode(), 'focus');\n\t\t}\n\t};\n\n})();\n","import { Tag, Text, Type } from 'main.core';\n\n(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid.SettingsWindow');\n\n\t/**\n\t * @param {BX.Main.grid} parent\n\t * @constructor\n\t */\n\tBX.Grid.SettingsWindow.Manager = function(parent)\n\t{\n\t\tthis.parent = null;\n\n\t\tthis.fieldsSettingsInstance = null;\n\t\tthis.init(parent);\n\t};\n\n\tBX.Grid.SettingsWindow.Manager.prototype = {\n\t\tinit(parent)\n\t\t{\n\t\t\tthis.parent = parent;\n\t\t\tBX.bind(this.parent.getContainer(), 'click', BX.proxy(this._onContainerClick, this));\n\t\t\tBX.addCustomEvent(window, 'Grid::columnMoved', BX.proxy(this._onColumnMoved, this));\n\t\t},\n\n\t\tdestroy()\n\t\t{\n\t\t\tBX.unbind(this.parent.getContainer(), 'click', BX.proxy(this._onContainerClick, this));\n\t\t\tBX.removeCustomEvent(window, 'Grid::columnMoved', BX.proxy(this._onColumnMoved, this));\n\t\t\tthis.getPopup().close();\n\t\t},\n\n\t\t_onContainerClick(event)\n\t\t{\n\t\t\tif (BX.hasClass(event.target, this.parent.settings.get('classSettingsButton')))\n\t\t\t{\n\t\t\t\tthis._onSettingsButtonClick(event);\n\t\t\t}\n\t\t},\n\n\t\t_onSettingsButtonClick()\n\t\t{\n\t\t\tthis.getFieldsSettingsInstance().then((fieldsSettingsInstance) => {\n\t\t\t\tthis.fieldsSettingsInstance = fieldsSettingsInstance;\n\t\t\t\tthis.fieldsSettingsInstance.show();\n\n\t\t\t\tBX.onCustomEvent(window, 'BX.Grid.SettingsWindow:show', [this.fieldsSettingsInstance]);\n\t\t\t});\n\t\t},\n\n\t\tgetFieldsSettingsInstance()\n\t\t{\n\t\t\tif (this.fieldsSettingsInstance)\n\t\t\t{\n\t\t\t\treturn Promise.resolve(this.fieldsSettingsInstance);\n\t\t\t}\n\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tconst fieldsSettingsInstance = this.createFieldsSettingsInstance();\n\n\t\t\t\tresolve(fieldsSettingsInstance);\n\t\t\t});\n\t\t},\n\n\t\tcreateFieldsSettingsInstance()\n\t\t{\n\t\t\tlet fieldsSettingsInstance = null;\n\t\t\tconst { parent } = this;\n\n\t\t\tconst params = {\n\t\t\t\tgrid: parent,\n\t\t\t\tparent,\n\t\t\t\tisUseLazyLoadColumns: this.useLazyLoadColumns(),\n\t\t\t\ttitle: this.getPopupTitle(),\n\t\t\t\tplaceholder: parent.getParam('SETTINGS_FIELD_SEARCH_PLACEHOLDER'),\n\t\t\t\temptyStateTitle: parent.getParam('SETTINGS_FIELD_SEARCH_EMPTY_STATE_TITLE'),\n\t\t\t\temptyStateDescription: parent.getParam('SETTINGS_FIELD_SEARCH_EMPTY_STATE_DESCRIPTION'),\n\t\t\t\tallSectionsDisabledTitle: parent.getParam('SETTINGS_FIELD_SEARCH_ALL_SECTIONS_DISABLED'),\n\t\t\t};\n\n\t\t\tif (this.useCheckboxList())\n\t\t\t{\n\t\t\t\tfieldsSettingsInstance = new BX.Grid.SettingsWindow.CheckboxList(params);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfieldsSettingsInstance = new BX.Grid.SettingsWindow.Popup(params);\n\t\t\t}\n\n\t\t\tfieldsSettingsInstance.createPopup();\n\n\t\t\tBX.onCustomEvent(window, 'BX.Grid.SettingsWindow:init', [fieldsSettingsInstance]);\n\n\t\t\treturn fieldsSettingsInstance;\n\t\t},\n\n\t\tuseCheckboxList()\n\t\t{\n\t\t\treturn Boolean(this.parent.getParam('USE_CHECKBOX_LIST_FOR_SETTINGS_POPUP'))\n\t\t\t\t&& Type.isFunction(BX.UI?.CheckboxList)\n\t\t\t;\n\t\t},\n\n\t\tuseLazyLoadColumns()\n\t\t{\n\t\t\treturn Boolean(this.parent.getParam('LAZY_LOAD'));\n\t\t},\n\n\t\t_onColumnMoved()\n\t\t{\n\t\t\tthis.sortItems();\n\t\t\tthis.reset();\n\t\t},\n\n\t\tsortItems()\n\t\t{\n\t\t\tthis.getPopup().sortItems();\n\t\t},\n\n\t\treset()\n\t\t{\n\t\t\tthis.getPopup().reset();\n\t\t},\n\n\t\tgetSelectedColumns()\n\t\t{\n\t\t\treturn this.getPopup().getSelectedColumns();\n\t\t},\n\n\t\tgetPopup()\n\t\t{\n\t\t\tif (this.fieldsSettingsInstance === null)\n\t\t\t{\n\t\t\t\tthis.fieldsSettingsInstance = this.createFieldsSettingsInstance();\n\t\t\t}\n\n\t\t\treturn this.fieldsSettingsInstance;\n\t\t},\n\n\t\tgetPopupTitle(): string\n\t\t{\n\t\t\tconst customSettingsTitle = this.parent.getParam('SETTINGS_WINDOW_TITLE');\n\t\t\tconst settingsTitle = this.parent.getParam('SETTINGS_TITLE');\n\t\t\tconst tmpDiv = Tag.render`<div></div>`;\n\n\t\t\tif (Type.isStringFilled(customSettingsTitle))\n\t\t\t{\n\t\t\t\ttmpDiv.innerHTML = `<span>${settingsTitle} &laquo;${customSettingsTitle}&raquo;</span>`;\n\n\t\t\t\treturn tmpDiv.firstChild.innerText;\n\t\t\t}\n\n\t\t\tconst gridsCount = BX.Main.gridManager.data.length;\n\n\t\t\tif (gridsCount === 1)\n\t\t\t{\n\t\t\t\tconst pageTitleNode = document.getElementById('pagetitle');\n\t\t\t\tconst pageTitle = (\n\t\t\t\t\tType.isDomNode(pageTitleNode) && Type.isStringFilled(pageTitleNode.innerText)\n\t\t\t\t\t\t? `&laquo;${Text.encode(pageTitleNode.innerText)}&raquo;`\n\t\t\t\t\t\t: ''\n\t\t\t\t);\n\n\t\t\t\ttmpDiv.innerHTML = `<span>${settingsTitle} ${pageTitle}</span>`;\n\n\t\t\t\treturn tmpDiv.firstChild.innerText;\n\t\t\t}\n\n\t\t\treturn settingsTitle;\n\t\t},\n\n\t\tgetShowedColumns(): string[]\n\t\t{\n\t\t\tconst result = [];\n\t\t\tconst cells = this.parent.getRows().getHeadFirstChild().getCells();\n\n\t\t\t[].slice.call(cells).forEach((column) => {\n\t\t\t\tif ('name' in column.dataset)\n\t\t\t\t{\n\t\t\t\t\tresult.push(column.dataset.name);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetItems(): []\n\t\t{\n\t\t\treturn this.getPopup().getItems();\n\t\t},\n\n\t\tsaveColumns(columns: string[], callback: Function): void\n\t\t{\n\t\t\tthis.getPopup().saveColumnsByNames(columns, callback);\n\t\t},\n\n\t\tselect(name): void\n\t\t{\n\t\t\tthis.getPopup().select(name);\n\t\t},\n\t};\n})();\n","import { ajax as Ajax, Dom, Event, Reflection, Tag, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Loader } from 'main.loader';\nimport { Popup as MainPopup } from 'main.popup';\nimport type { PopupInterface } from './popup-interface';\n\nconst namespace = Reflection.namespace('BX.Grid.SettingsWindow');\n\nclass Popup implements PopupInterface\n{\n\toptions: Object = {};\n\tgrid: BX.Main.grid;\n\tparent: BX.Grid.SettingsWindow;\n\n\titems: ?[] = null;\n\tpopupItems: ?HTMLCollection = null;\n\tpopup: MainPopup = null;\n\tfilterSectionsSearchInput: ?HTMLElement = null;\n\tfilterSections: ?HTMLCollection = null;\n\tallColumns: Object<string, string> = null;\n\tapplyButton: HTMLElement = null;\n\tresetButton: HTMLElement = null;\n\tcancelButton: HTMLElement = null;\n\tselectAllButton: HTMLElement = null;\n\tunselectAllButton: HTMLElement = null;\n\n\tconstructor(options: Object)\n\t{\n\t\tthis.options = options;\n\n\t\tthis.grid = options.grid;\n\t\tthis.parent = options.parent;\n\t}\n\n\tgetPopup(): MainPopup\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tthis.createPopup();\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\tcreatePopup(): void\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst leftIndentFromWindow = 20;\n\t\tconst rightIndentFromWindow = 20;\n\t\tconst popupWidth = document.body.offsetWidth > 1000\n\t\t\t? 1000\n\t\t\t: document.body.offsetWidth - leftIndentFromWindow - rightIndentFromWindow\n\t\t;\n\n\t\tconst { title: titleBar } = this.options;\n\n\t\tthis.popup = new MainPopup(\n\t\t\tthis.getPopupId(),\n\t\t\tnull,\n\t\t\t{\n\t\t\t\ttitleBar,\n\t\t\t\tautoHide: false,\n\t\t\t\toverlay: 0.6,\n\t\t\t\twidth: popupWidth,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcontentNoPaddings: true,\n\t\t\t\tcontent: this.getSourceContent(),\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: this.onPopupClose.bind(this),\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tthis.getItems().forEach((item) => {\n\t\t\tEvent.bind(item.getNode(), 'click', this.onItemClick.bind(this));\n\t\t\tEvent.bind(item.getNode(), 'animationend', this.onAnimationEnd.bind(this, item.getNode()));\n\t\t});\n\n\t\tEvent.bind(this.getResetButton(), 'click', this.onResetButtonClick.bind(this));\n\t\tEvent.bind(this.getApplyButton(), 'click', this.onApplyButtonClick.bind(this));\n\t\tEvent.bind(this.getCancelButton(), 'click', this.popup.close.bind(this.popup));\n\t\tEvent.bind(this.getSelectAllButton(), 'click', this.onSelectAll.bind(this));\n\t\tEvent.bind(this.getUnselectAllButton(), 'click', this.onUnselectAll.bind(this));\n\n\t\tif (\n\t\t\tType.isObjectLike(this.grid.arParams.COLUMNS_ALL_WITH_SECTIONS)\n\t\t\t&& Object.keys(this.grid.arParams.COLUMNS_ALL_WITH_SECTIONS).length > 0\n\t\t)\n\t\t{\n\t\t\tthis.prepareFilterSections();\n\t\t}\n\n\t\tif (this.grid.arParams.ENABLE_FIELDS_SEARCH)\n\t\t{\n\t\t\tthis.prepareFilterSectionsSearchInput();\n\t\t}\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.popup.show();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.onPopupClose();\n\t}\n\n\tonPopupClose(): void\n\t{\n\t\tthis.emitSaveEvent();\n\n\t\tthis.restoreLastColumns();\n\t\tthis.disableAllColumnsLabelEdit();\n\t\tthis.adjustActionButtonsState();\n\t}\n\n\temitSaveEvent(): void\n\t{\n\t\tEventEmitter.emit(window, 'BX.Grid.SettingsWindow:close', [this, this.parent]);\n\t}\n\n\trestoreLastColumns(): void\n\t{\n\t\tthis.getItems().forEach((current) => current.restoreState());\n\t}\n\n\tdisableAllColumnsLabelEdit(): void\n\t{\n\t\tthis.getItems().forEach((column) => column.disableEdit());\n\t}\n\n\tgetPopupId(): string\n\t{\n\t\treturn `${this.grid.getContainerId()}-grid-settings-window`;\n\t}\n\n\tgetSourceContent(): ?HTMLElement\n\t{\n\t\tconst classSettingsWindow = this.grid.settings.get('classSettingsWindow');\n\t\tconst sourceContent = this.grid.getContainer().querySelector(`.${classSettingsWindow}`);\n\n\t\tif (!this.options.isUseLazyLoadColumns)\n\t\t{\n\t\t\treturn sourceContent;\n\t\t}\n\n\t\tconst contentList = sourceContent.querySelector('.main-grid-settings-window-list');\n\t\tcontentList.innerHTML = '';\n\n\t\tconst loader = new Loader({\n\t\t\ttarget: contentList,\n\t\t});\n\n\t\tvoid loader.show();\n\n\t\tthis\n\t\t\t.fetchColumns()\n\t\t\t.then((response) => {\n\t\t\t\tresponse.forEach((columnOptions) => {\n\t\t\t\t\tthis.prepareColumnOptions(columnOptions);\n\t\t\t\t\tDom.append(this.createColumnElement(columnOptions), contentList);\n\t\t\t\t});\n\n\t\t\t\tthis.hideAndDestroyLoader();\n\n\t\t\t\tthis.reset();\n\n\t\t\t\tthis.getItems().forEach((item) => {\n\t\t\t\t\tEvent.bind(item.getNode(), 'click', this.onItemClick);\n\t\t\t\t});\n\n\t\t\t\tconst fixedFooter = Tag.render`\n\t\t\t\t\t<div class=\"main-grid-popup-window-buttons-wrapper\"></div>\n\t\t\t\t`;\n\n\t\t\t\tDom.append(sourceContent.querySelector('.popup-window-buttons'), fixedFooter);\n\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tDom.style(\n\t\t\t\t\t\tfixedFooter,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twidth: `${this.getPopupContainer().clientWidth}px`,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\n\t\t\t\t\tDom.append(fixedFooter, this.getPopupContainer());\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t})\n\t\t;\n\n\t\treturn sourceContent;\n\t}\n\n\tfetchColumns(): BX.Promise\n\t{\n\t\t// @todo replace to vanilla Promise\n\t\tconst promise = new BX.Promise();\n\n\t\tconst lazyLoadParams = this.grid.getParam('LAZY_LOAD');\n\t\tconst gridId = this.grid.getId();\n\n\t\tif (Type.isPlainObject(lazyLoadParams))\n\t\t{\n\t\t\tconst { controller, GET_LIST: url } = lazyLoadParams;\n\n\t\t\tif (Type.isNil(controller))\n\t\t\t{\n\t\t\t\tajax({\n\t\t\t\t\turl,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tonsuccess: promise.fulfill.bind(promise),\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tAjax.runAction(\n\t\t\t\t\t`${controller}.getColumnsList`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tgridId,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t).then(promise.fulfill.bind(promise));\n\t\t\t}\n\t\t}\n\n\t\treturn promise;\n\t}\n\n\tprepareColumnOptions(options): void\n\t{\n\t\tif (!Type.isPlainObject(options))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst customNames = this.grid.getUserOptions().getCurrentOptions().custom_names;\n\t\tif (Type.isPlainObject(customNames) && options.id in customNames)\n\t\t{\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\toptions.name = customNames[options.id];\n\t\t}\n\n\t\tif (this.grid.getColumnHeaderCellByName(options.id))\n\t\t{\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\toptions.selected = true;\n\t\t}\n\t}\n\n\tcreateColumnElement(options): HTMLElement\n\t{\n\t\tconst checkboxId = `${options.id}-checkbox`;\n\t\tconst checkedClass = options.selected ? ' checked' : '';\n\n\t\treturn Tag.render`\n\t\t\t<div data-name=${options.id} class='main-grid-settings-window-list-item'>\n\t\t\t\t<input\n\t\t\t\t\tid='${checkboxId}'\n\t\t\t\t\ttype='checkbox'\n\t\t\t\t\tclass='main-grid-settings-window-list-item-checkbox${checkedClass})'\n\t\t\t\t>\n\t\t\t\t<label\n\t\t\t\t\tfor='${checkboxId}'\n\t\t\t\t\tclass='main-grid-settings-window-list-item-label'\n\t\t\t\t>\n\t\t\t\t\t${options.name}\n\t\t\t\t</label>\n\t\t\t\t<span class='main-grid-settings-window-list-item-edit-button'></span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\thideAndDestroyLoader(loader: Loader): void\n\t{\n\t\tvoid loader.hide().then(() => loader.destroy());\n\t}\n\n\tonItemClick(): void\n\t{\n\t\tthis.adjustActionButtonsState();\n\t}\n\n\tonAnimationEnd(node: HTMLElement): void\n\t{\n\t\tconst display = (\n\t\t\tDom.hasClass(node, this.grid.settings.get('classSettingsWindowSearchSectionItemHidden'))\n\t\t\t\t? 'none'\n\t\t\t\t: 'inline-block'\n\t\t);\n\n\t\tDom.style(node, { display });\n\t}\n\n\tadjustActionButtonsState(): void\n\t{\n\t\tif (this.getSelectedColumns().length > 0)\n\t\t{\n\t\t\tthis.enableActions();\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.disableActions();\n\t}\n\n\tgetSelectedColumns(): []\n\t{\n\t\tconst columns = [];\n\n\t\tthis.getItems().forEach((column) => {\n\t\t\tif (column.isSelected())\n\t\t\t{\n\t\t\t\tcolumns.push(column.getId());\n\t\t\t}\n\t\t});\n\n\t\treturn columns;\n\t}\n\n\tgetItems(): ?BX.Grid.SettingsWindow.Column[]\n\t{\n\t\tif (this.items === null)\n\t\t{\n\t\t\tconst { grid } = this;\n\t\t\tconst items = this.getPopupItems();\n\t\t\tthis.items = [...items].map((current) => {\n\t\t\t\treturn new BX.Grid.SettingsWindow.Column(grid, current);\n\t\t\t});\n\t\t}\n\n\t\treturn this.items;\n\t}\n\n\tgetPopupItems(): HTMLCollection\n\t{\n\t\tif (!this.popupItems)\n\t\t{\n\t\t\tconst popupContainer = this.getPopupContentContainer();\n\t\t\tconst selector = this.grid.settings.get('classSettingsWindowColumn');\n\t\t\tthis.popupItems = popupContainer.getElementsByClassName(selector);\n\t\t}\n\n\t\treturn this.popupItems;\n\t}\n\n\tenableActions(): void\n\t{\n\t\tconst applyButton = this.getApplyButton();\n\n\t\tif (applyButton)\n\t\t{\n\t\t\tDom.removeClass(applyButton, this.grid.settings.get('classDisable'));\n\t\t}\n\t}\n\n\tprepareFilterSectionsSearchInput(): void\n\t{\n\t\tconst input = this.getFilterSectionsSearchInput();\n\n\t\tEvent.bind(input, 'input', this.onFilterSectionSearchInput.bind(this));\n\t\tEvent.bind(input.previousElementSibling, 'click', this.onFilterSectionSearchInputClear.bind(this));\n\t}\n\n\tgetFilterSectionsSearchInput(): HTMLElement | null\n\t{\n\t\tif (!this.filterSectionsSearchInput)\n\t\t{\n\t\t\tconst selector = this.grid.settings.get('classSettingsWindowSearchSectionInput');\n\t\t\tthis.filterSectionsSearchInput = this.getPopupContentContainer().querySelector(`.${selector}`);\n\t\t}\n\n\t\treturn this.filterSectionsSearchInput;\n\t}\n\n\tonFilterSectionSearchInput(): void\n\t{\n\t\tlet search = this.filterSectionsSearchInput.value;\n\t\tif (search.length > 0)\n\t\t{\n\t\t\tsearch = search.toLowerCase();\n\t\t}\n\n\t\tthis.items.forEach((item) => {\n\t\t\tconst title = item.lastTitle.toLowerCase();\n\t\t\tconst node = item.getNode();\n\n\t\t\tif (search.length > 0 && !title.includes(search))\n\t\t\t{\n\t\t\t\tDom.removeClass(\n\t\t\t\t\tnode,\n\t\t\t\t\tthis.grid.settings.get('classSettingsWindowSearchSectionItemVisible'),\n\t\t\t\t);\n\t\t\t\tDom.addClass(\n\t\t\t\t\tnode,\n\t\t\t\t\tthis.grid.settings.get('classSettingsWindowSearchSectionItemHidden'),\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(\n\t\t\t\t\tnode,\n\t\t\t\t\tthis.grid.settings.get('classSettingsWindowSearchSectionItemHidden'),\n\t\t\t\t);\n\t\t\t\tDom.addClass(\n\t\t\t\t\tnode,\n\t\t\t\t\tthis.grid.settings.get('classSettingsWindowSearchSectionItemVisible'),\n\t\t\t\t);\n\n\t\t\t\tDom.style(node, { display: 'inline-block' });\n\t\t\t}\n\t\t});\n\t}\n\n\tonFilterSectionSearchInputClear(): void\n\t{\n\t\tthis.filterSectionsSearchInput.value = '';\n\t\tthis.onFilterSectionSearchInput();\n\t}\n\n\tgetResetButton(): HTMLElement\n\t{\n\t\tif (this.resetButton === null)\n\t\t{\n\t\t\tthis.resetButton = document.getElementById(this.getResetButtonId());\n\t\t}\n\n\t\treturn this.resetButton;\n\t}\n\n\tgetResetButtonId(): string\n\t{\n\t\treturn `${this.grid.getContainerId()}-grid-settings-reset-button`;\n\t}\n\n\tonResetButtonClick(): void\n\t{\n\t\tconst params = {\n\t\t\tCONFIRM: true,\n\t\t\tCONFIRM_MESSAGE: this.grid.arParams.CONFIRM_RESET_MESSAGE,\n\t\t};\n\n\t\tthis.grid.confirmDialog(\n\t\t\tparams,\n\t\t\t() => {\n\t\t\t\tthis.enableWait(this.getApplyButton());\n\n\t\t\t\tthis.grid.getUserOptions().reset(\n\t\t\t\t\tthis.isForAll(),\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.grid.reloadTable(null, null, () => {\n\t\t\t\t\t\t\tthis.restoreColumns();\n\t\t\t\t\t\t\tthis.disableWait(this.getApplyButton());\n\t\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t);\n\t}\n\n\trestoreColumns(): void\n\t{\n\t\tthis.getItems().forEach((column) => column.restore());\n\n\t\tthis.sortItems();\n\t\tthis.reset();\n\t}\n\n\tsortItems(): void\n\t{\n\t\tconst showedColumns = this.getShowedColumns();\n\t\tconst allColumns = {};\n\n\t\tthis.getAllColumns().forEach((name) => {\n\t\t\tallColumns[name] = name;\n\t\t});\n\n\t\tlet counter = 0;\n\t\tObject.keys(allColumns).forEach((name) => {\n\t\t\tif (this.isShowedColumn(name))\n\t\t\t{\n\t\t\t\tallColumns[name] = showedColumns[counter];\n\t\t\t\tcounter++;\n\t\t\t}\n\n\t\t\tconst current = this.getColumnByName(allColumns[name]);\n\t\t\tif (current)\n\t\t\t{\n\t\t\t\tDom.append(current, current.parentNode);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetShowedColumns(): string[]\n\t{\n\t\treturn this.parent.gridSettings.getSelectedColumns();\n\t}\n\n\tgetColumnByName(name)\n\t{\n\t\treturn BX.Grid.Utils.getBySelector(\n\t\t\tthis.getPopupContainer(),\n\t\t\t`.${this.grid.settings.get('classSettingsWindowColumn')}[data-name=\"${name}\"]`,\n\t\t\ttrue,\n\t\t);\n\t}\n\n\tisShowedColumn(columnName): boolean\n\t{\n\t\treturn this.getSelectedColumns().includes(columnName);\n\t}\n\n\tgetAllColumns()\n\t{\n\t\tif (!this.allColumns)\n\t\t{\n\t\t\tthis.allColumns = this.getItems().map((column) => column.getId());\n\t\t}\n\n\t\treturn this.allColumns;\n\t}\n\n\treset(): void\n\t{\n\t\tthis.popupItems = null;\n\t\tthis.allColumns = null;\n\t\tthis.items = null;\n\t}\n\n\tgetApplyButton(): HTMLElement\n\t{\n\t\tif (this.applyButton === null)\n\t\t{\n\t\t\tthis.applyButton = document.getElementById(this.getApplyButtonId());\n\t\t}\n\n\t\treturn this.applyButton;\n\t}\n\n\tgetApplyButtonId(): string\n\t{\n\t\treturn `${this.grid.getContainerId()}-grid-settings-apply-button`;\n\t}\n\n\tonApplyButtonClick(): void\n\t{\n\t\tconst params = {\n\t\t\tCONFIRM: this.isForAll(),\n\t\t\tCONFIRM_MESSAGE: this.grid.getParam('SETTINGS_FOR_ALL_CONFIRM_MESSAGE'),\n\t\t};\n\n\t\tthis.grid.confirmDialog(\n\t\t\tparams,\n\t\t\t() => this.onApplyConfirmDialogButton(),\n\t\t\t() => this.unselectForAllCheckbox(),\n\t\t);\n\t}\n\n\tonApplyConfirmDialogButton(): void\n\t{\n\t\tthis.enableWait(this.getApplyButton());\n\t\tthis.saveColumns(\n\t\t\tthis.getSelectedColumns(),\n\t\t\t() => {\n\t\t\t\tthis.popup.close();\n\t\t\t\tthis.disableWait(this.getApplyButton());\n\t\t\t\tthis.unselectForAllCheckbox();\n\t\t\t},\n\t\t);\n\n\t\tthis.emitSaveEvent();\n\t}\n\n\tenableWait(buttonNode): void\n\t{\n\t\tDom.addClass(buttonNode, 'ui-btn-wait');\n\t\tDom.removeClass(buttonNode, 'popup-window-button');\n\t}\n\n\tdisableWait(buttonNode): void\n\t{\n\t\tDom.removeClass(buttonNode, 'ui-btn-wait');\n\t\tDom.addClass(buttonNode, 'popup-window-button');\n\t}\n\n\tsaveColumns(columns, callback): void\n\t{\n\t\tconst options = this.grid.getUserOptions();\n\t\tconst columnNames = this.getColumnNames();\n\t\tconst stickyColumns = this.getStickedColumns();\n\t\tconst batch = [\n\t\t\t{\n\t\t\t\taction: options.getAction('GRID_SET_COLUMNS'),\n\t\t\t\tcolumns: columns.join(','),\n\t\t\t},\n\t\t\t{\n\t\t\t\taction: options.getAction('SET_CUSTOM_NAMES'),\n\t\t\t\tcustom_names: columnNames,\n\t\t\t},\n\t\t\t{\n\t\t\t\taction: options.getAction('GRID_SET_STICKED_COLUMNS'),\n\t\t\t\tstickedColumns: stickyColumns,\n\t\t\t},\n\t\t];\n\n\t\tif (this.isForAll())\n\t\t{\n\t\t\tbatch.push({\n\t\t\t\taction: options.getAction('GRID_SAVE_SETTINGS'),\n\t\t\t\tview_id: 'default',\n\t\t\t\tset_default_settings: 'Y',\n\t\t\t\tdelete_user_settings: 'Y',\n\t\t\t});\n\t\t}\n\n\t\toptions.batch(batch, () => this.grid.reloadTable(null, null, callback));\n\n\t\tthis.updateColumnsState();\n\t}\n\n\tgetColumnNames(): Object<string, string>\n\t{\n\t\tconst names = {};\n\t\tthis.getItems().forEach((column) => {\n\t\t\tif (column.isEdited())\n\t\t\t{\n\t\t\t\tnames[column.getId()] = column.getTitle();\n\t\t\t}\n\t\t});\n\n\t\treturn names;\n\t}\n\n\tgetStickedColumns(): []\n\t{\n\t\treturn this.getItems().reduce((accumulator, item) => {\n\t\t\tif (item.isSticked())\n\t\t\t{\n\t\t\t\taccumulator.push(item.getId());\n\t\t\t}\n\n\t\t\treturn accumulator;\n\t\t}, []);\n\t}\n\n\tupdateColumnsState(): void\n\t{\n\t\tthis.getItems().forEach((current) => current.updateState());\n\t}\n\n\tisForAll(): boolean\n\t{\n\t\tconst checkbox = this.getForAllCheckbox();\n\n\t\treturn checkbox && Boolean(checkbox.checked);\n\t}\n\n\tunselectForAllCheckbox(): void\n\t{\n\t\tconst checkbox = this.getForAllCheckbox();\n\t\tif (checkbox)\n\t\t{\n\t\t\tcheckbox.checked = null;\n\t\t}\n\t}\n\n\tgetForAllCheckbox(): HTMLElement\n\t{\n\t\treturn this.getPopupContainer().querySelector('.main-grid-settings-window-for-all-checkbox');\n\t}\n\n\tgetPopupContainer(): HTMLElement\n\t{\n\t\treturn this.getPopup().getPopupContainer();\n\t}\n\n\tgetPopupContentContainer(): HTMLElement\n\t{\n\t\treturn this.getPopup().getContentContainer();\n\t}\n\n\tgetCancelButton(): HTMLElement\n\t{\n\t\tif (this.cancelButton === null)\n\t\t{\n\t\t\tthis.cancelButton = document.getElementById(this.getCancelButtonId());\n\t\t}\n\n\t\treturn this.cancelButton;\n\t}\n\n\tgetCancelButtonId(): string\n\t{\n\t\treturn `${this.grid.getContainerId()}-grid-settings-cancel-button`;\n\t}\n\n\tgetSelectAllButton(): HTMLElement\n\t{\n\t\tif (!this.selectAllButton)\n\t\t{\n\t\t\tconst selector = this.grid.settings.get('classSettingsWindowSelectAll');\n\t\t\tthis.selectAllButton = this.getPopupContentContainer().querySelector(`.${selector}`);\n\t\t}\n\n\t\treturn this.selectAllButton;\n\t}\n\n\tonSelectAll(): void\n\t{\n\t\tthis.selectAll();\n\t\tthis.enableActions();\n\t}\n\n\tselectAll(): void\n\t{\n\t\tthis.getItems().forEach((column) => column.select());\n\t}\n\n\tgetUnselectAllButton(): HTMLElement | null\n\t{\n\t\tif (!this.unselectAllButton)\n\t\t{\n\t\t\tconst selector = this.grid.settings.get('classSettingsWindowUnselectAll');\n\t\t\tthis.unselectAllButton = this.getPopupContentContainer().querySelector(`.${selector}`);\n\t\t}\n\n\t\treturn this.unselectAllButton;\n\t}\n\n\tonUnselectAll(): void\n\t{\n\t\tthis.unselectAll();\n\t\tthis.disableActions();\n\t}\n\n\tdisableActions(): void\n\t{\n\t\tconst applyButton = this.getApplyButton();\n\n\t\tif (applyButton)\n\t\t{\n\t\t\tDom.addClass(applyButton, this.grid.settings.get('classDisable'));\n\t\t}\n\t}\n\n\tunselectAll(): void\n\t{\n\t\tthis.getItems().forEach((column) => column.unselect());\n\t}\n\n\tprepareFilterSections(): void\n\t{\n\t\tconst filterSections = this.getFilterSections();\n\t\tfor (const item of filterSections)\n\t\t{\n\t\t\tEvent.bind(item, 'click', this.onFilterSectionClick.bind(this, item));\n\t\t}\n\t}\n\n\tgetFilterSections(): HTMLCollection\n\t{\n\t\tif (!this.filterSections)\n\t\t{\n\t\t\tconst selector = this.grid.settings.get('classSettingsWindowSearchSectionsWrapper');\n\t\t\tconst wrapper = this.getPopupContentContainer().querySelector(`.${selector}`);\n\n\t\t\tthis.filterSections = (wrapper.children ?? new HTMLCollection());\n\t\t}\n\n\t\treturn this.filterSections;\n\t}\n\n\tonFilterSectionClick(item: HTMLElement): void\n\t{\n\t\tconst activeClass = this.grid.settings.get('classSettingsWindowSearchActiveSectionIcon');\n\t\tconst sectionId = item.dataset?.uiGridFilterSectionButton;\n\t\tconst section = document.querySelector(`[data-ui-grid-filter-section='${sectionId}']`);\n\n\t\tif (Dom.hasClass(item.firstChild, activeClass))\n\t\t{\n\t\t\tDom.removeClass(item.firstChild, activeClass);\n\t\t\tDom.hide(section);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(item.firstChild, activeClass);\n\t\t\tDom.show(section);\n\t\t}\n\t}\n\n\tselect(id: string): void\n\t{\n\t\tconst column = this.getItems().find((item) => item.getId() === id);\n\n\t\tcolumn?.select();\n\t}\n\n\tsaveColumnsByNames(columns: string[], callback: Function): void\n\t{\n\t\tthis.saveColumns(columns, callback);\n\t}\n}\n\nnamespace.Popup = Popup;\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\t/**\n\t * BX.Grid.UserOptions\n\t * @param {BX.Main.grid} parent\n\t * @param {Object} userOptions\n\t * @param {Object} userOptionsActions\n\t * @param {String} url\n\t * @constructor\n\t */\n\tBX.Grid.UserOptions = function(parent, userOptions, userOptionsActions, url)\n\t{\n\t\tthis.options = null;\n\t\tthis.actions = null;\n\t\tthis.parent = null;\n\t\tthis.url = null;\n\t\tthis.init(parent, userOptions, userOptionsActions, url);\n\t};\n\n\tBX.Grid.UserOptions.prototype = {\n\t\tinit(parent, userOptions, userOptionsActions, url)\n\t\t{\n\t\t\tthis.url = url;\n\t\t\tthis.parent = parent;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.options = eval(userOptions);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tconsole.warn('BX.Grid.UserOptions.init: Failed parse user options json string');\n\t\t\t}\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.actions = eval(userOptionsActions);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tconsole.warn('BX.Grid.UserOptions.init: Failed parse user options actions json string');\n\t\t\t}\n\t\t},\n\n\t\tgetCurrentViewName()\n\t\t{\n\t\t\tconst options = this.getOptions();\n\n\t\t\treturn 'current_view' in options ? options.current_view : null;\n\t\t},\n\n\t\tgetViewsList()\n\t\t{\n\t\t\tconst options = this.getOptions();\n\n\t\t\treturn 'views' in options ? options.views : {};\n\t\t},\n\n\t\tgetCurrentOptions()\n\t\t{\n\t\t\tconst name = this.getCurrentViewName();\n\t\t\tconst views = this.getViewsList();\n\t\t\tlet result = null;\n\n\t\t\tif (name in views)\n\t\t\t{\n\t\t\t\tresult = views[name];\n\t\t\t}\n\n\t\t\tif (!BX.type.isPlainObject(result))\n\t\t\t{\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetUrl(action)\n\t\t{\n\t\t\treturn BX.util.add_url_param(this.url, {\n\t\t\t\tGRID_ID: this.parent.getContainerId(),\n\t\t\t\tbxajaxid: this.parent.getAjaxId(),\n\t\t\t\taction,\n\t\t\t});\n\t\t},\n\n\t\tgetOptions()\n\t\t{\n\t\t\treturn this.options || {};\n\t\t},\n\n\t\tgetActions()\n\t\t{\n\t\t\treturn this.actions;\n\t\t},\n\n\t\tgetAction(name)\n\t\t{\n\t\t\tlet action = null;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\taction = this.getActions()[name];\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\taction = null;\n\t\t\t}\n\n\t\t\treturn action;\n\t\t},\n\n\t\tupdate(newOptions)\n\t\t{\n\t\t\tthis.options = newOptions;\n\t\t},\n\n\t\tsetColumns(columns, callback)\n\t\t{\n\t\t\tconst options = this.getCurrentOptions();\n\n\t\t\tif (BX.type.isPlainObject(options))\n\t\t\t{\n\t\t\t\toptions.columns = columns.join(',');\n\n\t\t\t\tthis.save(this.getAction('GRID_SET_COLUMNS'), { columns: options.columns }, callback);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tsetColumnsNames(columns, callback)\n\t\t{\n\t\t\tconst options = { view_id: 'default' };\n\n\t\t\tif (BX.type.isPlainObject(options))\n\t\t\t{\n\t\t\t\toptions.custom_names = columns;\n\n\t\t\t\tthis.save(this.getAction('SET_CUSTOM_NAMES'), options, callback);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tsetColumnSizes(sizes, expand)\n\t\t{\n\t\t\tthis.save(this.getAction('GRID_SET_COLUMN_SIZES'), { sizes, expand });\n\t\t},\n\n\t\treset(forAll, callback)\n\t\t{\n\t\t\tlet data = {};\n\n\t\t\tif (forAll)\n\t\t\t{\n\t\t\t\tdata = {\n\t\t\t\t\tview_id: 'default',\n\t\t\t\t\tset_default_settings: 'Y',\n\t\t\t\t\tdelete_user_settings: 'Y',\n\t\t\t\t\tview_settings: this.getCurrentOptions(),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.save(this.getAction('GRID_RESET'), data, callback);\n\t\t},\n\n\t\tsetSort(by, order, callback)\n\t\t{\n\t\t\tif (by && order)\n\t\t\t{\n\t\t\t\tthis.save(this.getAction('GRID_SET_SORT'), { by, order }, callback);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\tsetPageSize(pageSize, callback)\n\t\t{\n\t\t\tif (BX.type.isNumber(parseInt(pageSize)))\n\t\t\t{\n\t\t\t\tthis.save(this.getAction('GRID_SET_PAGE_SIZE'), { pageSize }, callback);\n\t\t\t}\n\t\t},\n\n\t\tsetExpandedRows(ids, callback)\n\t\t{\n\t\t\tBX.type.isArray(ids) && this.save(this.getAction('GRID_SET_EXPANDED_ROWS'), { ids }, callback);\n\t\t},\n\n\t\tsetCollapsedGroups(ids, callback)\n\t\t{\n\t\t\tBX.type.isArray(ids) && this.save(this.getAction('GRID_SET_COLLAPSED_GROUPS'), { ids }, callback);\n\t\t},\n\n\t\tresetExpandedRows()\n\t\t{\n\t\t\tthis.save(this.getAction('GRID_RESET_EXPANDED_ROWS'), {});\n\t\t},\n\n\t\tsaveForAll(callback)\n\t\t{\n\t\t\tthis.save(\n\t\t\t\tthis.getAction('GRID_SAVE_SETTINGS'),\n\t\t\t\t{\n\t\t\t\t\tview_id: 'default',\n\t\t\t\t\tset_default_settings: 'Y',\n\t\t\t\t\tdelete_user_settings: 'Y',\n\t\t\t\t\tview_settings: this.getCurrentOptions(),\n\t\t\t\t},\n\t\t\t\tcallback,\n\t\t\t);\n\t\t},\n\n\t\tbatch(data, callback)\n\t\t{\n\t\t\tthis.save(this.getAction('GRID_SAVE_BATH'), { bath: data }, callback);\n\t\t},\n\n\t\tsave(action, data, callback)\n\t\t{\n\t\t\tconst self = this;\n\t\t\tBX.ajax.post(\n\t\t\t\tthis.getUrl(action),\n\t\t\t\tdata,\n\t\t\t\t(res) => {\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tres = JSON.parse(res);\n\t\t\t\t\t\tif (!res.error)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.update(res);\n\t\t\t\t\t\t\tif (BX.type.isFunction(callback))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcallback(res);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tBX.onCustomEvent(self.parent.getContainer(), 'Grid::optionsChanged', [self.parent]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch\n\t\t\t\t\t{}\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t};\n})();\n","(function() {\n\t'use strict';\n\n\tBX.namespace('BX.Grid');\n\n\tBX.Grid.Utils = {\n\t\t/**\n\t\t * Prepares url for ajax request\n\t\t * @param {string} url\n\t\t * @param {string} ajaxId Bitrix ajax id\n\t\t * @returns {string} Prepares ajax url with ajax id\n\t\t */\n\t\tajaxUrl(url, ajaxId)\n\t\t{\n\t\t\treturn this.addUrlParams(url, { bxajaxid: ajaxId });\n\t\t},\n\n\t\taddUrlParams(url, params)\n\t\t{\n\t\t\treturn BX.util.add_url_param(url, params);\n\t\t},\n\n\t\t/**\n\t\t * Moves array item currentIndex to newIndex\n\t\t * @param {array} array\n\t\t * @param {int} currentIndex\n\t\t * @param {int} newIndex\n\t\t * @returns {*}\n\t\t */\n\t\tarrayMove(array, currentIndex, newIndex)\n\t\t{\n\t\t\tif (newIndex >= array.length)\n\t\t\t{\n\t\t\t\tlet k = newIndex - array.length;\n\t\t\t\twhile ((k--) + 1)\n\t\t\t\t{\n\t\t\t\t\tarray.push(undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t\tarray.splice(newIndex, 0, array.splice(currentIndex, 1)[0]);\n\n\t\t\treturn array;\n\t\t},\n\n\t\t/**\n\t\t * Gets item index in array or HTMLCollection\n\t\t * @param {array|HTMLCollection} collection\n\t\t * @param {*} item\n\t\t * @returns {number}\n\t\t */\n\t\tgetIndex(collection, item)\n\t\t{\n\t\t\treturn [].indexOf.call((collection || []), item);\n\t\t},\n\n\t\t/**\n\t\t * Gets nextElementSibling\n\t\t * @param {Element} currentItem\n\t\t * @returns {Element|null}\n\t\t */\n\t\tgetNext(currentItem)\n\t\t{\n\t\t\tif (currentItem)\n\t\t\t\n\t\t\t{ return currentItem.nextElementSibling || null;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Gets previousElementSibling\n\t\t * @param {Element} currentItem\n\t\t * @returns {Element|null}\n\t\t */\n\t\tgetPrev(currentItem)\n\t\t{\n\t\t\tif (currentItem)\n\t\t\t\n\t\t\t{ return currentItem.previousElementSibling || null;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Gets closest parent element of node\n\t\t * @param {Node} item\n\t\t * @param {string} [className]\n\t\t * @returns {*|null|Node}\n\t\t */\n\t\tclosestParent(item, className)\n\t\t{\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tif (!className)\n\t\t\t\t{\n\t\t\t\t\treturn item.parentNode || null;\n\t\t\t\t}\n\n\t\t\t\treturn BX.findParent(\n\t\t\t\t\titem,\n\t\t\t\t\t{ className },\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Gets closest childs of node\n\t\t * @param item\n\t\t * @returns {Array|null}\n\t\t */\n\t\tclosestChilds(item)\n\t\t{\n\t\t\tif (item)\n\t\t\t\n\t\t\t{ return item.children || null;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Sorts collection\n\t\t * @param current\n\t\t * @param target\n\t\t */\n\t\tcollectionSort(current, target)\n\t\t{\n\t\t\tlet root; let collection; let collectionLength; let currentIndex; let\n\t\t\t\ttargetIndex;\n\n\t\t\tif (current && target && current !== target && current.parentNode === target.parentNode)\n\t\t\t{\n\t\t\t\troot = this.closestParent(target);\n\t\t\t\tcollection = this.closestChilds(root);\n\t\t\t\tcollectionLength = collection.length;\n\t\t\t\tcurrentIndex = this.getIndex(collection, current);\n\t\t\t\ttargetIndex = this.getIndex(collection, target);\n\n\t\t\t\tif (collectionLength === targetIndex)\n\t\t\t\t{\n\t\t\t\t\troot.appendChild(target);\n\t\t\t\t}\n\n\t\t\t\tif (currentIndex > targetIndex)\n\t\t\t\t{\n\t\t\t\t\troot.insertBefore(current, target);\n\t\t\t\t}\n\n\t\t\t\tif (currentIndex < targetIndex && collectionLength !== targetIndex)\n\t\t\t\t{\n\t\t\t\t\troot.insertBefore(current, this.getNext(target));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Gets table collumn\n\t\t * @param table\n\t\t * @param cell\n\t\t * @returns {Array}\n\t\t */\n\t\tgetColumn(table, cell)\n\t\t{\n\t\t\tconst currentIndex = this.getIndex(\n\t\t\t\tthis.closestChilds(this.closestParent(cell)),\n\t\t\t\tcell,\n\t\t\t);\n\t\t\tconst column = [];\n\n\t\t\t[].forEach.call(table.rows, (current) => {\n\t\t\t\tcolumn.push(current.cells[currentIndex]);\n\t\t\t});\n\n\t\t\treturn column;\n\t\t},\n\n\t\t/**\n\t\t * Sets style properties and values for each item in collection\n\t\t * @param {HTMLElement[]|HTMLCollection} collection\n\t\t * @param {object} properties\n\t\t */\n\t\tstyleForEach(collection, properties)\n\t\t{\n\t\t\tproperties = BX.type.isPlainObject(properties) ? properties : null;\n\t\t\tconst keys = Object.keys(properties);\n\n\t\t\t[].forEach.call((collection || []), (current) => {\n\t\t\t\tkeys.forEach((propKey) => {\n\t\t\t\t\tBX.style(current, propKey, properties[propKey]);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\trequestAnimationFrame()\n\t\t{\n\t\t\tconst raf = (\n\t\t\t\twindow.requestAnimationFrame\n\t\t\t\t|| window.webkitRequestAnimationFrame\n\t\t\t\t|| window.mozRequestAnimationFrame\n\t\t\t\t|| window.msRequestAnimationFrame\n\t\t\t\t|| window.oRequestAnimationFrame\n\t\t\t\t|| function(callback) { window.setTimeout(callback, 1000 / 60); }\n\t\t\t);\n\n\t\t\traf.apply(window, arguments);\n\t\t},\n\n\t\t/**\n\t\t * Gets elements by class name\n\t\t * @param rootElement\n\t\t * @param className\n\t\t * @param first\n\t\t * @returns {Array|null}\n\t\t */\n\t\tgetByClass(rootElement, className, first)\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (className)\n\t\t\t{\n\t\t\t\tresult = rootElement ? rootElement.getElementsByClassName(className) : [];\n\n\t\t\t\tif (first)\n\t\t\t\t{\n\t\t\t\t\tresult = result.length > 0 ? result[0] : null;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = [].slice.call(result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetByTag(rootElement, tag, first)\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (tag)\n\t\t\t{\n\t\t\t\tresult = rootElement ? rootElement.getElementsByTagName(tag) : [];\n\n\t\t\t\tif (first)\n\t\t\t\t{\n\t\t\t\t\tresult = result.length > 0 ? result[0] : null;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = [].slice.call(result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tgetBySelector(rootElement, selector, first)\n\t\t{\n\t\t\tlet result = [];\n\n\t\t\tif (selector)\n\t\t\t{\n\t\t\t\tif (first)\n\t\t\t\t{\n\t\t\t\t\tresult = rootElement ? rootElement.querySelector(selector) : null;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult = rootElement ? rootElement.querySelectorAll(selector) : [];\n\t\t\t\t\tresult = [].slice.call(result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tlistenerParams(params)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.addEventListener('test', null, params);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tparams = false;\n\t\t\t}\n\n\t\t\treturn params;\n\t\t},\n\t};\n})();\n"],"names":["BX","namespace","Grid","ActionPanel","parent","actions","types","rel","lastActivated","init","button","elements","buttonOnChange","buttonData","prototype","eval","addCustomEvent","window","proxy","_dropdownEventHandle","panel","getPanel","bind","delegate","_checkboxChange","_clickOnButton","_gridUpdatedEventHandle","destroy","removeCustomEvent","cancelButton","fireEvent","firstChild","id","event","item","dataItem","isPanelControl","_dropdownChange","resetForAllCheckbox","checkbox","getForAllCheckbox","type","isDomNode","checked","Utils","getByClass","settings","get","getContainer","getApplyButton","node","hasClass","getTextInputs","getBySelector","getHiddenInputs","getSelects","getDropdowns","getCheckboxes","getButtons","isDropdown","isCheckbox","isTextInput","isHiddenInput","isSelect","tagName","createDropdown","data","relative","emptyText","EMPTY_TEXT","isMultiple","MULTIPLE","container","createContainer","ID","dropdown","create","props","className","attrs","name","NAME","JSON","stringify","ITEMS","VALUE","children","html","appendChild","createCheckbox","inner","titleSpan","input","value","title","TITLE","ONCHANGE","CHECKED","for","LABEL","createText","isNotEmptyString","text","placeholder","PLACEHOLDER","createHidden","CLASS","createButton","createButtonNode","prepareButton","SETTINGS","buttonId","TEXT","isSetButtonDisabled","Dom","attr","addClass","removeClass","Boolean","minSelectedRows","getSelectedIds","length","createLink","link","href","HREF","createCustom","custom","options","replace","removeItemsRelativeCurrent","element","result","dataRelative","includes","push","nextElementSibling","forEach","current","remove","validateData","isArray","activateControl","disabled","deactivateControl","showControl","control","show","hideControl","hide","validateActionObject","action","isPlainObject","ACTION","RESET_CONTROLS","DATA","validateControlObject","controlObject","createDate","date","decl","block","mix","calendarButton","valueDelete","tabindex","TABINDEX","enableTime","TIME","createControl","relativeId","newElement","TYPE","DROPDOWN","CHECKBOX","HIDDEN","BUTTON","LINK","CUSTOM","DATE","onChangeHandler","isPseudo","callback","self","CREATE","preparedData","Runtime","clone","reverse","insertAfter","ACTIVATE","currentId","SHOW","showCurrent","HIDE","hideCurrent","HIDE_ALL_EXPECT","getControls","some","el","SHOW_ALL","REMOVE","removeCurrent","CALLBACK","confirmDialog","currentCallback","JS","err","Error","then","cancel","parentNode","onChange","PSEUDO","target","findParent","isButton","preventDefault","rows","getRows","getSelected","filter","row","isShown","map","getId","findChild","getValues","controls","concat","dropdownValue","multiple","undefined","split","getAttribute","selectedIndex","BaseClass","getParent","CellActionState","SHOW_BY_HOVER","ACTIVE","Reflection","CellActions","PIN","MUTE","ColsSortable","dragItem","targetItem","rowsList","colsList","dragRect","offset","startDragOffset","dragColumn","targetColumn","isDrag","getColsList","getRowsList","inited","reinit","registerObjects","unregisterObjects","reset","fixedTableColsList","isActive","register","getFixedHeaderColsList","unregister","column","jsDD","unregisterObject","onbxdragstart","_onDragStart","onbxdrag","_onDrag","onbxdragstop","_onDragEnd","registerObject","getByTag","getHeadFirstChild","getNode","isStatic","getParam","getPinHeader","getFixedTable","getSourceRows","getDragOffset","getScrollContainer","scrollLeft","startScrollOffset","x","left","getColumn","cell","HTMLTableCellElement","cells","cellIndex","isPinned","current_node","getBoundingClientRect","Math","ceil","width","start_x","dragIndex","getIndex","preventSortableClick","isDragToRight","index","nodeClientRect","nodeCenter","isDragToLeft","isDragToBack","isMovedToRight","style","transform","isMovedToLeft","isMoved","moveColumn","transition","isNumber","styleForEach","dragOffset","leftOffset","rightOffset","defaultOffset","dragTransitionDuration","call","classList","contains","collectionSort","columns","getUserOptions","setColumns","onCustomEvent","setTimeout","Counters","Type","LEFT","LEFT_ALIGNED","RIGHT","Color","DANGER","SUCCESS","PRIMARY","GRAY","LIGHT","DARK","Size","LARGE","MEDIUM","originalUpdatePageData","ajax","UpdatePageData","disableBxAjaxUpdatePageData","enableBxAjaxUpdatePageData","Data","response","xhr","headRows","bodyRows","footRows","moreButton","pagination","counterDisplayed","counterSelected","counterTotal","limit","actionPanel","rowsByParentId","rowById","isValidResponse","validateResponse","isBoolean","getResponse","request","url","method","error","isString","eventArgs","gridId","disableCheckAllCheckboxes","hasOwnProperty","cancelRequest","baseUrl","addUrlParams","sessid","bitrix_sessid","internal","grid_id","apply_filter","util","remove_url_param","clear_nav","grid_action","formData","Http","convertObjectToFormData","ajaxUrl","getAjaxId","dataType","headers","processData","scriptsRunFirst","start","preparePost","onsuccess","querySelector","getContainerId","res","parse","messages","arParams","MESSAGES","tableUnfade","isFunction","enableCheckAllCheckboxes","onerror","send","getHeadRows","getBodyRows","getRowsByParentId","getRowById","getFootRows","getMoreButton","getPagination","getCounterDisplayed","getCounterSelected","getCounterTotal","selector","getLimit","getPageSize","getActionPanel","Main","items","menuId","menu","menuItems","dataItems","dataValue","dataPseudo","dropdownItemClass","activeClass","selectedClass","notSelectedClass","lockedClass","menuItemClass","getItems","getValue","getMenuId","getMultiple","getEmptyText","createMenu","popupWindow","adjustPosition","showMenu","str","dataset","String","getValueItem","find","getValueAsArray","toString","i","getValueItems","values","toggleValue","indexOf","splice","join","getValueText","prepareMenuItems","subItem","currentValue","prepareItems","isHtmlEntity","htmlEntity","selected","innerHTML","delimiter","DELIMITER","PopupMenu","autoHide","offsetTop","offsetLeft","Number","menuOffsetLeft","maxHeight","menuMaxHeight","events","onPopupClose","_onCloseMenu","onPopupShow","_onShowMenu","getMenuById","popupPosition","popupContainer","setProperty","getSubItem","refresh","isUndefined","innerText","selectItem","layout","lockedItem","getDataItemIndexByValue","getDataItemByValue","_onItemClick","getMenuItem","close","stopPropagation","class","dropdownManager","dropdownClass","onLoadItems","document","getById","body","instance","Element","resetOnclickAttr","load","unload","isLoad","onclick","getObserver","observer","getLink","Fader","table","getTable","scrollStartEventName","isTouch","scrollEndEventName","fixedTable","debounceScrollHandler","debounce","_onWindowScroll","toggle","addEventListener","listenerParams","passive","_onHeaderUpdated","getEarLeft","_onMouseoverLeft","getEarRight","_onMouseoverRight","stopScroll","adjustEarOffset","unbind","removeEventListener","hideLeftEar","hideRightEar","startScrollByDirection","clearTimeout","scrollTimer","clearInterval","scrollInterval","direction","stepLength","stepTime","setInterval","earLeft","earRight","getShadowLeft","getShadowRight","prepare","windowHeight","height","tbodyPos","pos","tBodies","headerPos","tHead","scrollY","isIE","documentElement","scrollTop","bottomPos","top","posTop","bottom","requestAnimationFrame","lastPosTop","translate","lastBottomPos","hasScroll","offsetWidth","clientWidth","hasScrollLeft","hasScrollRight","abs","showLeftEar","showRightEar","adjustFixedTablePosition","marginLeft","grid","containerId","userOptions","userOptionsActions","userOptionsHandlerUrl","panelActions","panelTypes","editorTypes","messageTypes","Event","EventEmitter","makeObservable","wrapper","fadeContainer","scrollContainer","history","checkAll","sortable","updater","fader","editor","isEditMode","pinHeader","pinPanel","resize","editableRows","location","pathname","search","TypeError","Settings","UserOptions","gridSettings","SettingsWindow","Manager","Message","cache","Cache","MemoryCache","PinHeader","bindOnCheckAll","pageSize","Pagesize","InlineEditor","PinPanel","bindOnRowEvents","Resize","bindOnMoreButtonEvents","bindOnClickPaginationLinks","bindOnClickHeader","initRowsDragAndDrop","initColsDragAndDrop","initSelected","adjustEmptyTable","getSourceBodyChild","_onUnselectRows","_onGridUpdated","frames","getFrameId","onresize","throttle","_onFrameResize","initStickedColumns","getFader","getResize","getColsSortable","getRowsSortable","getSettingsWindow","getActionsPanel","getPinPanel","adjustFadePosition","getFadeOffset","enableActionsPanel","disableActionsPanel","disableForAllCounter","adjustCheckAllCheckboxes","ie","touch","paramName","defaultValue","getActionKey","confirmForAll","CONFIRM","CONFIRM_MESSAGE","CONFIRM_FOR_ALL_MESSAGE","selectAllCheckAllCheckboxes","selectAll","enableForAllCounter","updateCounterDisplayed","updateCounterSelected","lastRowAction","unselectAllCheckAllCheckboxes","unselectAll","getCheckAllCheckboxes","indeterminateCheckAllCheckboxes","indeterminate","determinateCheckAllCheckboxes","editSelected","_onGridUpdate","editSelectedSave","FIELDS","getEditSelectedValues","tableFade","getData","editButton","reloadTable","getUpdater","updateContainer","updateHeadRows","updateBodyRows","updateFootRows","updatePagination","updateMoreButton","updateCounterTotal","updateGroupActions","colsSortable","rowsSortable","getForAllKey","updateRow","Row","update","removeRow","addRow","getAction","rowData","editSelectedCancel","removeSelected","sendSelected","selectedRows","sendRowAction","getEditor","reload","getPanels","getEmptyBlock","adjustEmptyBlockPosition","currentTarget","emptyBlock","filteredRows","gridRect","scrollBottom","diff","panelsHeight","containerWidth","paddingOffset","parentElement","parentPaddingTop","parseFloat","parentPaddingBottom","isNaN","getCurrentPage","hidePanels","showPanels","getGroupEditButton","getGroupDeleteButton","enableGroupActions","deleteButton","disableGroupActions","closeActionsMenu","l","Updater","isSortableHeader","isNoSortableHeader","tag","onBeforeSortEvent","BaseEvent","columnName","emit","isDefaultPrevented","_clickOnSortableHeader","enableEditMode","disableEditMode","getColumnHeaderCellByName","getColumnByName","adjustIndex","fixedCells","getAllRows","querySelectorAll","getColumnByIndex","reduce","accumulator","slice","hasEmptyRow","stickyColumnByIndex","setStickedColumns","stickedColumns","batch","getStickedColumns","getHead","acc","cellWidth","heights","minWidth","minHeight","lastStickyCell","getLastStickyCellFromRowByIndex","lastStickyCellLeft","parseInt","lastStickyCellWidth","add","adjustFixedColumnsPosition","columnsPosition","cellLeft","reduceRight","fadeOffset","shadowLeft","sortByColumn","headerCell","header","sort_url","prepareSortUrl","setSort","sort_by","sort_order","add_url_param","by","order","RowsSortable","getUserOptionsHandlerUrl","checkAllNodes","total","getBodyChild","getCheckbox","_clickOnCheckAll","toggleSelectionAll","isAllSelected","getLinks","_clickOnPaginationLink","_clickOnMoreButton","showCheckboxes","enableCollapsibleRows","_onClickOnRow","getDefaultAction","_onRowDblclick","getActionsButton","_clickOnRowActionsButton","getCollapseButton","_onCollapseButtonClick","toggleChildRows","isCustom","setCollapsedGroups","getIdsCollapsedGroups","setExpandedRows","getIdsExpandedRows","actionsMenuIsShown","showActionsMenu","defaultJs","isEdit","clickTimer","clickPrevent","console","warn","clickDelay","selection","getSelection","nodeName","shiftKey","removeAllRanges","clickActions","apply","containsNotSelected","min","max","contentContainer","isPrevent","getContentContainer","currentIndex","currentRow","lastIndex","isSelected","select","unselect","adjustRows","Pagination","getState","state","getLoader","resetExpandedRows","appendBodyRows","newRows","newHeadRows","newNavPanel","thisBody","thisHead","thisNavPanel","addRows","cleanNode","getCountDisplayed","getCountSelected","getCounter","counter","getWrapper","getFadeContainer","getHeaders","getBody","getFoot","Rows","loader","Loader","blockSorting","headerCells","unblockSorting","sortBy","dialog","applyButton","CONFIRM_APPLY_BUTTON","CONFIRM_APPLY","CONFIRM_CANCEL_BUTTON","CONFIRM_CANCEL","PopupWindow","content","titleBar","CONFIRM_TITLE","zIndex","overlay","closeIcon","closeByEsc","onClose","hotKey","buttons","PopupWindowButton","click","PopupWindowButtonLink","code","currentPage","CURRENT_PAGE","getEmptyStub","showEmptyStub","stub","hideEmptyStub","offsetHeight","getTemplateRow","templateRow","cloned","prepend","getRowEditorValue","withTemplate","getEditorValue","getRowEditorActionPanel","rowEditorActionPanel","SAVE_BUTTON_LABEL","saveRows","CANCEL_BUTTON_LABEL","hideRowsEditor","showRowEditorActionsPanel","append","hideRowEditorActionsPanel","prependRowEditor","addRowEditor","appendRowEditor","prependTo","appendTo","edit","emitAsync","rowIndex","editCancel","makeCountable","setId","setActions","setCellsContent","getRealtime","remember","Realtime","appendHeadRows","prependHeadRows","updateBodyRowById","currentNode","prependBodyRows","foot","counterCell","paginationCell","buttonParent","closestParent","GroupActions","panelNode","panelChild","ImageField","getPreview","src","getFileInput","accept","change","reader","FileReader","onload","readAsDataURL","files","getFakeField","getLayout","getRemoveButton","getUploadButton","opacity","isDropdownChangeEventSubscribed","createTextarea","editObject","createInput","htmlspecialcharsback","NUMBER","RANGE","MIN","MAX","step","STEP","htmlspecialchars","DISABLED","createMoney","fieldChildren","priceObject","PRICE","createMoneyPrice","CURRENCY_LIST","currencyObject","CURRENCY","HTML_ENTITY","createMoneyCurrency","isNotEmptyObject","fieldName","hidden","ATTRIBUTES","priceInput","fieldNode","currencyDropdown","eventData","field","price","currency","currencyBlock","subscribe","controlId","dropdownObject","priceField","createOutput","getDropdownValueItemByValue","preparedValue","valueItem","createMultiselect","selectedValues","squares","isArrayFilled","itemName","HTML","renderedItem","Tag","render","Text","encode","isMulti","validateEditObject","initCalendar","calendar","bindOnRangeChange","output","bubble","thumbWidth","range","position","positionOffset","round","createImageEditor","span","_onControlKeydown","TEXTAREA","MULTISELECT","IMAGE","MONEY","processHTML","SCRIPT","isInternal","evalGlobal","saveButton","Label","DEFAULT","WARNING","SECONDARY","LIGHTGREEN","LIGHTBLUE","RemoveButtonType","INSIDE","OUTSIDE","adjustLoaderOffset","display","visibility","rowsCount","setOptions","size","gridManager","object","old","getInstanceById","getDataIndex","popup","onUpdated","isNeedShow","getPopup","setContent","getContent","messagesDecl","message","messageDecl","toLowerCase","getPopupId","maxWidth","contentNoPaddings","handlers","handler","context","setPageSize","links","parentNodeResizeObserver","adminPanel","getAdminPanel","mo","MutationObserver","onAdminPanelMutation","observe","attributes","rect","workArea","ResizeObserver","refreshRect","_onScroll","_onResize","pin","async","cloneThead","cloneCells","resizeCloneCells","firstElementChild","isAdminPanelPinned","getPinOffset","toNumber","unpin","stopPin","startPin","scrollRect","scrollingElement","animationDuration","pinned","bindOnRowsEvents","unbindOnRowsEvents","_onThereSelectedRows","_onNoSelectedRows","bindOnWindowEvents","unbindOnWindowEvents","getScrollBottom","getWindowHeight","getPanelRect","panelRect","getPanelPrevBottom","prev","previousSibling","withAnimation","bodyRect","getStartDiffPanelPosition","removeProperty","isNeedPinAbsolute","absolutePin","adjustPanelPosition","unpinPanel","parentRect","translateOffset","delay","cb","isSelectedRows","isNeedPin","scrollX","pageXOffset","lastScrollX","panelPos","pinController","getEndDiffPanelPosition","prevPanelPos","prevPanelBottom","lastIsSelected","constructor","setEventNamespace","isStringFilled","ReferenceError","cellActions","setCellActions","counters","preparedCounters","Object","entries","columnId","animation","toBoolean","setCounters","insertBefore","targetRow","enableAbsolutePosition","movedElements","fakeRowNode","createElement","getHeight","animationName","disableAbsolutePosition","showStub","tr","td","colspan","getCells","description","oldStub","lastRegisterButtons","registerTableButtons","registerPinnedTableButtons","pinnedTableButtons","getPinnedTableButtons","cellsKeys","keys","cellContainer","__overlay","__resizeCell","key","fixedCell","fixedCellContainer","cpos","cellAttrWidth","sX","saveSizes","getColumnSizes","setColumnSizes","sort","actionsButton","depth","parentId","editData","onElementClick","initElementsEvents","bindNodes","isBodyChild","onMouseOver","onMouseLeave","_onRightClick","isHeadChild","cellValues","getCellEditorValue","cellValue","RAW_NAME","RAW_VALUE","editGetValues","getCustomValue","getMoneyValue","getMultiSelectValues","getImageValue","isNotCount","closest","filteredValue","inputs","currencySelector","currencyFieldName","Map","hasAttribute","resultObject","selectValues","option","set","toUpperCase","isMultipleCustomValue","has","elementName","lastIndexOf","fakeInput","getEditorContainer","collapseButton","stateLoad","stateUnload","stateExpand","stateCollapse","getParentId","getDataset","getDepth","setDepth","depthOffset","getShiftCells","childDepth","setParentId","showChildRows","getChildren","isExpand","functionName","getGroupId","hideChildRows","isChildsLoaded","childsLoaded","expand","loadChildRows","collapse","parent_id","editorContainer","getCellByIndex","getEditDataByCellIndex","getCellNameByCellIndex","resetEditData","setEditData","getEditData","editableData","rowId","getCellEditDataByCellIndex","columnEditData","editable","setDraggable","isDraggable","getActionsMenu","actionsMenu","buttonRect","getMenuItems","angle","_onPopupShow","getEventTarget","preventCloseContextMenu","popupMenu","setBindElement","pageY","getOption","pageX","getActions","initSelect","getParentNode","getParentNodeName","isSelectable","hasEditable","isFootChild","actionCell","actionButton","makeNotCountable","getColumnOptions","Reflect","headRow","cellName","columnOptions","cellContent","labels","labelOptions","label","color","light","bindOnEvents","labelContent","removeButton","labelsContainer","clean","oldLabelsContainer","tags","tagOptions","active","tagContent","tagInner","tagsContainer","addButton","oldTagsContainer","getCellById","isTemplate","test","headCells","cellsWidth","cellId","currentContainer","newContainer","actionClass","setTarget","eventName","preparedHandler","cellInner","counterContainer","uiCounter","currentCounter","newCounter","counterInner","currentInner","newInner","bindOnce","align","leftAlignedClass","headChild","bodyChild","footChild","enableDragAndDrop","disableDragAndDrop","getFootLastChild","getLast","getFootChild","getFootFirstChild","getFirst","getBodyLastChild","getBodyFirstChild","getHeadLastChild","getHeadChild","normalizeNode","rowNode","rowInstance","array","withTemplates","getByIndex","recursive","getByParentId","getRowsByGroupId","groupId","getExpandedRows","getSourceHeadChild","getSourceFootChild","targetId","RowDragEvent","allowMoveRow","allowInsertBeforeTarget","errorMessage","allowMove","allowInsertBefore","disallowMove","disallowInsertBefore","getDragItem","getTargetItem","getEventName","setDragItem","setTargetItem","setEventName","isAllowedMove","isAllowedInsertBefore","getErrorMessage","list","setDefaultProps","getList","prepareListItems","Enable","onscrollDebounceHandler","disable","enable","windowScrollTop","rowsRectList","calcOffset","additionalDragItems","clientHeight","getTheadCells","sourceCells","createFake","cloneDragItem","cloneDragAdditionalDragItems","cloneDragAdditionalDragItemRows","theadCellsDecl","cloneRow","tableWidth","fake","getDragStartRect","moved","getAdditionalDragItems","getRowRect","dragStartOffset","start_y","dragEvent","dragRow","startDragDepth","startDragParentId","moveRow","transitionDuration","y","getWindowScrollTop","getSortOffset","getRowCenter","isDragToBottom","rowCenter","sortOffset","isMovedToBottom","isDragToTop","isMovedToTop","checkError","updateProperties","isDragetToTop","findNextVisible","createError","resetDragProperties","_onDragOver","_onDragLeave","sortRows","sortAdditionalDragItems","ids","saveRowsSort","additional","realX","realY","defaultSettings","classContainer","classWrapper","classTable","classScrollContainer","classFadeContainer","classFadeContainerRight","classFadeContainerLeft","classNavPanel","classActionPanel","classCursor","classRowCustom","classMoreButton","classRow","classHeadRow","classBodyRow","classFootRow","classDataRows","classPanels","classCellHeadContainer","classCellHeadOndrag","classEmptyRows","classEmptyBlock","classCheckAllCheckboxes","classCheckedRow","classRowCheckbox","classPagination","classActionCol","classCounterDisplayed","classCounterSelected","classCounterTotal","classTableFade","classDragActive","classResizeButton","classOnDrag","classDisableDrag","classPanelCellContent","classCollapseButton","classRowStateLoad","classRowStateExpand","classHeaderSortable","classHeaderNoSortable","classCellStatic","classHeadCell","classPageSize","classGroupEditButton","classGroupDeleteButton","classGroupActionsDisabled","classPanelButton","classPanelApplyButton","classPanelCheckbox","classEditor","classEditorContainer","classEditorText","classEditorDate","classEditorNumber","classEditorRange","classEditorCheckbox","classEditorTextarea","classEditorCustom","classEditorMoney","classCellContainer","classEditorOutput","classSettingsWindow","classSettingsWindowColumn","classSettingsWindowColumnLabel","classSettingsWindowColumnEditState","classSettingsWindowColumnEditInput","classSettingsWindowColumnEditButton","classSettingsWindowColumnCheckbox","classSettingsWindowShow","classSettingsWindowSelectAll","classSettingsWindowUnselectAll","classSettingsWindowSearchSectionsWrapper","classSettingsWindowSearchActiveSectionIcon","classSettingsWindowSearchSectionInput","classSettingsWindowSearchSectionItemHidden","classSettingsWindowSearchSectionItemVisible","classSettingsButton","classSettingsButtonActive","classSettingsWindowClose","classSettingsWindowReset","classSettingsWindowColumnChecked","classShowAnimation","classCloseAnimation","classLoader","classLoaderShow","classLoaderHide","classRowError","loaderHideAnimationName","classHide","classEar","classEarLeft","classEarRight","classNotCount","classCounter","classForAllCounterEnabled","classLoad","classRowActionButton","classDropdown","classPanelControl","classPanelControlContainer","classForAllCheckbox","classDisable","dataActionsKey","updateActionMore","classShow","classGridShow","updateActionPagination","updateActionSort","ajaxIdDataProp","pageSizeId","sortableRows","sortableColumns","getDefault","SAVE_FOR_ALL","SAVE_FOR_ME","CheckboxList","params","stickyColumns","Set","popupItems","CHECKBOX_LIST_OPTIONS","useSearch","ENABLE_FIELDS_SEARCH","useSectioning","sections","isForAllValue","createPopup","emptyStateTitle","emptyStateDescription","allSectionsDisabledTitle","parentType","UiCheckboxList","popupOptions","columnCount","lang","getSections","categories","getCategories","getOptions","onApply","onDefault","destroyPopupAfterClose","closeAfterApply","isEditableOptionsTitle","customFooterElements","getCustomFooterElements","section","sectionKey","category","columnsWithSections","customNames","getCurrentOptions","custom_names","sectionName","default","hasOwn","decode","isChecked","categoryKey","prepareColumnParams","sticked","isAdmin","SETTINGS_FOR_LABEL","SETTINGS_FOR_FOR_ME_LABEL","SETTINGS_FOR_FOR_ALL_LABEL","onClick","ALLOW_STICKED_COLUMNS","isStickyColumnsAllowed","HAS_STICKED_COLUMNS","hasStickyColumns","fields","isForAll","saveColumnsAndHidePopup","saveColumns","columnNames","getColumnNames","view_id","set_default_settings","delete_user_settings","names","titles","isObjectLike","DEFAULT_COLUMNS","CONFIRM_RESET_MESSAGE","sortItems","getSelectedColumns","getSelectedOptions","IS_ADMIN","getPopupItems","selectOption","saveColumnsByNames","Column","defaultTitle","lastTitle","trim","updateState","getEditButton","onEditButtonClick","getStickyButton","onStickyButtonClick","isSticked","unstick","stick","isEditEnabled","disableEdit","enableEdit","setState","getTitle","restoreState","setTitle","getLabel","getDefaultTitle","isEdited","getSettings","isDefault","restore","stickedDefault","onLabelPaste","onLabelKeydown","clipboardData","sourceText","encodedText","formattedHtml","RegExp","execCommand","keyCode","contentEditable","adjustCaret","isContentEditable","createRange","elementTextLength","textNodes","childNodes","lastTextNode","setStart","setEnd","addRange","fieldsSettingsInstance","_onContainerClick","_onColumnMoved","_onSettingsButtonClick","getFieldsSettingsInstance","Promise","resolve","createFieldsSettingsInstance","isUseLazyLoadColumns","useLazyLoadColumns","getPopupTitle","useCheckboxList","Popup","UI","customSettingsTitle","settingsTitle","tmpDiv","gridsCount","pageTitleNode","getElementById","pageTitle","getShowedColumns","filterSectionsSearchInput","filterSections","allColumns","resetButton","selectAllButton","unselectAllButton","leftIndentFromWindow","rightIndentFromWindow","popupWidth","MainPopup","getSourceContent","onItemClick","onAnimationEnd","getResetButton","onResetButtonClick","onApplyButtonClick","getCancelButton","getSelectAllButton","onSelectAll","getUnselectAllButton","onUnselectAll","COLUMNS_ALL_WITH_SECTIONS","prepareFilterSections","prepareFilterSectionsSearchInput","emitSaveEvent","restoreLastColumns","disableAllColumnsLabelEdit","adjustActionButtonsState","sourceContent","contentList","fetchColumns","prepareColumnOptions","createColumnElement","hideAndDestroyLoader","fixedFooter","getPopupContainer","catch","promise","lazyLoadParams","controller","GET_LIST","isNil","fulfill","Ajax","runAction","checkboxId","checkedClass","enableActions","disableActions","getPopupContentContainer","getElementsByClassName","getFilterSectionsSearchInput","onFilterSectionSearchInput","previousElementSibling","onFilterSectionSearchInputClear","getResetButtonId","enableWait","restoreColumns","disableWait","showedColumns","getAllColumns","isShowedColumn","getApplyButtonId","onApplyConfirmDialogButton","unselectForAllCheckbox","buttonNode","updateColumnsState","getCancelButtonId","getFilterSections","onFilterSectionClick","HTMLCollection","sectionId","uiGridFilterSectionButton","getCurrentViewName","current_view","getViewsList","views","getUrl","GRID_ID","bxajaxid","newOptions","save","setColumnsNames","sizes","forAll","view_settings","saveForAll","bath","post","ajaxId","arrayMove","newIndex","k","collection","getNext","currentItem","getPrev","closestChilds","root","collectionLength","targetIndex","properties","propKey","raf","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","arguments","rootElement","first","getElementsByTagName"],"mappings":"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"}